"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var core_1 = require('@angular/core');
var common_1 = require('@angular/common');
var angularfire2_1 = require('angularfire2');
var EnvironmentComponent = (function () {
    function EnvironmentComponent(af, renderer) {
        var _this = this;
        this.URL = window.location.href;
        this.onOff = af.database.object('/' + this.URL.split('/game/')[1] + '/Globals/OnOff', { preserveSnapshot: true });
        this.onOff.subscribe(function (snapshot) {
            _this.environmentSnapshot = snapshot.val();
        });
        this.environment = af.database.object('/' + this.URL.split('/game/')[1] + '/Globals/Environment');
        this.players = af.database.object('/' + this.URL.split('/game/')[1] + '/Players', { preserveSnapshot: true });
        this.players.subscribe(function (snapshot) {
            _this.playersSnapshot = snapshot.val();
        });
        this.getKey = renderer.listenGlobal('document', 'keyup', function (event) {
            var key = event.keyCode;
            _this.toggleBtn(key);
        });
    }
    EnvironmentComponent.prototype.changeEnvironment = function (x) {
        var aether = 1;
        var material = 1;
        var chaos = 1;
        var order = 1;
        switch (x) {
            case 'rain':
                if (this.environmentSnapshot.rain == true) {
                    this.onOff.update({ rain: false });
                    break;
                }
                else {
                    this.onOff.update({ rain: true });
                    break;
                }
            case 'fog':
                if (this.environmentSnapshot.fog == true) {
                    this.onOff.update({ fog: false });
                    break;
                }
                else {
                    this.onOff.update({ fog: true });
                    break;
                }
            case 'lightning':
                if (this.environmentSnapshot.lightning == true) {
                    this.onOff.update({ lightning: false });
                    break;
                }
                else {
                    this.onOff.update({ lightning: true });
                    break;
                }
            case 'quake':
                if (this.environmentSnapshot.quake == true) {
                    this.onOff.update({ quake: false });
                    break;
                }
                else {
                    this.onOff.update({ quake: true });
                    break;
                }
            case 'snow':
                if (this.environmentSnapshot.snow == true) {
                    this.onOff.update({ snow: false });
                    break;
                }
                else {
                    this.onOff.update({ snow: true });
                    break;
                }
            case 'storm':
                if (this.environmentSnapshot.storm == true) {
                    this.onOff.update({ storm: false });
                    break;
                }
                else {
                    this.onOff.update({ storm: true });
                    break;
                }
        }
        if (this.environmentSnapshot.rain == true) {
            chaos += 1;
            material += 2;
        }
        if (this.environmentSnapshot.fog == true) {
            aether += 2;
            order += 1;
        }
        if (this.environmentSnapshot.lightning == true) {
            aether += 1;
            chaos += 2;
        }
        if (this.environmentSnapshot.quake == true) {
            order += 2;
            material += 1;
        }
        if (this.environmentSnapshot.snow == true) {
            aether += 2;
            material += 2;
        }
        if (this.environmentSnapshot.storm == true) {
            order += 2;
            chaos += 2;
        }
        this.environment.set({ aether: aether, material: material, chaos: chaos, order: order });
        this.changeChampionStats(aether, material, chaos, order);
    };
    EnvironmentComponent.prototype.changeChampionStats = function (aether, material, chaos, order) {
        if (this.playersSnapshot.player1.playerClass == 'Highwayman') {
            this.playersSnapshot.player1.physicalAttack = Math.floor((chaos * material) + 10);
            this.playersSnapshot.player1.physicalDefense = Math.floor(5 + material);
            this.playersSnapshot.player1.specialAttack = Math.floor(2 + (2 * order));
            this.playersSnapshot.player1.specialDefense = Math.floor(3 + chaos + aether);
            this.playersSnapshot.player1.dexterity = Math.floor(((10 * aether) + order) / material);
        }
        if (this.playersSnapshot.player1.playerClass == 'Elementalist') {
            this.playersSnapshot.player1.physicalAttack = Math.floor(4 + aether + material);
            this.playersSnapshot.player1.physicalDefense = Math.floor(3 + order);
            this.playersSnapshot.player1.specialAttack = Math.floor(((12 + aether) * chaos) / order);
            this.playersSnapshot.player1.specialDefense = Math.floor(10 + material + order);
            this.playersSnapshot.player1.dexterity = Math.floor(3 * chaos);
        }
        if (this.playersSnapshot.player1.playerClass == "Paragon") {
            this.playersSnapshot.player1.physicalAttack = Math.floor((order + material) * 2);
            this.playersSnapshot.player1.physicalDefense = Math.floor(((8 * material) + order) / (chaos * 2));
            this.playersSnapshot.player1.specialAttack = Math.floor((aether * 6) / material);
            this.playersSnapshot.player1.specialDefense = Math.floor(((7 * material) + chaos) / (order * 2));
        }
        if (this.playersSnapshot.player2.playerClass == 'Highwayman') {
            this.playersSnapshot.player2.physicalAttack = Math.floor((chaos * material) + 10);
            this.playersSnapshot.player2.physicalDefense = Math.floor(5 + material);
            this.playersSnapshot.player2.specialAttack = Math.floor(2 + (2 * order));
            this.playersSnapshot.player2.specialDefense = Math.floor(3 + chaos + aether);
            this.playersSnapshot.player2.dexterity = Math.floor(((10 * aether) + order) / material);
        }
        if (this.playersSnapshot.player2.playerClass == 'Elementalist') {
            this.playersSnapshot.player2.physicalAttack = Math.floor(4 + aether + material);
            this.playersSnapshot.player2.physicalDefense = Math.floor(3 + order);
            this.playersSnapshot.player2.specialAttack = Math.floor(((12 + aether) * chaos) / order);
            this.playersSnapshot.player2.specialDefense = Math.floor(10 + material + order);
            this.playersSnapshot.player2.dexterity = Math.floor(3 * chaos);
        }
        if (this.playersSnapshot.player2.playerClass == "Paragon") {
            this.playersSnapshot.player2.physicalAttack = Math.floor((order + material) * 2);
            this.playersSnapshot.player2.physicalDefense = Math.floor(((8 * material) + order) / (chaos * 2));
            this.playersSnapshot.player2.specialAttack = Math.floor((aether * 6) / material);
            this.playersSnapshot.player1.specialDefense = Math.floor(((7 * material) + chaos) / (order * 2));
        }
        this.playersSnapshot.player1.action = this.AISelectAction(this.playersSnapshot.player1, this.playersSnapshot.player2);
        this.playersSnapshot.player2.action = this.AISelectAction(this.playersSnapshot.player2, this.playersSnapshot.player1);
        this.players.update(this.playersSnapshot);
    };
    EnvironmentComponent.prototype.AISelectAction = function (player, enemy) {
        var action = "";
        var rng = (Math.floor(Math.random() * (100 - 0 + 1) + 0));
        if ((player.physicalAttack - enemy.physicalDefense) > (player.specialAttack - enemy.specialDefense)) {
            if (rng - (player.physicalAttack - enemy.physicalDefense) <= 0) {
                rng = 1;
            }
            else {
                rng -= (player.physicalAttack - enemy.physicalDefense);
            }
        }
        if ((player.physicalAttack - enemy.physicalDefense) < (player.specialAttack - enemy.specialDefense)) {
            if (rng + (player.specialAttack - enemy.specialDefense) >= 100) {
                rng = 100;
            }
            else {
                rng += (player.specialAttack - enemy.specialDefense);
            }
        }
        if (rng <= 33) {
            return "strike";
        }
        if (rng >= 66) {
            return "special";
        }
        if (rng < 66 && rng > 33) {
            return "defend";
        }
    };
    EnvironmentComponent.prototype.toggleBtn = function (key) {
        if (key == '65' || key == 'fog') {
            this.changeEnvironment('fog');
        }
        if (key == '83' || key == 'snow') {
            this.changeEnvironment('snow');
        }
        if (key == '68' || key == 'lightning') {
            this.changeEnvironment('lightning');
        }
        if (key == '70' || key == 'rain') {
            this.changeEnvironment('rain');
        }
        if (key == '71' || key == 'quake') {
            this.changeEnvironment('quake');
        }
        if (key == '72' || key == 'storm') {
            this.changeEnvironment('storm');
        }
    };
    EnvironmentComponent = __decorate([
        core_1.Component({
            selector: 'environment',
            template: "\n  <div *ngIf=\"environmentSnapshot\" class=\"container\">\n    <div class=\"col-sm-6 pull-left\">\n      <p>\n        To play, press key to turn on/off:<br>\n        [A] FOG; [S] SNOW; [D] LIGHTNING; [F] RAIN; [G] QUAKE; [H] STORM</p>\n    </div>\n    <div class=\"col-sm-6 pull-right envBtns\" *ngIf=\"environment\">\n      <div class=\"envBtnWrapper\" (click)=\"toggleBtn('fog')\" [ngSwitch]=\"environmentSnapshot.fog\">\n        <div *ngSwitchCase='true' class=\"envBtn active\">\n          <img src=\"./images/env_btn/env_fog_on.png\"></div>\n        <div *ngSwitchCase='false' class=\"envBtn\">\n          <img src=\"./images/env_btn/env_fog.png\"></div>\n        <p class=\"imgDescription\">Fog</p>\n      </div>\n      <div class=\"envBtnWrapper\" (click)=\"toggleBtn('snow')\" [ngSwitch]=\"environmentSnapshot.snow\">\n        <div *ngSwitchCase='true' class=\"envBtn active\">\n          <img src=\"./images/env_btn/env_hail_on.png\"></div>\n        <div *ngSwitchCase='false' class=\"envBtn\">\n          <img src=\"./images/env_btn/env_hail.png\"></div>\n        <p class=\"imgDescription\">Snow</p>\n      </div>\n      <div class=\"envBtnWrapper\" (click)=\"toggleBtn('lightning')\" [ngSwitch]=\"environmentSnapshot.lightning\">\n        <div *ngSwitchCase='true' class=\"envBtn active\">\n          <img src=\"./images/env_btn/env_lightning_on.png\"></div>\n        <div *ngSwitchCase='false' class=\"envBtn\">\n          <img src=\"./images/env_btn/env_lightning.png\"></div>\n        <p class=\"imgDescription\">Lightning</p>\n      </div>\n      <div class=\"envBtnWrapper\" (click)=\"toggleBtn('rain')\" [ngSwitch]=\"environmentSnapshot.rain\">\n        <div *ngSwitchCase='true' class=\"envBtn active\">\n          <img src=\"./images/env_btn/env_rain_on.png\"></div>\n        <div *ngSwitchCase='false' class=\"envBtn\">\n          <img src=\"./images/env_btn/env_rain.png\"></div>\n        <p class=\"imgDescription\">Rain</p>\n      </div>\n      <div class=\"envBtnWrapper\" (click)=\"toggleBtn('quake')\" [ngSwitch]=\"environmentSnapshot.quake\">\n        <div *ngSwitchCase='true' class=\"envBtn active\">\n          <img src=\"./images/env_btn/env_sun_on.png\"></div>\n        <div *ngSwitchCase='false' class=\"envBtn\">\n          <img src=\"./images/env_btn/env_sun.png\"></div>\n        <p class=\"imgDescription\">Quake</p>\n      </div>\n      <div class=\"envBtnWrapper\" (click)=\"toggleBtn('storm')\" [ngSwitch]=\"environmentSnapshot.storm\">\n        <div *ngSwitchCase='true' class=\"envBtn active\">\n          <img src=\"./images/env_btn/env_wind_on.png\"></div>\n        <div *ngSwitchCase='false' class=\"envBtn\">\n          <img src=\"./images/env_btn/env_wind.png\"></div>\n        <p class=\"imgDescription\">Storm</p>\n      </div>\n    </div>\n  </div>\n  ",
            styles: ["\n    @media (max-width: 736px) {\n      .envBtns {\n        display: none;\n      }\n    }\n    .envBtnWrapper {\n      display: inline-block;\n      background: transparent;\n      margin-left: 15px;\n    }\n    .envBtn {\n      background-color: #29b0ae;\n      border: none;\n      width: 64px;\n      height: 64px;\n      padding: 10px;\n      position: relative;\n      text-align: center;\n      vertical-align: middle;\n      text-decoration: uppercase;\n      color: #fff;\n      background-image: linear-gradient(bottom, rgb(41,144,176) 0%, rgb(113,222,220) 100%);\n      background-image: -o-linear-gradient(bottom, rgb(41,144,176) 0%, rgb(113,222,220) 100%);\n      background-image: -moz-linear-gradient(bottom, rgb(41,144,176) 0%, rgb(113,222,220) 100%);\n      background-image: -webkit-linear-gradient(bottom, rgb(41,144,176) 0%, rgb(113,222,220) 100%);\n      background-image: -ms-linear-gradient(bottom, rgb(41,144,176) 0%, rgb(113,222,220) 100%);\n      background-image: -webkit-gradient(\n      linear,\n      left bottom,\n      left top,\n      color-stop(0, rgb(41,144,176)),\n      color-stop(1, rgb(113,222,220))\n      );\n      -webkit-box-shadow: inset 0px 1px 0px #71dedc, 0px 6px 0px #164f60;\n      -moz-box-shadow: inset 0px 1px 0px #71dedc, 0px 6px 0px #164f60;\n      -o-box-shadow: inset 0px 1px 0px #71dedc, 0px 6px 0px #164f60;\n      box-shadow: inset 0px 1px 0px #71dedc, 0px 6px 0px #164f60;\n      -webkit-border-radius: 5px;\n      -moz-border-radius: 5px;\n      -o-border-radius: 5px;\n      border-radius: 5px;\n    }\n    .envBtn.active, .envBtn:active {\n      color: #2990b0;\n      text-shadow: 0px 1px 1px rgba(255,255,255,0.3);\n      background: rgb(41,144,176);\n      -webkit-box-shadow: inset 0px 1px 0px #71dedc, inset 0px -1px 0px #164f60;\n      -moz-box-shadow: inset 0px 1px 0px #71dedc, inset 0px -1px 0px #164f60;\n      -o-box-shadow: inset 0px 1px 0px #71dedc, inset 0px -1px 0px #164f60;\n      box-shadow: inset 0px 1px 0px #71dedc, inset 0px -1px 0px #164f60;\n      top: 2px;\n    }\n    .envBtn img {\n      width: 100%;\n      height: 100%;\n    }\n    .envBtnWrapper .imgDescription {\n      position: absolute;\n      background: transparent;\n      padding-top: 2px;\n      color: #fff;\n      text-transform: uppercase;\n      visibility: hidden;\n      opacity: 0;\n      -webkit-transition: visibility opacity 0.2s;\n      transition: visibility opacity 0.2s;\n    }\n    .envBtnWrapper:hover .imgDescription {\n      visibility: visible;\n      opacity: 1;\n    }\n  "],
            directives: [common_1.NgSwitch, common_1.NgSwitchCase, common_1.NgSwitchDefault]
        }), 
        __metadata('design:paramtypes', [angularfire2_1.AngularFire, core_1.Renderer])
    ], EnvironmentComponent);
    return EnvironmentComponent;
}());
exports.EnvironmentComponent = EnvironmentComponent;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVudmlyb25tZW50L2Vudmlyb25tZW50LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEscUJBQTRDLGVBQWUsQ0FBQyxDQUFBO0FBQzVELHVCQUFzRCxpQkFBaUIsQ0FBQyxDQUFBO0FBQ3hFLDZCQUFtRCxjQUFjLENBQUMsQ0FBQTtBQXFJbEU7SUFnQkUsOEJBQVksRUFBYyxFQUFFLFFBQWtCO1FBaEJoRCxpQkF5TkM7UUF4TUcsSUFBSSxDQUFDLEdBQUcsR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQztRQUNoQyxJQUFJLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEdBQUcsR0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBQyxnQkFBZ0IsRUFBQyxFQUFDLGdCQUFnQixFQUFDLElBQUksRUFBQyxDQUFDLENBQUM7UUFDMUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsVUFBQSxRQUFRO1lBQzNCLEtBQUksQ0FBQyxtQkFBbUIsR0FBRyxRQUFRLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDNUMsQ0FBQyxDQUFDLENBQUM7UUFDSCxJQUFJLENBQUMsV0FBVyxHQUFHLEVBQUUsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEdBQUcsR0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBQyxzQkFBc0IsQ0FBQyxDQUFDO1FBQzlGLElBQUksQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsR0FBRyxHQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFDLFVBQVUsRUFBQyxFQUFDLGdCQUFnQixFQUFDLElBQUksRUFBQyxDQUFDLENBQUM7UUFD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QyxjQUFjLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLEdBQUcsUUFBUSxHQUFHLEtBQUssQ0FBQyxDQUFDO1lBQ2hGLElBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQztRQUNqRSxDQUFDO1FBQ0QsRUFBRSxDQUFBLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsV0FBVyxJQUFJLFNBQVMsQ0FBQyxDQUFBLENBQUM7WUFDeEQsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLEdBQUcsUUFBUSxDQUFDLEdBQUMsQ0FBQyxDQUFDLENBQUM7WUFDL0UsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxRQUFRLENBQUMsR0FBRyxLQUFLLENBQUMsR0FBRyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2xHLElBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxHQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQy9FLElBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFDLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxLQUFLLEdBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNqRyxDQUFDO1FBQ0QsRUFBRSxDQUFBLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsV0FBVyxJQUFJLFlBQVksQ0FBQyxDQUFBLENBQUM7WUFDM0QsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMs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LENBQUMsR0FBRyxJQUFJLElBQUksSUFBSSxHQUFHLElBQUksV0FBVyxDQUFDLENBQUMsQ0FBQztZQUN0QyxJQUFJLENBQUMsaUJBQWlCLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDdEMsQ0FBQztRQUVELEVBQUUsQ0FBQyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksR0FBRyxJQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDakMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ2pDLENBQUM7UUFFRCxFQUFFLENBQUMsQ0FBQyxHQUFHLElBQUksSUFBSSxJQUFJLEdBQUcsSUFBSSxPQUFPLENBQUMsQ0FBQyxDQUFDO1lBQ2xDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNsQyxDQUFDO1FBRUQsRUFBRSxDQUFDLENBQUMsR0FBRyxJQUFJLElBQUksSUFBSSxHQUFHLElBQUksT0FBTyxDQUFDLENBQUMsQ0FBQztZQUNsQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDbEMsQ0FBQztJQUNILENBQUM7SUEzVkg7UUFBQyxnQkFBUyxDQUFDO1lBQ1QsUUFBUSxFQUFFLGFBQWE7WUFDdkIsUUFBUSxFQUFFLHV2RkFvRFQ7WUFDRCxNQUFNLEVBQUUsQ0FBQyxvL0VBd0VSLENBQUM7WUFDRixVQUFVLEVBQUUsQ0FBQyxpQkFBUSxFQUFFLHFCQUFZLEVBQUUsd0JBQWUsQ0FBQztTQUN0RCxDQUFDOzs0QkFBQTtJQTJORiwyQkFBQztBQUFELENBek5BLEFBeU5DLElBQUE7QUF6TlksNEJBQW9CLHVCQXlOaEMsQ0FBQSIsImZpbGUiOiJlbnZpcm9ubWVudC9lbnZpcm9ubWVudC5jb21wb25lbnQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0NvbXBvbmVudCxSZW5kZXJlcixFbGVtZW50UmVmfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7TmdTd2l0Y2gsIE5nU3dpdGNoQ2FzZSwgTmdTd2l0Y2hEZWZhdWx0fSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHtBbmd1bGFyRmlyZSxGaXJlYmFzZU9iamVjdE9ic2VydmFibGV9IGZyb20gJ2FuZ3VsYXJmaXJlMic7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2Vudmlyb25tZW50JyxcbiAgdGVtcGxhdGU6IGBcbiAgPGRpdiAqbmdJZj1cImVudmlyb25tZW50U25hcHNob3RcIiBjbGFzcz1cImNvbnRhaW5lclwiPlxuICAgIDxkaXYgY2xhc3M9XCJjb2wtc20tNiBwdWxsLWxlZnRcIj5cbiAgICAgIDxwPlxuICAgICAgICBUbyBwbGF5LCBwcmVzcyBrZXkgdG8gdHVybiBvbi9vZmY6PGJyPlxuICAgICAgICBbQV0gRk9HOyBbU10gU05PVzsgW0RdIExJR0hUTklORzsgW0ZdIFJBSU47IFtHXSBRVUFLRTsgW0hdIFNUT1JNPC9wPlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJjb2wtc20tNiBwdWxsLXJpZ2h0IGVudkJ0bnNcIiAqbmdJZj1cImVudmlyb25tZW50XCI+XG4gICAgICA8ZGl2IGNsYXNzPVwiZW52QnRuV3JhcHBlclwiIChjbGljayk9XCJ0b2dnbGVCdG4oJ2ZvZycpXCIgW25nU3dpdGNoXT1cImVudmlyb25tZW50U25hcHNob3QuZm9nXCI+XG4gICAgICAgIDxkaXYgKm5nU3dpdGNoQ2FzZT0ndHJ1ZScgY2xhc3M9XCJlbnZCdG4gYWN0aXZlXCI+XG4gICAgICAgICAgPGltZyBzcmM9XCIuL2ltYWdlcy9lbnZfYnRuL2Vudl9mb2dfb24ucG5nXCI+PC9kaXY+XG4gICAgICAgIDxkaXYgKm5nU3dpdGNoQ2FzZT0nZmFsc2UnIGNsYXNzPVwiZW52QnRuXCI+XG4gICAgICAgICAgPGltZyBzcmM9XCIuL2ltYWdlcy9lbnZfYnRuL2Vudl9mb2cucG5nXCI+PC9kaXY+XG4gICAgICAgIDxwIGNsYXNzPVwiaW1nRGVzY3JpcHRpb25cIj5Gb2c8L3A+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJlbnZCdG5XcmFwcGVyXCIgKGNsaWNrKT1cInRvZ2dsZUJ0bignc25vdycpXCIgW25nU3dpdGNoXT1cImVudmlyb25tZW50U25hcHNob3Quc25vd1wiPlxuICAgICAgICA8ZGl2ICpuZ1N3aXRjaENhc2U9J3RydWUnIGNsYXNzPVwiZW52QnRuIGFjdGl2ZVwiPlxuICAgICAgICAgIDxpbWcgc3JjPVwiLi9pbWFnZXMvZW52X2J0bi9lbnZfaGFpbF9vbi5wbmdcIj48L2Rpdj5cbiAgICAgICAgPGRpdiAqbmdTd2l0Y2hDYXNlPSdmYWxzZScgY2xhc3M9XCJlbnZCdG5cIj5cbiAgICAgICAgICA8aW1nIHNyYz1cIi4vaW1hZ2VzL2Vudl9idG4vZW52X2hhaWwucG5nXCI+PC9kaXY+XG4gICAgICAgIDxwIGNsYXNzPVwiaW1nRGVzY3JpcHRpb25cIj5Tbm93PC9wPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiZW52QnRuV3JhcHBlclwiIChjbGljayk9XCJ0b2dnbGVCdG4oJ2xpZ2h0bmluZycpXCIgW25nU3dpdGNoXT1cImVudmlyb25tZW50U25hcHNob3QubGlnaHRuaW5nXCI+XG4gICAgICAgIDxkaXYgKm5nU3dpdGNoQ2FzZT0ndHJ1ZScgY2xhc3M9XCJlbnZCdG4gYWN0aXZlXCI+XG4gICAgICAgICAgPGltZyBzcmM9XCIuL2ltYWdlcy9lbnZfYnRuL2Vudl9saWdodG5pbmdfb24ucG5nXCI+PC9kaXY+XG4gICAgICAgIDxkaXYgKm5nU3dpdGNoQ2FzZT0nZmFsc2UnIGNsYXNzPVwiZW52QnRuXCI+XG4gICAgICAgICAgPGltZyBzcmM9XCIuL2ltYWdlcy9lbnZfYnRuL2Vudl9saWdodG5pbmcucG5nXCI+PC9kaXY+XG4gICAgICAgIDxwIGNsYXNzPVwiaW1nRGVzY3JpcHRpb25cIj5MaWdodG5pbmc8L3A+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJlbnZCdG5XcmFwcGVyXCIgKGNsaWNrKT1cInRvZ2dsZUJ0bigncmFpbicpXCIgW25nU3dpdGNoXT1cImVudmlyb25tZW50U25hcHNob3QucmFpblwiPlxuICAgICAgICA8ZGl2ICpuZ1N3aXRjaENhc2U9J3RydWUnIGNsYXNzPVwiZW52QnRuIGFjdGl2ZVwiPlxuICAgICAgICAgIDxpbWcgc3JjPVwiLi9pbWFnZXMvZW52X2J0bi9lbnZfcmFpbl9vbi5wbmdcIj48L2Rpdj5cbiAgICAgICAgPGRpdiAqbmdTd2l0Y2hDYXNlPSdmYWxzZScgY2xhc3M9XCJlbnZCdG5cIj5cbiAgICAgICAgICA8aW1nIHNyYz1cIi4vaW1hZ2VzL2Vudl9idG4vZW52X3JhaW4ucG5nXCI+PC9kaXY+XG4gICAgICAgIDxwIGNsYXNzPVwiaW1nRGVzY3JpcHRpb25cIj5SYWluPC9wPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiZW52QnRuV3JhcHBlclwiIChjbGljayk9XCJ0b2dnbGVCdG4oJ3F1YWtlJylcIiBbbmdTd2l0Y2hdPVwiZW52aXJvbm1lbnRTbmFwc2hvdC5xdWFrZVwiPlxuICAgICAgICA8ZGl2ICpuZ1N3aXRjaENhc2U9J3RydWUnIGNsYXNzPVwiZW52QnRuIGFjdGl2ZVwiPlxuICAgICAgICAgIDxpbWcgc3JjPVwiLi9pbWFnZXMvZW52X2J0bi9lbnZfc3VuX29uLnBuZ1wiPjwvZGl2PlxuICAgICAgICA8ZGl2ICpuZ1N3aXRjaENhc2U9J2ZhbHNlJyBjbGFzcz1cImVudkJ0blwiPlxuICAgICAgICAgIDxpbWcgc3JjPVwiLi9pbWFnZXMvZW52X2J0bi9lbnZfc3VuLnBuZ1wiPjwvZGl2PlxuICAgICAgICA8cCBjbGFzcz1cImltZ0Rlc2NyaXB0aW9uXCI+UXVha2U8L3A+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJlbnZCdG5XcmFwcGVyXCIgKGNsaWNrKT1cInRvZ2dsZUJ0bignc3Rvcm0nKVwiIFtuZ1N3aXRjaF09XCJlbnZpcm9ubWVudFNuYXBzaG90LnN0b3JtXCI+XG4gICAgICAgIDxkaXYgKm5nU3dpdGNoQ2FzZT0ndHJ1ZScgY2xhc3M9XCJlbnZCdG4gYWN0aXZlXCI+XG4gICAgICAgICAgPGltZyBzcmM9XCIuL2ltYWdlcy9lbnZfYnRuL2Vudl93aW5kX29uLnBuZ1wiPjwvZGl2PlxuICAgICAgICA8ZGl2ICpuZ1N3aXRjaENhc2U9J2ZhbHNlJyBjbGFzcz1cImVudkJ0blwiPlxuICAgICAgICAgIDxpbWcgc3JjPVwiLi9pbWFnZXMvZW52X2J0bi9lbnZfd2luZC5wbmdcIj48L2Rpdj5cbiAgICAgICAgPHAgY2xhc3M9XCJpbWdEZXNjcmlwdGlvblwiPlN0b3JtPC9wPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuICBgLFxuICBzdHlsZXM6IFtgXG4gICAgQG1lZGlhIChtYXgtd2lkdGg6IDczNnB4KSB7XG4gICAgICAuZW52QnRucyB7XG4gICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICB9XG4gICAgfVxuICAgIC5lbnZCdG5XcmFwcGVyIHtcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICAgICAgbWFyZ2luLWxlZnQ6IDE1cHg7XG4gICAgfVxuICAgIC5lbnZCdG4ge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzI5YjBhZTtcbiAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgIHdpZHRoOiA2NHB4O1xuICAgICAgaGVpZ2h0OiA2NHB4O1xuICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XG4gICAgICB0ZXh0LWRlY29yYXRpb246IHVwcGVyY2FzZTtcbiAgICAgIGNvbG9yOiAjZmZmO1xuICAgICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KGJvdHRvbSwgcmdiKDQxLDE0NCwxNzYpIDAlLCByZ2IoMTEzLDIyMiwyMjApIDEwMCUpO1xuICAgICAgYmFja2dyb3VuZC1pbWFnZTogLW8tbGluZWFyLWdyYWRpZW50KGJvdHRvbSwgcmdiKDQxLDE0NCwxNzYpIDAlLCByZ2IoMTEzLDIyMiwyMjApIDEwMCUpO1xuICAgICAgYmFja2dyb3VuZC1pbWFnZTogLW1vei1saW5lYXItZ3JhZGllbnQoYm90dG9tLCByZ2IoNDEsMTQ0LDE3NikgMCUsIHJnYigxMTMsMjIyLDIyMCkgMTAwJSk7XG4gICAgICBiYWNrZ3JvdW5kLWltYWdlOiAtd2Via2l0LWxpbmVhci1ncmFkaWVudChib3R0b20sIHJnYig0MSwxNDQsMTc2KSAwJSwgcmdiKDExMywyMjIsMjIwKSAxMDAlKTtcbiAgICAgIGJhY2tncm91bmQtaW1hZ2U6IC1tcy1saW5lYXItZ3JhZGllbnQoYm90dG9tLCByZ2IoNDEsMTQ0LDE3NikgMCUsIHJnYigxMTMsMjIyLDIyMCkgMTAwJSk7XG4gICAgICBiYWNrZ3JvdW5kLWltYWdlOiAtd2Via2l0LWdyYWRpZW50KFxuICAgICAgbGluZWFyLFxuICAgICAgbGVmdCBib3R0b20sXG4gICAgICBsZWZ0IHRvcCxcbiAgICAgIGNvbG9yLXN0b3AoMCwgcmdiKDQxLDE0NCwxNzYpKSxcbiAgICAgIGNvbG9yLXN0b3AoMSwgcmdiKDExMywyMjIsMjIwKSlcbiAgICAgICk7XG4gICAgICAtd2Via2l0LWJveC1zaGFkb3c6IGluc2V0IDBweCAxcHggMHB4ICM3MWRlZGMsIDBweCA2cHggMHB4ICMxNjRmNjA7XG4gICAgICAtbW96LWJveC1zaGFkb3c6IGluc2V0IDBweCAxcHggMHB4ICM3MWRlZGMsIDBweCA2cHggMHB4ICMxNjRmNjA7XG4gICAgICAtby1ib3gtc2hhZG93OiBpbnNldCAwcHggMXB4IDBweCAjNzFkZWRjLCAwcHggNnB4IDBweCAjMTY0ZjYwO1xuICAgICAgYm94LXNoYWRvdzogaW5zZXQgMHB4IDFweCAwcHggIzcxZGVkYywgMHB4IDZweCAwcHggIzE2NGY2MDtcbiAgICAgIC13ZWJraXQtYm9yZGVyLXJhZGl1czogNXB4O1xuICAgICAgLW1vei1ib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgICAtby1ib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgfVxuICAgIC5lbnZCdG4uYWN0aXZlLCAuZW52QnRuOmFjdGl2ZSB7XG4gICAgICBjb2xvcjogIzI5OTBiMDtcbiAgICAgIHRleHQtc2hhZG93OiAwcHggMXB4IDFweCByZ2JhKDI1NSwyNTUsMjU1LDAuMyk7XG4gICAgICBiYWNrZ3JvdW5kOiByZ2IoNDEsMTQ0LDE3Nik7XG4gICAgICAtd2Via2l0LWJveC1zaGFkb3c6IGluc2V0IDBweCAxcHggMHB4ICM3MWRlZGMsIGluc2V0IDBweCAtMXB4IDBweCAjMTY0ZjYwO1xuICAgICAgLW1vei1ib3gtc2hhZG93OiBpbnNldCAwcHggMXB4IDBweCAjNzFkZWRjLCBpbnNldCAwcHggLTFweCAwcHggIzE2NGY2MDtcbiAgICAgIC1vLWJveC1zaGFkb3c6IGluc2V0IDBweCAxcHggMHB4ICM3MWRlZGMsIGluc2V0IDBweCAtMXB4IDBweCAjMTY0ZjYwO1xuICAgICAgYm94LXNoYWRvdzogaW5zZXQgMHB4IDFweCAwcHggIzcxZGVkYywgaW5zZXQgMHB4IC0xcHggMHB4ICMxNjRmNjA7XG4gICAgICB0b3A6IDJweDtcbiAgICB9XG4gICAgLmVudkJ0biBpbWcge1xuICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgfVxuICAgIC5lbnZCdG5XcmFwcGVyIC5pbWdEZXNjcmlwdGlvbiB7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgICAgIHBhZGRpbmctdG9wOiAycHg7XG4gICAgICBjb2xvcjogI2ZmZjtcbiAgICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XG4gICAgICB2aXNpYmlsaXR5OiBoaWRkZW47XG4gICAgICBvcGFjaXR5OiAwO1xuICAgICAgLXdlYmtpdC10cmFuc2l0aW9uOiB2aXNpYmlsaXR5IG9wYWNpdHkgMC4ycztcbiAgICAgIHRyYW5zaXRpb246IHZpc2liaWxpdHkgb3BhY2l0eSAwLjJzO1xuICAgIH1cbiAgICAuZW52QnRuV3JhcHBlcjpob3ZlciAuaW1nRGVzY3JpcHRpb24ge1xuICAgICAgdmlzaWJpbGl0eTogdmlzaWJsZTtcbiAgICAgIG9wYWNpdHk6IDE7XG4gICAgfVxuICBgXSxcbiAgZGlyZWN0aXZlczogW05nU3dpdGNoLCBOZ1N3aXRjaENhc2UsIE5nU3dpdGNoRGVmYXVsdF1cbn0pXG5cbmV4cG9ydCBjbGFzcyBFbnZpcm9ubWVudENvbXBvbmVudCB7XG4gIG9uT2ZmOkZpcmViYXNlT2JqZWN0T2JzZXJ2YWJsZTxhbnk+O1xuICBlbnZpcm9ubWVudDpGaXJlYmFzZU9iamVjdE9ic2VydmFibGU8YW55PjtcbiAgcGxheWVyczpGaXJlYmFzZU9iamVjdE9ic2VydmFibGU8YW55PjtcbiAgVVJMOnN0cmluZztcbiAgZW52aXJvbm1lbnRTbmFwc2hvdDoge1xuICAgIGZvZzpib29sZWFuLFxuICAgIHNub3c6Ym9vbGVhbixcbiAgICBsaWdodG5pbmc6Ym9vbGVhbixcbiAgICByYWluOmJvb2xlYW4sXG4gICAgcXVha2U6Ym9vbGVhbixcbiAgICBzdG9ybTpib29sZWFuXG4gIH07XG4gIHBsYXllcnNTbmFwc2hvdDogYW55O1xuICBnZXRLZXk6RnVuY3Rpb247XG5cbiAgY29uc3RydWN0b3IoYWY6QW5ndWxhckZpcmUsIHJlbmRlcmVyOiBSZW5kZXJlcil7XG4gICAgdGhpcy5VUkwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcbiAgICB0aGlzLm9uT2ZmID0gYWYuZGF0YWJhc2Uub2JqZWN0KCcvJyt0aGlzLlVSTC5zcGxpdCgnL2dhbWUvJylbMV0rJy9HbG9iYWxzL09uT2ZmJyx7cHJlc2VydmVTbmFwc2hvdDp0cnVlfSk7XG4gICAgdGhpcy5vbk9mZi5zdWJzY3JpYmUoc25hcHNob3QgPT57XG4gICAgICB0aGlzLmVudmlyb25tZW50U25hcHNob3QgPSBzbmFwc2hvdC52YWwoKTtcbiAgICB9KTtcbiAgICB0aGlzLmVudmlyb25tZW50ID0gYWYuZGF0YWJhc2Uub2JqZWN0KCcvJyt0aGlzLlVSTC5zcGxpdCgnL2dhbWUvJylbMV0rJy9HbG9iYWxzL0Vudmlyb25tZW50Jyk7XG4gICAgdGhpcy5wbGF5ZXJzID0gYWYuZGF0YWJhc2Uub2JqZWN0KCcvJyt0aGlzLlVSTC5zcGxpdCgnL2dhbWUvJylbMV0rJy9QbGF5ZXJzJyx7cHJlc2VydmVTbmFwc2hvdDp0cnVlfSk7XG4gICAgdGhpcy5wbGF5ZXJzLnN1YnNjcmliZShzbmFwc2hvdCA9PntcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90ID0gc25hcHNob3QudmFsKCk7XG4gICAgfSk7XG4gICAgLyogR2V0cyBrZXl1cCAqL1xuICAgIHRoaXMuZ2V0S2V5ID0gcmVuZGVyZXIubGlzdGVuR2xvYmFsKCdkb2N1bWVudCcsICdrZXl1cCcsIChldmVudCkgPT4ge1xuICAgICAgdmFyIGtleSA9IGV2ZW50LmtleUNvZGU7XG4gICAgICB0aGlzLnRvZ2dsZUJ0bihrZXkpO1xuICAgIH0pO1xuICB9XG5cbiAgY2hhbmdlRW52aXJvbm1lbnQoeCl7XG4gICAgdmFyIGFldGhlciA9IDE7XG4gICAgdmFyIG1hdGVyaWFsID0gMTtcbiAgICB2YXIgY2hhb3MgPSAxO1xuICAgIHZhciBvcmRlciA9IDE7XG4gICAgc3dpdGNoKHgpe1xuICAgICAgY2FzZSAncmFpbic6XG4gICAgICAgIGlmKHRoaXMuZW52aXJvbm1lbnRTbmFwc2hvdC5yYWluPT10cnVlKXtcbiAgICAgICAgICB0aGlzLm9uT2ZmLnVwZGF0ZSh7cmFpbjpmYWxzZX0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMub25PZmYudXBkYXRlKHtyYWluOnRydWV9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgY2FzZSAnZm9nJzpcbiAgICAgICAgICBpZih0aGlzLmVudmlyb25tZW50U25hcHNob3QuZm9nPT10cnVlKXtcbiAgICAgICAgICAgIHRoaXMub25PZmYudXBkYXRlKHtmb2c6ZmFsc2V9KVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMub25PZmYudXBkYXRlKHtmb2c6dHJ1ZX0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgY2FzZSAnbGlnaHRuaW5nJzpcbiAgICAgICAgaWYodGhpcy5lbnZpcm9ubWVudFNuYXBzaG90LmxpZ2h0bmluZz09dHJ1ZSl7XG4gICAgICAgICAgdGhpcy5vbk9mZi51cGRhdGUoe2xpZ2h0bmluZzpmYWxzZX0pXG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5vbk9mZi51cGRhdGUoe2xpZ2h0bmluZzp0cnVlfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIGNhc2UgJ3F1YWtlJzpcbiAgICAgICAgaWYodGhpcy5lbnZpcm9ubWVudFNuYXBzaG90LnF1YWtlPT10cnVlKXtcbiAgICAgICAgICB0aGlzLm9uT2ZmLnVwZGF0ZSh7cXVha2U6ZmFsc2V9KVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMub25PZmYudXBkYXRlKHtxdWFrZTp0cnVlfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIGNhc2UgJ3Nub3cnOlxuICAgICAgICBpZih0aGlzLmVudmlyb25tZW50U25hcHNob3Quc25vdz09dHJ1ZSl7XG4gICAgICAgICAgdGhpcy5vbk9mZi51cGRhdGUoe3Nub3c6ZmFsc2V9KVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMub25PZmYudXBkYXRlKHtzbm93OnRydWV9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgY2FzZSAnc3Rvcm0nOlxuICAgICAgICBpZih0aGlzLmVudmlyb25tZW50U25hcHNob3Quc3Rvcm09PXRydWUpe1xuICAgICAgICAgIHRoaXMub25PZmYudXBkYXRlKHtzdG9ybTpmYWxzZX0pXG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5vbk9mZi51cGRhdGUoe3N0b3JtOnRydWV9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5lbnZpcm9ubWVudFNuYXBzaG90LnJhaW4gPT0gdHJ1ZSkge1xuICAgICAgICBjaGFvcyArPSAxO1xuICAgICAgICBtYXRlcmlhbCArPSAyO1xuICAgIH1cbiAgICBpZiAodGhpcy5lbnZpcm9ubWVudFNuYXBzaG90LmZvZyA9PSB0cnVlKSB7XG4gICAgICAgIGFldGhlciArPSAyO1xuICAgICAgICBvcmRlciArPSAxO1xuICAgIH1cbiAgICBpZiAodGhpcy5lbnZpcm9ubWVudFNuYXBzaG90LmxpZ2h0bmluZyA9PSB0cnVlKSB7XG4gICAgICAgIGFldGhlciArPSAxO1xuICAgICAgICBjaGFvcyArPSAyO1xuICAgIH1cbiAgICBpZiAodGhpcy5lbnZpcm9ubWVudFNuYXBzaG90LnF1YWtlID09IHRydWUpIHtcbiAgICAgICAgb3JkZXIgKz0gMjtcbiAgICAgICAgbWF0ZXJpYWwgKz0gMTtcbiAgICB9XG4gICAgaWYgKHRoaXMuZW52aXJvbm1lbnRTbmFwc2hvdC5zbm93ID09IHRydWUpIHtcbiAgICAgICAgYWV0aGVyICs9IDI7XG4gICAgICAgIG1hdGVyaWFsICs9IDI7XG4gICAgfVxuICAgIGlmICh0aGlzLmVudmlyb25tZW50U25hcHNob3Quc3Rvcm0gPT0gdHJ1ZSkge1xuICAgICAgICBvcmRlciArPSAyO1xuICAgICAgICBjaGFvcyArPSAyO1xuICAgIH1cbiAgdGhpcy5lbnZpcm9ubWVudC5zZXQoe2FldGhlcjphZXRoZXIsbWF0ZXJpYWw6bWF0ZXJpYWwsY2hhb3M6Y2hhb3Msb3JkZXI6b3JkZXJ9KTtcbiAgdGhpcy5jaGFuZ2VDaGFtcGlvblN0YXRzKGFldGhlcixtYXRlcmlhbCxjaGFvcyxvcmRlcik7XG4gIH1cblxuICBjaGFuZ2VDaGFtcGlvblN0YXRzKGFldGhlcixtYXRlcmlhbCxjaGFvcyxvcmRlcil7XG4gICAgaWYodGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMS5wbGF5ZXJDbGFzcyA9PSAnSGlnaHdheW1hbicpe1xuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMS5waHlzaWNhbEF0dGFjayA9IE1hdGguZmxvb3IoKGNoYW9zICogbWF0ZXJpYWwpICsgMTApO1xuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMS5waHlzaWNhbERlZmVuc2UgPSBNYXRoLmZsb29yKDUgKyBtYXRlcmlhbCk7XG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIxLnNwZWNpYWxBdHRhY2sgPSBNYXRoLmZsb29yKDIgKyAoMiAqIG9yZGVyKSk7XG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIxLnNwZWNpYWxEZWZlbnNlID0gTWF0aC5mbG9vcigzICsgY2hhb3MgKyBhZXRoZXIpO1xuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMS5kZXh0ZXJpdHkgPSBNYXRoLmZsb29yKCgoMTAgKiBhZXRoZXIpICsgb3JkZXIpIC8gbWF0ZXJpYWwpO1xuICAgIH1cbiAgICBpZih0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIxLnBsYXllckNsYXNzID09ICdFbGVtZW50YWxpc3QnKXtcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjEucGh5c2ljYWxBdHRhY2sgPSBNYXRoLmZsb29yKDQgKyBhZXRoZXIgKyBtYXRlcmlhbCk7XG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIxLnBoeXNpY2FsRGVmZW5zZSA9IE1hdGguZmxvb3IoMyArIG9yZGVyKTtcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjEuc3BlY2lhbEF0dGFjayA9IE1hdGguZmxvb3IoKCgxMiArIGFldGhlcikgKiBjaGFvcykgLyBvcmRlcik7XG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIxLnNwZWNpYWxEZWZlbnNlID0gTWF0aC5mbG9vcigxMCArIG1hdGVyaWFsICsgb3JkZXIpO1xuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMS5kZXh0ZXJpdHkgPSBNYXRoLmZsb29yKDMgKiBjaGFvcyk7XG4gICAgfVxuICAgIGlmKHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjEucGxheWVyQ2xhc3MgPT0gXCJQYXJhZ29uXCIpe1xuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMS5waHlzaWNhbEF0dGFjayA9IE1hdGguZmxvb3IoKG9yZGVyICsgbWF0ZXJpYWwpKjIpO1xuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMS5waHlzaWNhbERlZmVuc2UgPSBNYXRoLmZsb29yKCgoOCAqIG1hdGVyaWFsKSArIG9yZGVyKSAvIChjaGFvcyAqIDIpKTtcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjEuc3BlY2lhbEF0dGFjayA9IE1hdGguZmxvb3IoKGFldGhlciAqIDYpL21hdGVyaWFsKTtcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjEuc3BlY2lhbERlZmVuc2UgPSBNYXRoLmZsb29yKCgoNyAqIG1hdGVyaWFsKSArIGNoYW9zKSAvIChvcmRlcioyKSk7XG4gICAgfVxuICAgIGlmKHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjIucGxheWVyQ2xhc3MgPT0gJ0hpZ2h3YXltYW4nKXtcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjIucGh5c2ljYWxBdHRhY2sgPSBNYXRoLmZsb29yKChjaGFvcyAqIG1hdGVyaWFsKSArIDEwKTtcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjIucGh5c2ljYWxEZWZlbnNlID0gTWF0aC5mbG9vcig1ICsgbWF0ZXJpYWwpO1xuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMi5zcGVjaWFsQXR0YWNrID0gTWF0aC5mbG9vcigyICsgKDIgKiBvcmRlcikpO1xuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMi5zcGVjaWFsRGVmZW5zZSA9IE1hdGguZmxvb3IoMyArIGNoYW9zICsgYWV0aGVyKTtcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjIuZGV4dGVyaXR5ID0gTWF0aC5mbG9vcigoKDEwICogYWV0aGVyKSArIG9yZGVyKSAvIG1hdGVyaWFsKTtcbiAgICB9XG4gICAgaWYodGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMi5wbGF5ZXJDbGFzcyA9PSAnRWxlbWVudGFsaXN0Jyl7XG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIyLnBoeXNpY2FsQXR0YWNrID0gTWF0aC5mbG9vcig0ICsgYWV0aGVyICsgbWF0ZXJpYWwpO1xuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMi5waHlzaWNhbERlZmVuc2UgPSBNYXRoLmZsb29yKDMgKyBvcmRlcik7XG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIyLnNwZWNpYWxBdHRhY2sgPSBNYXRoLmZsb29yKCgoMTIgKyBhZXRoZXIpICogY2hhb3MpIC8gb3JkZXIpO1xuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMi5zcGVjaWFsRGVmZW5zZSA9IE1hdGguZmxvb3IoMTAgKyBtYXRlcmlhbCArIG9yZGVyKTtcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjIuZGV4dGVyaXR5ID0gTWF0aC5mbG9vcigzICogY2hhb3MpO1xuICAgIH1cbiAgICBpZih0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIyLnBsYXllckNsYXNzID09IFwiUGFyYWdvblwiKXtcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjIucGh5c2ljYWxBdHRhY2sgPSBNYXRoLmZsb29yKChvcmRlciArIG1hdGVyaWFsKSoyKTtcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjIucGh5c2ljYWxEZWZlbnNlID0gTWF0aC5mbG9vcigoKDggKiBtYXRlcmlhbCkgKyBvcmRlcikgLyAoY2hhb3MgKiAyKSk7XG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIyLnNwZWNpYWxBdHRhY2sgPSBNYXRoLmZsb29yKChhZXRoZXIgKiA2KS9tYXRlcmlhbCk7XG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIxLnNwZWNpYWxEZWZlbnNlID0gTWF0aC5mbG9vcigoKDcgKiBtYXRlcmlhbCkgKyBjaGFvcykgLyAob3JkZXIqMikpO1xuICAgIH1cbiAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIxLmFjdGlvbiA9IHRoaXMuQUlTZWxlY3RBY3Rpb24odGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMSx0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIyKTtcbiAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIyLmFjdGlvbiA9IHRoaXMuQUlTZWxlY3RBY3Rpb24odGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMix0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIxKTtcbiAgICB0aGlzLnBsYXllcnMudXBkYXRlKHRoaXMucGxheWVyc1NuYXBzaG90KTtcbiAgfVxuXG4gIEFJU2VsZWN0QWN0aW9uKHBsYXllcixlbmVteSl7XG4gICAgdmFyIGFjdGlvbiA9IFwiXCI7XG4gICAgdmFyIHJuZyA9IChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqKDEwMCAtIDAgKyAxKSArIDApKTtcbiAgICBpZiAoKHBsYXllci5waHlzaWNhbEF0dGFjayAtIGVuZW15LnBoeXNpY2FsRGVmZW5zZSkgPiAocGxheWVyLnNwZWNpYWxBdHRhY2sgLSBlbmVteS5zcGVjaWFsRGVmZW5zZSkpIHtcbiAgICAgICAgaWYgKHJuZyAtIChwbGF5ZXIucGh5c2ljYWxBdHRhY2sgLSBlbmVteS5waHlzaWNhbERlZmVuc2UpIDw9IDApIHtcbiAgICAgICAgICAgIHJuZyA9IDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBybmcgLT0gKHBsYXllci5waHlzaWNhbEF0dGFjayAtIGVuZW15LnBoeXNpY2FsRGVmZW5zZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKChwbGF5ZXIucGh5c2ljYWxBdHRhY2sgLSBlbmVteS5waHlzaWNhbERlZmVuc2UpIDwgKHBsYXllci5zcGVjaWFsQXR0YWNrIC0gZW5lbXkuc3BlY2lhbERlZmVuc2UpKSB7XG4gICAgICAgIGlmIChybmcgKyAocGxheWVyLnNwZWNpYWxBdHRhY2sgLSBlbmVteS5zcGVjaWFsRGVmZW5zZSkgPj0gMTAwKSB7XG4gICAgICAgICAgICBybmcgPSAxMDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBybmcgKz0gKHBsYXllci5zcGVjaWFsQXR0YWNrIC0gZW5lbXkuc3BlY2lhbERlZmVuc2UpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChybmcgPD0gMzMpIHtcbiAgICAgICAgcmV0dXJuIFwic3RyaWtlXCI7XG4gICAgfVxuICAgIGlmIChybmcgPj0gNjYpIHtcbiAgICAgICAgcmV0dXJuXCJzcGVjaWFsXCI7XG4gICAgfVxuICAgIGlmIChybmcgPCA2NiAmJiBybmcgPiAzMykge1xuICAgICAgICByZXR1cm4gXCJkZWZlbmRcIjtcbiAgICB9XG4gIH1cblxuICB0b2dnbGVCdG4oa2V5KSB7XG4gICAgLy8gYVxuICAgIGlmIChrZXkgPT0gJzY1JyB8fCBrZXkgPT0gJ2ZvZycpIHtcbiAgICAgIHRoaXMuY2hhbmdlRW52aXJvbm1lbnQoJ2ZvZycpO1xuICAgIH1cbiAgICAvLyBzXG4gICAgaWYgKGtleSA9PSAnODMnIHx8IGtleSA9PSAnc25vdycpIHtcbiAgICAgIHRoaXMuY2hhbmdlRW52aXJvbm1lbnQoJ3Nub3cnKTtcbiAgICB9XG4gICAgLy8gZFxuICAgIGlmIChrZXkgPT0gJzY4JyB8fCBrZXkgPT0gJ2xpZ2h0bmluZycpIHtcbiAgICAgIHRoaXMuY2hhbmdlRW52aXJvbm1lbnQoJ2xpZ2h0bmluZycpO1xuICAgIH1cbiAgICAvLyBmXG4gICAgaWYgKGtleSA9PSAnNzAnIHx8IGtleSA9PSAncmFpbicpIHtcbiAgICAgIHRoaXMuY2hhbmdlRW52aXJvbm1lbnQoJ3JhaW4nKTtcbiAgICB9XG4gICAgLy8gZ1xuICAgIGlmIChrZXkgPT0gJzcxJyB8fCBrZXkgPT0gJ3F1YWtlJykge1xuICAgICAgdGhpcy5jaGFuZ2VFbnZpcm9ubWVudCgncXVha2UnKTtcbiAgICB9XG4gICAgLy8gaFxuICAgIGlmIChrZXkgPT0gJzcyJyB8fCBrZXkgPT0gJ3N0b3JtJykge1xuICAgICAgdGhpcy5jaGFuZ2VFbnZpcm9ubWVudCgnc3Rvcm0nKTtcbiAgICB9XG4gIH1cbn0iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
