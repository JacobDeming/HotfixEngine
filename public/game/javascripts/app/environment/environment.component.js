"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var core_1 = require('@angular/core');
var common_1 = require('@angular/common');
var angularfire2_1 = require('angularfire2');
var EnvironmentComponent = (function () {
    function EnvironmentComponent(af, renderer) {
        var _this = this;
        this.URL = window.location.href;
        this.onOff = af.database.object('/' + this.URL.split('/game/')[1] + '/Globals/OnOff', { preserveSnapshot: true });
        this.onOff.subscribe(function (snapshot) {
            _this.environmentSnapshot = snapshot.val();
        });
        this.environment = af.database.object('/' + this.URL.split('/game/')[1] + '/Globals/Environment');
        this.players = af.database.object('/' + this.URL.split('/game/')[1] + '/Players', { preserveSnapshot: true });
        this.players.subscribe(function (snapshot) {
            _this.playersSnapshot = snapshot.val();
        });
        this.getKey = renderer.listenGlobal('document', 'keyup', function (event) {
            var key = event.keyCode;
            _this.toggleBtn(key);
        });
    }
    EnvironmentComponent.prototype.changeEnvironment = function (x) {
        var aether = 1;
        var material = 1;
        var chaos = 1;
        var order = 1;
        switch (x) {
            case 'rain':
                if (this.environmentSnapshot.rain == true) {
                    this.onOff.update({ rain: false });
                    break;
                }
                else {
                    this.onOff.update({ rain: true });
                    break;
                }
            case 'fog':
                if (this.environmentSnapshot.fog == true) {
                    this.onOff.update({ fog: false });
                    break;
                }
                else {
                    this.onOff.update({ fog: true });
                    break;
                }
            case 'lightning':
                if (this.environmentSnapshot.lightning == true) {
                    this.onOff.update({ lightning: false });
                    break;
                }
                else {
                    this.onOff.update({ lightning: true });
                    break;
                }
            case 'quake':
                if (this.environmentSnapshot.quake == true) {
                    this.onOff.update({ quake: false });
                    break;
                }
                else {
                    this.onOff.update({ quake: true });
                    break;
                }
            case 'snow':
                if (this.environmentSnapshot.snow == true) {
                    this.onOff.update({ snow: false });
                    break;
                }
                else {
                    this.onOff.update({ snow: true });
                    break;
                }
            case 'storm':
                if (this.environmentSnapshot.storm == true) {
                    this.onOff.update({ storm: false });
                    break;
                }
                else {
                    this.onOff.update({ storm: true });
                    break;
                }
        }
        if (this.environmentSnapshot.rain == true) {
            chaos += 1;
            material += 2;
        }
        if (this.environmentSnapshot.fog == true) {
            aether += 2;
            order += 1;
        }
        if (this.environmentSnapshot.lightning == true) {
            aether += 1;
            chaos += 2;
        }
        if (this.environmentSnapshot.quake == true) {
            order += 2;
            material += 1;
        }
        if (this.environmentSnapshot.snow == true) {
            aether += 2;
            material += 2;
        }
        if (this.environmentSnapshot.storm == true) {
            order += 2;
            chaos += 2;
        }
        this.environment.set({ aether: aether, material: material, chaos: chaos, order: order });
        this.changeChampionStats(aether, material, chaos, order);
    };
    EnvironmentComponent.prototype.changeChampionStats = function (aether, material, chaos, order) {
        if (this.playersSnapshot.player1.playerClass == 'Highwayman') {
            this.playersSnapshot.player1.physicalAttack = Math.floor((chaos * material) + 10 - (aether * 1.5));
            this.playersSnapshot.player1.physicalDefense = Math.floor(5 + order);
            this.playersSnapshot.player1.specialAttack = Math.floor(2 + (2 * order));
            this.playersSnapshot.player1.specialDefense = Math.floor(3 + chaos);
            this.playersSnapshot.player1.dexterity = Math.floor(((10 * aether) + chaos) / material);
        }
        if (this.playersSnapshot.player1.playerClass == 'Elementalist') {
            this.playersSnapshot.player1.physicalAttack = Math.floor(4 + aether + material);
            this.playersSnapshot.player1.physicalDefense = Math.floor(3 + order);
            this.playersSnapshot.player1.specialAttack = Math.floor(((12 + aether) * chaos) / order);
            this.playersSnapshot.player1.specialDefense = Math.floor(10 + material + order);
            this.playersSnapshot.player1.dexterity = Math.floor(3 * chaos);
        }
        if (this.playersSnapshot.player1.playerClass == "Paragon") {
            this.playersSnapshot.player1.physicalAttack = Math.floor(((order + material) * 4) / (aether));
            this.playersSnapshot.player1.physicalDefense = Math.floor(((8 * material) + order) / chaos);
            this.playersSnapshot.player1.specialAttack = Math.floor((aether * 6) / material);
            this.playersSnapshot.player1.specialDefense = Math.floor(((7 * material) + chaos) / (order * 2));
        }
        if (this.playersSnapshot.player2.playerClass == 'Highwayman') {
            this.playersSnapshot.player2.physicalAttack = Math.floor((chaos * material) + 10 - (aether * 1.5));
            this.playersSnapshot.player2.physicalDefense = Math.floor(5 + order);
            this.playersSnapshot.player2.specialAttack = Math.floor(2 + (2 * order));
            this.playersSnapshot.player2.specialDefense = Math.floor(3 + chaos);
            this.playersSnapshot.player2.dexterity = Math.floor(((10 * aether) + chaos) / material);
        }
        if (this.playersSnapshot.player2.playerClass == 'Elementalist') {
            this.playersSnapshot.player2.physicalAttack = Math.floor(4 + aether + material);
            this.playersSnapshot.player2.physicalDefense = Math.floor(3 + order);
            this.playersSnapshot.player2.specialAttack = Math.floor(((12 + aether) * chaos) / order);
            this.playersSnapshot.player2.specialDefense = Math.floor(10 + material + order);
            this.playersSnapshot.player2.dexterity = Math.floor(3 * chaos);
        }
        if (this.playersSnapshot.player2.playerClass == "Paragon") {
            this.playersSnapshot.player2.physicalAttack = Math.floor(((order + material) * 4) / (aether));
            this.playersSnapshot.player2.physicalDefense = Math.floor(((8 * material) + order) / chaos);
            this.playersSnapshot.player2.specialAttack = Math.floor((aether * 6) / material);
            this.playersSnapshot.player1.specialDefense = Math.floor(((7 * material) + chaos) / (order * 2));
        }
        this.playersSnapshot.player1.action = this.AISelectAction(this.playersSnapshot.player1, this.playersSnapshot.player2);
        this.playersSnapshot.player2.action = this.AISelectAction(this.playersSnapshot.player2, this.playersSnapshot.player1);
        this.players.update(this.playersSnapshot);
    };
    EnvironmentComponent.prototype.AISelectAction = function (player, enemy) {
        var action = "";
        var rng = (Math.floor(Math.random() * (100 - 0 + 1) + 0));
        if ((player.physicalAttack - enemy.physicalDefense) > (player.specialAttack - enemy.specialDefense)) {
            if (rng - (player.physicalAttack - enemy.physicalDefense) <= 0) {
                rng = 1;
            }
            else {
                rng -= (player.physicalAttack - enemy.physicalDefense);
            }
        }
        if ((player.physicalAttack - enemy.physicalDefense) < (player.specialAttack - enemy.specialDefense)) {
            if (rng + (player.specialAttack - enemy.specialDefense) >= 100) {
                rng = 100;
            }
            else {
                rng += (player.specialAttack - enemy.specialDefense);
            }
        }
        if (player.currentHitpoints <= (player.hitpoints / 4)) {
            if ((enemy.physicalAttack - (player.physicalDefense * 2) < 0) || (enemy.specialAttack - (player.specialDefense * 2))) {
                rng = (Math.floor(Math.random() * (75 - 25 + 1) + 25));
            }
        }
        if (rng <= 33) {
            return "strike";
        }
        if (rng >= 66) {
            return "special";
        }
        if (rng < 66 && rng > 33) {
            return "defend";
        }
    };
    EnvironmentComponent.prototype.toggleBtn = function (key) {
        if (key == '65' || key == 'fog') {
            this.changeEnvironment('fog');
        }
        if (key == '83' || key == 'snow') {
            this.changeEnvironment('snow');
        }
        if (key == '68' || key == 'lightning') {
            this.changeEnvironment('lightning');
        }
        if (key == '70' || key == 'rain') {
            this.changeEnvironment('rain');
        }
        if (key == '71' || key == 'quake') {
            this.changeEnvironment('quake');
        }
        if (key == '72' || key == 'storm') {
            this.changeEnvironment('storm');
        }
    };
    EnvironmentComponent = __decorate([
        core_1.Component({
            selector: 'environment',
            template: "\n  <div *ngIf=\"environmentSnapshot\" class=\"container\">\n    <div class=\"col-sm-6 pull-left\">\n      <p>\n        To play, press key to turn on/off:<br>\n        [A] FOG; [S] SNOW; [D] LIGHTNING; [F] RAIN; [G] QUAKE; [H] STORM</p>\n    </div>\n    <div class=\"col-sm-6 pull-right envBtns\" *ngIf=\"environment\">\n      <div class=\"envBtnWrapper\" (click)=\"toggleBtn('fog')\" [ngSwitch]=\"environmentSnapshot.fog\">\n        <div *ngSwitchCase='true' class=\"envBtn active\">\n          <img src=\"./images/env_btn/env_fog_on.png\"></div>\n        <div *ngSwitchCase='false' class=\"envBtn\">\n          <img src=\"./images/env_btn/env_fog.png\"></div>\n        <p class=\"imgDescription\">Fog</p>\n      </div>\n      <div class=\"envBtnWrapper\" (click)=\"toggleBtn('snow')\" [ngSwitch]=\"environmentSnapshot.snow\">\n        <div *ngSwitchCase='true' class=\"envBtn active\">\n          <img src=\"./images/env_btn/env_hail_on.png\"></div>\n        <div *ngSwitchCase='false' class=\"envBtn\">\n          <img src=\"./images/env_btn/env_hail.png\"></div>\n        <p class=\"imgDescription\">Snow</p>\n      </div>\n      <div class=\"envBtnWrapper\" (click)=\"toggleBtn('lightning')\" [ngSwitch]=\"environmentSnapshot.lightning\">\n        <div *ngSwitchCase='true' class=\"envBtn active\">\n          <img src=\"./images/env_btn/env_lightning_on.png\"></div>\n        <div *ngSwitchCase='false' class=\"envBtn\">\n          <img src=\"./images/env_btn/env_lightning.png\"></div>\n        <p class=\"imgDescription\">Lightning</p>\n      </div>\n      <div class=\"envBtnWrapper\" (click)=\"toggleBtn('rain')\" [ngSwitch]=\"environmentSnapshot.rain\">\n        <div *ngSwitchCase='true' class=\"envBtn active\">\n          <img src=\"./images/env_btn/env_rain_on.png\"></div>\n        <div *ngSwitchCase='false' class=\"envBtn\">\n          <img src=\"./images/env_btn/env_rain.png\"></div>\n        <p class=\"imgDescription\">Rain</p>\n      </div>\n      <div class=\"envBtnWrapper\" (click)=\"toggleBtn('quake')\" [ngSwitch]=\"environmentSnapshot.quake\">\n        <div *ngSwitchCase='true' class=\"envBtn active\">\n          <img src=\"./images/env_btn/env_sun_on.png\"></div>\n        <div *ngSwitchCase='false' class=\"envBtn\">\n          <img src=\"./images/env_btn/env_sun.png\"></div>\n        <p class=\"imgDescription\">Quake</p>\n      </div>\n      <div class=\"envBtnWrapper\" (click)=\"toggleBtn('storm')\" [ngSwitch]=\"environmentSnapshot.storm\">\n        <div *ngSwitchCase='true' class=\"envBtn active\">\n          <img src=\"./images/env_btn/env_wind_on.png\"></div>\n        <div *ngSwitchCase='false' class=\"envBtn\">\n          <img src=\"./images/env_btn/env_wind.png\"></div>\n        <p class=\"imgDescription\">Storm</p>\n      </div>\n    </div>\n  </div>\n  ",
            styles: ["\n    @media (max-width: 736px) {\n      .envBtns {\n        display: none;\n      }\n    }\n    .envBtnWrapper {\n      display: inline-block;\n      background: transparent;\n      margin-left: 15px;\n    }\n    .envBtn {\n      background-color: #29b0ae;\n      border: none;\n      width: 64px;\n      height: 64px;\n      padding: 10px;\n      position: relative;\n      text-align: center;\n      vertical-align: middle;\n      text-decoration: uppercase;\n      color: #fff;\n      background-image: linear-gradient(bottom, rgb(41,144,176) 0%, rgb(113,222,220) 100%);\n      background-image: -o-linear-gradient(bottom, rgb(41,144,176) 0%, rgb(113,222,220) 100%);\n      background-image: -moz-linear-gradient(bottom, rgb(41,144,176) 0%, rgb(113,222,220) 100%);\n      background-image: -webkit-linear-gradient(bottom, rgb(41,144,176) 0%, rgb(113,222,220) 100%);\n      background-image: -ms-linear-gradient(bottom, rgb(41,144,176) 0%, rgb(113,222,220) 100%);\n      background-image: -webkit-gradient(\n      linear,\n      left bottom,\n      left top,\n      color-stop(0, rgb(41,144,176)),\n      color-stop(1, rgb(113,222,220))\n      );\n      -webkit-box-shadow: inset 0px 1px 0px #71dedc, 0px 6px 0px #164f60;\n      -moz-box-shadow: inset 0px 1px 0px #71dedc, 0px 6px 0px #164f60;\n      -o-box-shadow: inset 0px 1px 0px #71dedc, 0px 6px 0px #164f60;\n      box-shadow: inset 0px 1px 0px #71dedc, 0px 6px 0px #164f60;\n      -webkit-border-radius: 5px;\n      -moz-border-radius: 5px;\n      -o-border-radius: 5px;\n      border-radius: 5px;\n    }\n    .envBtn.active, .envBtn:active {\n      color: #2990b0;\n      text-shadow: 0px 1px 1px rgba(255,255,255,0.3);\n      background: rgb(41,144,176);\n      -webkit-box-shadow: inset 0px 1px 0px #71dedc, inset 0px -1px 0px #164f60;\n      -moz-box-shadow: inset 0px 1px 0px #71dedc, inset 0px -1px 0px #164f60;\n      -o-box-shadow: inset 0px 1px 0px #71dedc, inset 0px -1px 0px #164f60;\n      box-shadow: inset 0px 1px 0px #71dedc, inset 0px -1px 0px #164f60;\n      top: 2px;\n    }\n    .envBtn img {\n      width: 100%;\n      height: 100%;\n    }\n    .envBtnWrapper .imgDescription {\n      position: absolute;\n      background: transparent;\n      padding-top: 2px;\n      color: #fff;\n      text-transform: uppercase;\n      visibility: hidden;\n      opacity: 0;\n      -webkit-transition: visibility opacity 0.2s;\n      transition: visibility opacity 0.2s;\n    }\n    .envBtnWrapper:hover .imgDescription {\n      visibility: visible;\n      opacity: 1;\n    }\n  "],
            directives: [common_1.NgSwitch, common_1.NgSwitchCase, common_1.NgSwitchDefault]
        }), 
        __metadata('design:paramtypes', [angularfire2_1.AngularFire, core_1.Renderer])
    ], EnvironmentComponent);
    return EnvironmentComponent;
}());
exports.EnvironmentComponent = EnvironmentComponent;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVudmlyb25tZW50L2Vudmlyb25tZW50LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEscUJBQTRDLGVBQWUsQ0FBQyxDQUFBO0FBQzVELHVCQUFzRCxpQkFBaUIsQ0FBQyxDQUFBO0FBQ3hFLDZCQUFtRCxjQUFjLENBQUMsQ0FBQTtBQXFJbEU7SUFnQkUsOEJBQVksRUFBYyxFQUFFLFFBQWtCO1FBaEJoRCxpQkE4TkM7UUE3TUcsSUFBSSxDQUFDLEdBQUcsR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQztRQUNoQyxJQUFJLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEdBQUcsR0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBQyxnQkFBZ0IsRUFBQyxFQUFDLGdCQUFnQixFQUFDLElBQUksRUFBQyxDQUFDLENBQUM7UUFDMUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsVUFBQSxRQUFRO1lBQzNCLEtBQUksQ0FBQyxtQkFBbUIsR0FBRyxRQUFRLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDNUMsQ0FBQyxDQUFDLENBQUM7UUFDSCxJQUFJLENBQUMsV0FBVyxHQUFHLEVBQUUsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEdBQUcsR0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBQyxzQkFBc0IsQ0FBQyxDQUFDO1FBQzlGLElBQUksQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsR0FBRyxHQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFDLFVBQVUsRUFBQyxFQUFDLGdCQUFnQixFQUFDLElBQUksRUFBQyxDQUFDLENBQUM7UUFD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QUFDLENBQUM7WUFDbEMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ2xDLENBQUM7SUFDSCxDQUFDO0lBaFdIO1FBQUMsZ0JBQVMsQ0FBQztZQUNULFFBQVEsRUFBRSxhQUFhO1lBQ3ZCLFFBQVEsRUFBRSx1dkZBb0RUO1lBQ0QsTUFBTSxFQUFFLENBQUMsby9FQXdFUixDQUFDO1lBQ0YsVUFBVSxFQUFFLENBQUMsaUJBQVEsRUFBRSxxQkFBWSxFQUFFLHdCQUFlLENBQUM7U0FDdEQsQ0FBQzs7NEJBQUE7SUFnT0YsMkJBQUM7QUFBRCxDQTlOQSxBQThOQyxJQUFBO0FBOU5ZLDRCQUFvQix1QkE4TmhDLENBQUEiLCJmaWxlIjoiZW52aXJvbm1lbnQvZW52aXJvbm1lbnQuY29tcG9uZW50LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtDb21wb25lbnQsUmVuZGVyZXIsRWxlbWVudFJlZn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7TmdTd2l0Y2gsIE5nU3dpdGNoQ2FzZSwgTmdTd2l0Y2hEZWZhdWx0fSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xyXG5pbXBvcnQge0FuZ3VsYXJGaXJlLEZpcmViYXNlT2JqZWN0T2JzZXJ2YWJsZX0gZnJvbSAnYW5ndWxhcmZpcmUyJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnZW52aXJvbm1lbnQnLFxyXG4gIHRlbXBsYXRlOiBgXHJcbiAgPGRpdiAqbmdJZj1cImVudmlyb25tZW50U25hcHNob3RcIiBjbGFzcz1cImNvbnRhaW5lclwiPlxyXG4gICAgPGRpdiBjbGFzcz1cImNvbC1zbS02IHB1bGwtbGVmdFwiPlxyXG4gICAgICA8cD5cclxuICAgICAgICBUbyBwbGF5LCBwcmVzcyBrZXkgdG8gdHVybiBvbi9vZmY6PGJyPlxyXG4gICAgICAgIFtBXSBGT0c7IFtTXSBTTk9XOyBbRF0gTElHSFROSU5HOyBbRl0gUkFJTjsgW0ddIFFVQUtFOyBbSF0gU1RPUk08L3A+XHJcbiAgICA8L2Rpdj5cclxuICAgIDxkaXYgY2xhc3M9XCJjb2wtc20tNiBwdWxsLXJpZ2h0IGVudkJ0bnNcIiAqbmdJZj1cImVudmlyb25tZW50XCI+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJlbnZCdG5XcmFwcGVyXCIgKGNsaWNrKT1cInRvZ2dsZUJ0bignZm9nJylcIiBbbmdTd2l0Y2hdPVwiZW52aXJvbm1lbnRTbmFwc2hvdC5mb2dcIj5cclxuICAgICAgICA8ZGl2ICpuZ1N3aXRjaENhc2U9J3RydWUnIGNsYXNzPVwiZW52QnRuIGFjdGl2ZVwiPlxyXG4gICAgICAgICAgPGltZyBzcmM9XCIuL2ltYWdlcy9lbnZfYnRuL2Vudl9mb2dfb24ucG5nXCI+PC9kaXY+XHJcbiAgICAgICAgPGRpdiAqbmdTd2l0Y2hDYXNlPSdmYWxzZScgY2xhc3M9XCJlbnZCdG5cIj5cclxuICAgICAgICAgIDxpbWcgc3JjPVwiLi9pbWFnZXMvZW52X2J0bi9lbnZfZm9nLnBuZ1wiPjwvZGl2PlxyXG4gICAgICAgIDxwIGNsYXNzPVwiaW1nRGVzY3JpcHRpb25cIj5Gb2c8L3A+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzPVwiZW52QnRuV3JhcHBlclwiIChjbGljayk9XCJ0b2dnbGVCdG4oJ3Nub3cnKVwiIFtuZ1N3aXRjaF09XCJlbnZpcm9ubWVudFNuYXBzaG90LnNub3dcIj5cclxuICAgICAgICA8ZGl2ICpuZ1N3aXRjaENhc2U9J3RydWUnIGNsYXNzPVwiZW52QnRuIGFjdGl2ZVwiPlxyXG4gICAgICAgICAgPGltZyBzcmM9XCIuL2ltYWdlcy9lbnZfYnRuL2Vudl9oYWlsX29uLnBuZ1wiPjwvZGl2PlxyXG4gICAgICAgIDxkaXYgKm5nU3dpdGNoQ2FzZT0nZmFsc2UnIGNsYXNzPVwiZW52QnRuXCI+XHJcbiAgICAgICAgICA8aW1nIHNyYz1cIi4vaW1hZ2VzL2Vudl9idG4vZW52X2hhaWwucG5nXCI+PC9kaXY+XHJcbiAgICAgICAgPHAgY2xhc3M9XCJpbWdEZXNjcmlwdGlvblwiPlNub3c8L3A+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzPVwiZW52QnRuV3JhcHBlclwiIChjbGljayk9XCJ0b2dnbGVCdG4oJ2xpZ2h0bmluZycpXCIgW25nU3dpdGNoXT1cImVudmlyb25tZW50U25hcHNob3QubGlnaHRuaW5nXCI+XHJcbiAgICAgICAgPGRpdiAqbmdTd2l0Y2hDYXNlPSd0cnVlJyBjbGFzcz1cImVudkJ0biBhY3RpdmVcIj5cclxuICAgICAgICAgIDxpbWcgc3JjPVwiLi9pbWFnZXMvZW52X2J0bi9lbnZfbGlnaHRuaW5nX29uLnBuZ1wiPjwvZGl2PlxyXG4gICAgICAgIDxkaXYgKm5nU3dpdGNoQ2FzZT0nZmFsc2UnIGNsYXNzPVwiZW52QnRuXCI+XHJcbiAgICAgICAgICA8aW1nIHNyYz1cIi4vaW1hZ2VzL2Vudl9idG4vZW52X2xpZ2h0bmluZy5wbmdcIj48L2Rpdj5cclxuICAgICAgICA8cCBjbGFzcz1cImltZ0Rlc2NyaXB0aW9uXCI+TGlnaHRuaW5nPC9wPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzcz1cImVudkJ0bldyYXBwZXJcIiAoY2xpY2spPVwidG9nZ2xlQnRuKCdyYWluJylcIiBbbmdTd2l0Y2hdPVwiZW52aXJvbm1lbnRTbmFwc2hvdC5yYWluXCI+XHJcbiAgICAgICAgPGRpdiAqbmdTd2l0Y2hDYXNlPSd0cnVlJyBjbGFzcz1cImVudkJ0biBhY3RpdmVcIj5cclxuICAgICAgICAgIDxpbWcgc3JjPVwiLi9pbWFnZXMvZW52X2J0bi9lbnZfcmFpbl9vbi5wbmdcIj48L2Rpdj5cclxuICAgICAgICA8ZGl2ICpuZ1N3aXRjaENhc2U9J2ZhbHNlJyBjbGFzcz1cImVudkJ0blwiPlxyXG4gICAgICAgICAgPGltZyBzcmM9XCIuL2ltYWdlcy9lbnZfYnRuL2Vudl9yYWluLnBuZ1wiPjwvZGl2PlxyXG4gICAgICAgIDxwIGNsYXNzPVwiaW1nRGVzY3JpcHRpb25cIj5SYWluPC9wPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzcz1cImVudkJ0bldyYXBwZXJcIiAoY2xpY2spPVwidG9nZ2xlQnRuKCdxdWFrZScpXCIgW25nU3dpdGNoXT1cImVudmlyb25tZW50U25hcHNob3QucXVha2VcIj5cclxuICAgICAgICA8ZGl2ICpuZ1N3aXRjaENhc2U9J3RydWUnIGNsYXNzPVwiZW52QnRuIGFjdGl2ZVwiPlxyXG4gICAgICAgICAgPGltZyBzcmM9XCIuL2ltYWdlcy9lbnZfYnRuL2Vudl9zdW5fb24ucG5nXCI+PC9kaXY+XHJcbiAgICAgICAgPGRpdiAqbmdTd2l0Y2hDYXNlPSdmYWxzZScgY2xhc3M9XCJlbnZCdG5cIj5cclxuICAgICAgICAgIDxpbWcgc3JjPVwiLi9pbWFnZXMvZW52X2J0bi9lbnZfc3VuLnBuZ1wiPjwvZGl2PlxyXG4gICAgICAgIDxwIGNsYXNzPVwiaW1nRGVzY3JpcHRpb25cIj5RdWFrZTwvcD5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJlbnZCdG5XcmFwcGVyXCIgKGNsaWNrKT1cInRvZ2dsZUJ0bignc3Rvcm0nKVwiIFtuZ1N3aXRjaF09XCJlbnZpcm9ubWVudFNuYXBzaG90LnN0b3JtXCI+XHJcbiAgICAgICAgPGRpdiAqbmdTd2l0Y2hDYXNlPSd0cnVlJyBjbGFzcz1cImVudkJ0biBhY3RpdmVcIj5cclxuICAgICAgICAgIDxpbWcgc3JjPVwiLi9pbWFnZXMvZW52X2J0bi9lbnZfd2luZF9vbi5wbmdcIj48L2Rpdj5cclxuICAgICAgICA8ZGl2ICpuZ1N3aXRjaENhc2U9J2ZhbHNlJyBjbGFzcz1cImVudkJ0blwiPlxyXG4gICAgICAgICAgPGltZyBzcmM9XCIuL2ltYWdlcy9lbnZfYnRuL2Vudl93aW5kLnBuZ1wiPjwvZGl2PlxyXG4gICAgICAgIDxwIGNsYXNzPVwiaW1nRGVzY3JpcHRpb25cIj5TdG9ybTwvcD5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICA8L2Rpdj5cclxuICBgLFxyXG4gIHN0eWxlczogW2BcclxuICAgIEBtZWRpYSAobWF4LXdpZHRoOiA3MzZweCkge1xyXG4gICAgICAuZW52QnRucyB7XHJcbiAgICAgICAgZGlzcGxheTogbm9uZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLmVudkJ0bldyYXBwZXIge1xyXG4gICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xyXG4gICAgICBtYXJnaW4tbGVmdDogMTVweDtcclxuICAgIH1cclxuICAgIC5lbnZCdG4ge1xyXG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjliMGFlO1xyXG4gICAgICBib3JkZXI6IG5vbmU7XHJcbiAgICAgIHdpZHRoOiA2NHB4O1xyXG4gICAgICBoZWlnaHQ6IDY0cHg7XHJcbiAgICAgIHBhZGRpbmc6IDEwcHg7XHJcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xyXG4gICAgICB0ZXh0LWRlY29yYXRpb246IHVwcGVyY2FzZTtcclxuICAgICAgY29sb3I6ICNmZmY7XHJcbiAgICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudChib3R0b20sIHJnYig0MSwxNDQsMTc2KSAwJSwgcmdiKDExMywyMjIsMjIwKSAxMDAlKTtcclxuICAgICAgYmFja2dyb3VuZC1pbWFnZTogLW8tbGluZWFyLWdyYWRpZW50KGJvdHRvbSwgcmdiKDQxLDE0NCwxNzYpIDAlLCByZ2IoMTEzLDIyMiwyMjApIDEwMCUpO1xyXG4gICAgICBiYWNrZ3JvdW5kLWltYWdlOiAtbW96LWxpbmVhci1ncmFkaWVudChib3R0b20sIHJnYig0MSwxNDQsMTc2KSAwJSwgcmdiKDExMywyMjIsMjIwKSAxMDAlKTtcclxuICAgICAgYmFja2dyb3VuZC1pbWFnZTogLXdlYmtpdC1saW5lYXItZ3JhZGllbnQoYm90dG9tLCByZ2IoNDEsMTQ0LDE3NikgMCUsIHJnYigxMTMsMjIyLDIyMCkgMTAwJSk7XHJcbiAgICAgIGJhY2tncm91bmQtaW1hZ2U6IC1tcy1saW5lYXItZ3JhZGllbnQoYm90dG9tLCByZ2IoNDEsMTQ0LDE3NikgMCUsIHJnYigxMTMsMjIyLDIyMCkgMTAwJSk7XHJcbiAgICAgIGJhY2tncm91bmQtaW1hZ2U6IC13ZWJraXQtZ3JhZGllbnQoXHJcbiAgICAgIGxpbmVhcixcclxuICAgICAgbGVmdCBib3R0b20sXHJcbiAgICAgIGxlZnQgdG9wLFxyXG4gICAgICBjb2xvci1zdG9wKDAsIHJnYig0MSwxNDQsMTc2KSksXHJcbiAgICAgIGNvbG9yLXN0b3AoMSwgcmdiKDExMywyMjIsMjIwKSlcclxuICAgICAgKTtcclxuICAgICAgLXdlYmtpdC1ib3gtc2hhZG93OiBpbnNldCAwcHggMXB4IDBweCAjNzFkZWRjLCAwcHggNnB4IDBweCAjMTY0ZjYwO1xyXG4gICAgICAtbW96LWJveC1zaGFkb3c6IGluc2V0IDBweCAxcHggMHB4ICM3MWRlZGMsIDBweCA2cHggMHB4ICMxNjRmNjA7XHJcbiAgICAgIC1vLWJveC1zaGFkb3c6IGluc2V0IDBweCAxcHggMHB4ICM3MWRlZGMsIDBweCA2cHggMHB4ICMxNjRmNjA7XHJcbiAgICAgIGJveC1zaGFkb3c6IGluc2V0IDBweCAxcHggMHB4ICM3MWRlZGMsIDBweCA2cHggMHB4ICMxNjRmNjA7XHJcbiAgICAgIC13ZWJraXQtYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gICAgICAtbW96LWJvcmRlci1yYWRpdXM6IDVweDtcclxuICAgICAgLW8tYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gICAgICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgICB9XHJcbiAgICAuZW52QnRuLmFjdGl2ZSwgLmVudkJ0bjphY3RpdmUge1xyXG4gICAgICBjb2xvcjogIzI5OTBiMDtcclxuICAgICAgdGV4dC1zaGFkb3c6IDBweCAxcHggMXB4IHJnYmEoMjU1LDI1NSwyNTUsMC4zKTtcclxuICAgICAgYmFja2dyb3VuZDogcmdiKDQxLDE0NCwxNzYpO1xyXG4gICAgICAtd2Via2l0LWJveC1zaGFkb3c6IGluc2V0IDBweCAxcHggMHB4ICM3MWRlZGMsIGluc2V0IDBweCAtMXB4IDBweCAjMTY0ZjYwO1xyXG4gICAgICAtbW96LWJveC1zaGFkb3c6IGluc2V0IDBweCAxcHggMHB4ICM3MWRlZGMsIGluc2V0IDBweCAtMXB4IDBweCAjMTY0ZjYwO1xyXG4gICAgICAtby1ib3gtc2hhZG93OiBpbnNldCAwcHggMXB4IDBweCAjNzFkZWRjLCBpbnNldCAwcHggLTFweCAwcHggIzE2NGY2MDtcclxuICAgICAgYm94LXNoYWRvdzogaW5zZXQgMHB4IDFweCAwcHggIzcxZGVkYywgaW5zZXQgMHB4IC0xcHggMHB4ICMxNjRmNjA7XHJcbiAgICAgIHRvcDogMnB4O1xyXG4gICAgfVxyXG4gICAgLmVudkJ0biBpbWcge1xyXG4gICAgICB3aWR0aDogMTAwJTtcclxuICAgICAgaGVpZ2h0OiAxMDAlO1xyXG4gICAgfVxyXG4gICAgLmVudkJ0bldyYXBwZXIgLmltZ0Rlc2NyaXB0aW9uIHtcclxuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcclxuICAgICAgcGFkZGluZy10b3A6IDJweDtcclxuICAgICAgY29sb3I6ICNmZmY7XHJcbiAgICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XHJcbiAgICAgIHZpc2liaWxpdHk6IGhpZGRlbjtcclxuICAgICAgb3BhY2l0eTogMDtcclxuICAgICAgLXdlYmtpdC10cmFuc2l0aW9uOiB2aXNpYmlsaXR5IG9wYWNpdHkgMC4ycztcclxuICAgICAgdHJhbnNpdGlvbjogdmlzaWJpbGl0eSBvcGFjaXR5IDAuMnM7XHJcbiAgICB9XHJcbiAgICAuZW52QnRuV3JhcHBlcjpob3ZlciAuaW1nRGVzY3JpcHRpb24ge1xyXG4gICAgICB2aXNpYmlsaXR5OiB2aXNpYmxlO1xyXG4gICAgICBvcGFjaXR5OiAxO1xyXG4gICAgfVxyXG4gIGBdLFxyXG4gIGRpcmVjdGl2ZXM6IFtOZ1N3aXRjaCwgTmdTd2l0Y2hDYXNlLCBOZ1N3aXRjaERlZmF1bHRdXHJcbn0pXHJcblxyXG5leHBvcnQgY2xhc3MgRW52aXJvbm1lbnRDb21wb25lbnQge1xyXG4gIG9uT2ZmOkZpcmViYXNlT2JqZWN0T2JzZXJ2YWJsZTxhbnk+O1xyXG4gIGVudmlyb25tZW50OkZpcmViYXNlT2JqZWN0T2JzZXJ2YWJsZTxhbnk+O1xyXG4gIHBsYXllcnM6RmlyZWJhc2VPYmplY3RPYnNlcnZhYmxlPGFueT47XHJcbiAgVVJMOnN0cmluZztcclxuICBlbnZpcm9ubWVudFNuYXBzaG90OiB7XHJcbiAgICBmb2c6Ym9vbGVhbixcclxuICAgIHNub3c6Ym9vbGVhbixcclxuICAgIGxpZ2h0bmluZzpib29sZWFuLFxyXG4gICAgcmFpbjpib29sZWFuLFxyXG4gICAgcXVha2U6Ym9vbGVhbixcclxuICAgIHN0b3JtOmJvb2xlYW5cclxuICB9O1xyXG4gIHBsYXllcnNTbmFwc2hvdDogYW55O1xyXG4gIGdldEtleTpGdW5jdGlvbjtcclxuXHJcbiAgY29uc3RydWN0b3IoYWY6QW5ndWxhckZpcmUsIHJlbmRlcmVyOiBSZW5kZXJlcil7XHJcbiAgICB0aGlzLlVSTCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xyXG4gICAgdGhpcy5vbk9mZiA9IGFmLmRhdGFiYXNlLm9iamVjdCgnLycrdGhpcy5VUkwuc3BsaXQoJy9nYW1lLycpWzFdKycvR2xvYmFscy9Pbk9mZicse3ByZXNlcnZlU25hcHNob3Q6dHJ1ZX0pO1xyXG4gICAgdGhpcy5vbk9mZi5zdWJzY3JpYmUoc25hcHNob3QgPT57XHJcbiAgICAgIHRoaXMuZW52aXJvbm1lbnRTbmFwc2hvdCA9IHNuYXBzaG90LnZhbCgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLmVudmlyb25tZW50ID0gYWYuZGF0YWJhc2Uub2JqZWN0KCcvJyt0aGlzLlVSTC5zcGxpdCgnL2dhbWUvJylbMV0rJy9HbG9iYWxzL0Vudmlyb25tZW50Jyk7XHJcbiAgICB0aGlzLnBsYXllcnMgPSBhZi5kYXRhYmFzZS5vYmplY3QoJy8nK3RoaXMuVVJMLnNwbGl0KCcvZ2FtZS8nKVsxXSsnL1BsYXllcnMnLHtwcmVzZXJ2ZVNuYXBzaG90OnRydWV9KTtcclxuICAgIHRoaXMucGxheWVycy5zdWJzY3JpYmUoc25hcHNob3QgPT57XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90ID0gc25hcHNob3QudmFsKCk7XHJcbiAgICB9KTtcclxuICAgIC8qIEdldHMga2V5dXAgKi9cclxuICAgIHRoaXMuZ2V0S2V5ID0gcmVuZGVyZXIubGlzdGVuR2xvYmFsKCdkb2N1bWVudCcsICdrZXl1cCcsIChldmVudCkgPT4ge1xyXG4gICAgICB2YXIga2V5ID0gZXZlbnQua2V5Q29kZTtcclxuICAgICAgdGhpcy50b2dnbGVCdG4oa2V5KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY2hhbmdlRW52aXJvbm1lbnQoeCl7XHJcbiAgICB2YXIgYWV0aGVyID0gMTtcclxuICAgIHZhciBtYXRlcmlhbCA9IDE7XHJcbiAgICB2YXIgY2hhb3MgPSAxO1xyXG4gICAgdmFyIG9yZGVyID0gMTtcclxuICAgIHN3aXRjaCh4KXtcclxuICAgICAgY2FzZSAncmFpbic6XHJcbiAgICAgICAgaWYodGhpcy5lbnZpcm9ubWVudFNuYXBzaG90LnJhaW49PXRydWUpe1xyXG4gICAgICAgICAgdGhpcy5vbk9mZi51cGRhdGUoe3JhaW46ZmFsc2V9KTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLm9uT2ZmLnVwZGF0ZSh7cmFpbjp0cnVlfSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIGNhc2UgJ2ZvZyc6XHJcbiAgICAgICAgICBpZih0aGlzLmVudmlyb25tZW50U25hcHNob3QuZm9nPT10cnVlKXtcclxuICAgICAgICAgICAgdGhpcy5vbk9mZi51cGRhdGUoe2ZvZzpmYWxzZX0pXHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5vbk9mZi51cGRhdGUoe2ZvZzp0cnVlfSk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICBjYXNlICdsaWdodG5pbmcnOlxyXG4gICAgICAgIGlmKHRoaXMuZW52aXJvbm1lbnRTbmFwc2hvdC5saWdodG5pbmc9PXRydWUpe1xyXG4gICAgICAgICAgdGhpcy5vbk9mZi51cGRhdGUoe2xpZ2h0bmluZzpmYWxzZX0pXHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5vbk9mZi51cGRhdGUoe2xpZ2h0bmluZzp0cnVlfSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIGNhc2UgJ3F1YWtlJzpcclxuICAgICAgICBpZih0aGlzLmVudmlyb25tZW50U25hcHNob3QucXVha2U9PXRydWUpe1xyXG4gICAgICAgICAgdGhpcy5vbk9mZi51cGRhdGUoe3F1YWtlOmZhbHNlfSlcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLm9uT2ZmLnVwZGF0ZSh7cXVha2U6dHJ1ZX0pO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICBjYXNlICdzbm93JzpcclxuICAgICAgICBpZih0aGlzLmVudmlyb25tZW50U25hcHNob3Quc25vdz09dHJ1ZSl7XHJcbiAgICAgICAgICB0aGlzLm9uT2ZmLnVwZGF0ZSh7c25vdzpmYWxzZX0pXHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5vbk9mZi51cGRhdGUoe3Nub3c6dHJ1ZX0pO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICBjYXNlICdzdG9ybSc6XHJcbiAgICAgICAgaWYodGhpcy5lbnZpcm9ubWVudFNuYXBzaG90LnN0b3JtPT10cnVlKXtcclxuICAgICAgICAgIHRoaXMub25PZmYudXBkYXRlKHtzdG9ybTpmYWxzZX0pXHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5vbk9mZi51cGRhdGUoe3N0b3JtOnRydWV9KTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICh0aGlzLmVudmlyb25tZW50U25hcHNob3QucmFpbiA9PSB0cnVlKSB7XHJcbiAgICAgICAgY2hhb3MgKz0gMTtcclxuICAgICAgICBtYXRlcmlhbCArPSAyO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuZW52aXJvbm1lbnRTbmFwc2hvdC5mb2cgPT0gdHJ1ZSkge1xyXG4gICAgICAgIGFldGhlciArPSAyO1xyXG4gICAgICAgIG9yZGVyICs9IDE7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5lbnZpcm9ubWVudFNuYXBzaG90LmxpZ2h0bmluZyA9PSB0cnVlKSB7XHJcbiAgICAgICAgYWV0aGVyICs9IDE7XHJcbiAgICAgICAgY2hhb3MgKz0gMjtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmVudmlyb25tZW50U25hcHNob3QucXVha2UgPT0gdHJ1ZSkge1xyXG4gICAgICAgIG9yZGVyICs9IDI7XHJcbiAgICAgICAgbWF0ZXJpYWwgKz0gMTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmVudmlyb25tZW50U25hcHNob3Quc25vdyA9PSB0cnVlKSB7XHJcbiAgICAgICAgYWV0aGVyICs9IDI7XHJcbiAgICAgICAgbWF0ZXJpYWwgKz0gMjtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmVudmlyb25tZW50U25hcHNob3Quc3Rvcm0gPT0gdHJ1ZSkge1xyXG4gICAgICAgIG9yZGVyICs9IDI7XHJcbiAgICAgICAgY2hhb3MgKz0gMjtcclxuICAgIH1cclxuICB0aGlzLmVudmlyb25tZW50LnNldCh7YWV0aGVyOmFldGhlcixtYXRlcmlhbDptYXRlcmlhbCxjaGFvczpjaGFvcyxvcmRlcjpvcmRlcn0pO1xyXG4gIHRoaXMuY2hhbmdlQ2hhbXBpb25TdGF0cyhhZXRoZXIsbWF0ZXJpYWwsY2hhb3Msb3JkZXIpO1xyXG4gIH1cclxuXHJcbiAgY2hhbmdlQ2hhbXBpb25TdGF0cyhhZXRoZXIsbWF0ZXJpYWwsY2hhb3Msb3JkZXIpe1xyXG4gICAgaWYodGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMS5wbGF5ZXJDbGFzcyA9PSAnSGlnaHdheW1hbicpe1xyXG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIxLnBoeXNpY2FsQXR0YWNrID0gTWF0aC5mbG9vcigoY2hhb3MgKiBtYXRlcmlhbCkgKyAxMCAtIChhZXRoZXIqMS41KSk7XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjEucGh5c2ljYWxEZWZlbnNlID0gTWF0aC5mbG9vcig1ICsgb3JkZXIpO1xyXG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIxLnNwZWNpYWxBdHRhY2sgPSBNYXRoLmZsb29yKDIgKyAoMiAqIG9yZGVyKSk7XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjEuc3BlY2lhbERlZmVuc2UgPSBNYXRoLmZsb29yKDMgKyBjaGFvcyk7XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjEuZGV4dGVyaXR5ID0gTWF0aC5mbG9vcigoKDEwICogYWV0aGVyKSArIGNoYW9zKSAvIG1hdGVyaWFsKTtcclxuICAgIH1cclxuICAgIGlmKHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjEucGxheWVyQ2xhc3MgPT0gJ0VsZW1lbnRhbGlzdCcpe1xyXG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIxLnBoeXNpY2FsQXR0YWNrID0gTWF0aC5mbG9vcig0ICsgYWV0aGVyICsgbWF0ZXJpYWwpO1xyXG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIxLnBoeXNpY2FsRGVmZW5zZSA9IE1hdGguZmxvb3IoMyArIG9yZGVyKTtcclxuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMS5zcGVjaWFsQXR0YWNrID0gTWF0aC5mbG9vcigoKDEyICsgYWV0aGVyKSAqIGNoYW9zKSAvIG9yZGVyKTtcclxuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMS5zcGVjaWFsRGVmZW5zZSA9IE1hdGguZmxvb3IoMTAgKyBtYXRlcmlhbCArIG9yZGVyKTtcclxuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMS5kZXh0ZXJpdHkgPSBNYXRoLmZsb29yKDMgKiBjaGFvcyk7XHJcbiAgICB9XHJcbiAgICBpZih0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIxLnBsYXllckNsYXNzID09IFwiUGFyYWdvblwiKXtcclxuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMS5waHlzaWNhbEF0dGFjayA9IE1hdGguZmxvb3IoKChvcmRlciArIG1hdGVyaWFsKSo0KS8oYWV0aGVyKSk7XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjEucGh5c2ljYWxEZWZlbnNlID0gTWF0aC5mbG9vcigoKDggKiBtYXRlcmlhbCkgKyBvcmRlcikgLyBjaGFvcyk7XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjEuc3BlY2lhbEF0dGFjayA9IE1hdGguZmxvb3IoKGFldGhlciAqIDYpL21hdGVyaWFsKTtcclxuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMS5zcGVjaWFsRGVmZW5zZSA9IE1hdGguZmxvb3IoKCg3ICogbWF0ZXJpYWwpICsgY2hhb3MpIC8gKG9yZGVyKjIpKTtcclxuICAgIH1cclxuICAgIGlmKHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjIucGxheWVyQ2xhc3MgPT0gJ0hpZ2h3YXltYW4nKXtcclxuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMi5waHlzaWNhbEF0dGFjayA9IE1hdGguZmxvb3IoKGNoYW9zICogbWF0ZXJpYWwpICsgMTAgLSAoYWV0aGVyKjEuNSkpO1xyXG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIyLnBoeXNpY2FsRGVmZW5zZSA9IE1hdGguZmxvb3IoNSArIG9yZGVyKTtcclxuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMi5zcGVjaWFsQXR0YWNrID0gTWF0aC5mbG9vcigyICsgKDIgKiBvcmRlcikpO1xyXG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIyLnNwZWNpYWxEZWZlbnNlID0gTWF0aC5mbG9vcigzICsgY2hhb3MpO1xyXG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIyLmRleHRlcml0eSA9IE1hdGguZmxvb3IoKCgxMCAqIGFldGhlcikgKyBjaGFvcykgLyBtYXRlcmlhbCk7XHJcbiAgICB9XHJcbiAgICBpZih0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIyLnBsYXllckNsYXNzID09ICdFbGVtZW50YWxpc3QnKXtcclxuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMi5waHlzaWNhbEF0dGFjayA9IE1hdGguZmxvb3IoNCArIGFldGhlciArIG1hdGVyaWFsKTtcclxuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMi5waHlzaWNhbERlZmVuc2UgPSBNYXRoLmZsb29yKDMgKyBvcmRlcik7XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjIuc3BlY2lhbEF0dGFjayA9IE1hdGguZmxvb3IoKCgxMiArIGFldGhlcikgKiBjaGFvcykgLyBvcmRlcik7XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjIuc3BlY2lhbERlZmVuc2UgPSBNYXRoLmZsb29yKDEwICsgbWF0ZXJpYWwgKyBvcmRlcik7XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjIuZGV4dGVyaXR5ID0gTWF0aC5mbG9vcigzICogY2hhb3MpO1xyXG4gICAgfVxyXG4gICAgaWYodGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMi5wbGF5ZXJDbGFzcyA9PSBcIlBhcmFnb25cIil7XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjIucGh5c2ljYWxBdHRhY2sgPSBNYXRoLmZsb29yKCgob3JkZXIgKyBtYXRlcmlhbCkqNCkvKGFldGhlcikpO1xyXG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIyLnBoeXNpY2FsRGVmZW5zZSA9IE1hdGguZmxvb3IoKCg4ICogbWF0ZXJpYWwpICsgb3JkZXIpIC8gY2hhb3MpO1xyXG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIyLnNwZWNpYWxBdHRhY2sgPSBNYXRoLmZsb29yKChhZXRoZXIgKiA2KS9tYXRlcmlhbCk7XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjEuc3BlY2lhbERlZmVuc2UgPSBNYXRoLmZsb29yKCgoNyAqIG1hdGVyaWFsKSArIGNoYW9zKSAvIChvcmRlcioyKSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIxLmFjdGlvbiA9IHRoaXMuQUlTZWxlY3RBY3Rpb24odGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMSx0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIyKTtcclxuICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjIuYWN0aW9uID0gdGhpcy5BSVNlbGVjdEFjdGlvbih0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIyLHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjEpO1xyXG4gICAgdGhpcy5wbGF5ZXJzLnVwZGF0ZSh0aGlzLnBsYXllcnNTbmFwc2hvdCk7XHJcbiAgfVxyXG5cclxuICBBSVNlbGVjdEFjdGlvbihwbGF5ZXIsZW5lbXkpe1xyXG4gICAgdmFyIGFjdGlvbiA9IFwiXCI7XHJcbiAgICB2YXIgcm5nID0gKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSooMTAwIC0gMCArIDEpICsgMCkpO1xyXG4gICAgaWYgKChwbGF5ZXIucGh5c2ljYWxBdHRhY2sgLSBlbmVteS5waHlzaWNhbERlZmVuc2UpID4gKHBsYXllci5zcGVjaWFsQXR0YWNrIC0gZW5lbXkuc3BlY2lhbERlZmVuc2UpKSB7XHJcbiAgICAgICAgaWYgKHJuZyAtIChwbGF5ZXIucGh5c2ljYWxBdHRhY2sgLSBlbmVteS5waHlzaWNhbERlZmVuc2UpIDw9IDApIHtcclxuICAgICAgICAgICAgcm5nID0gMTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBybmcgLT0gKHBsYXllci5waHlzaWNhbEF0dGFjayAtIGVuZW15LnBoeXNpY2FsRGVmZW5zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKChwbGF5ZXIucGh5c2ljYWxBdHRhY2sgLSBlbmVteS5waHlzaWNhbERlZmVuc2UpIDwgKHBsYXllci5zcGVjaWFsQXR0YWNrIC0gZW5lbXkuc3BlY2lhbERlZmVuc2UpKSB7XHJcbiAgICAgICAgaWYgKHJuZyArIChwbGF5ZXIuc3BlY2lhbEF0dGFjayAtIGVuZW15LnNwZWNpYWxEZWZlbnNlKSA+PSAxMDApIHtcclxuICAgICAgICAgICAgcm5nID0gMTAwO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJuZyArPSAocGxheWVyLnNwZWNpYWxBdHRhY2sgLSBlbmVteS5zcGVjaWFsRGVmZW5zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHBsYXllci5jdXJyZW50SGl0cG9pbnRzIDw9IChwbGF5ZXIuaGl0cG9pbnRzLzQpKXtcclxuICAgICAgaWYgKChlbmVteS5waHlzaWNhbEF0dGFjayAtIChwbGF5ZXIucGh5c2ljYWxEZWZlbnNlKjIpIDwgMCkgfHwgKGVuZW15LnNwZWNpYWxBdHRhY2sgLSAocGxheWVyLnNwZWNpYWxEZWZlbnNlKjIpKSl7XHJcbiAgICAgICAgICBybmcgPSAoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKig3NSAtIDI1ICsgMSkgKyAyNSkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAocm5nIDw9IDMzKSB7XHJcbiAgICAgICAgcmV0dXJuIFwic3RyaWtlXCI7XHJcbiAgICB9XHJcbiAgICBpZiAocm5nID49IDY2KSB7XHJcbiAgICAgICAgcmV0dXJuXCJzcGVjaWFsXCI7XHJcbiAgICB9XHJcbiAgICBpZiAocm5nIDwgNjYgJiYgcm5nID4gMzMpIHtcclxuICAgICAgICByZXR1cm4gXCJkZWZlbmRcIjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHRvZ2dsZUJ0bihrZXkpIHtcclxuICAgIC8vIGFcclxuICAgIGlmIChrZXkgPT0gJzY1JyB8fCBrZXkgPT0gJ2ZvZycpIHtcclxuICAgICAgdGhpcy5jaGFuZ2VFbnZpcm9ubWVudCgnZm9nJyk7XHJcbiAgICB9XHJcbiAgICAvLyBzXHJcbiAgICBpZiAoa2V5ID09ICc4MycgfHwga2V5ID09ICdzbm93Jykge1xyXG4gICAgICB0aGlzLmNoYW5nZUVudmlyb25tZW50KCdzbm93Jyk7XHJcbiAgICB9XHJcbiAgICAvLyBkXHJcbiAgICBpZiAoa2V5ID09ICc2OCcgfHwga2V5ID09ICdsaWdodG5pbmcnKSB7XHJcbiAgICAgIHRoaXMuY2hhbmdlRW52aXJvbm1lbnQoJ2xpZ2h0bmluZycpO1xyXG4gICAgfVxyXG4gICAgLy8gZlxyXG4gICAgaWYgKGtleSA9PSAnNzAnIHx8IGtleSA9PSAncmFpbicpIHtcclxuICAgICAgdGhpcy5jaGFuZ2VFbnZpcm9ubWVudCgncmFpbicpO1xyXG4gICAgfVxyXG4gICAgLy8gZ1xyXG4gICAgaWYgKGtleSA9PSAnNzEnIHx8IGtleSA9PSAncXVha2UnKSB7XHJcbiAgICAgIHRoaXMuY2hhbmdlRW52aXJvbm1lbnQoJ3F1YWtlJyk7XHJcbiAgICB9XHJcbiAgICAvLyBoXHJcbiAgICBpZiAoa2V5ID09ICc3MicgfHwga2V5ID09ICdzdG9ybScpIHtcclxuICAgICAgdGhpcy5jaGFuZ2VFbnZpcm9ubWVudCgnc3Rvcm0nKTtcclxuICAgIH1cclxuICB9XHJcbn0iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
