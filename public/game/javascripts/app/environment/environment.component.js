"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var core_1 = require('@angular/core');
var common_1 = require('@angular/common');
var angularfire2_1 = require('angularfire2');
var EnvironmentComponent = (function () {
    function EnvironmentComponent(af, renderer) {
        var _this = this;
        this.URL = window.location.href;
        this.onOff = af.database.object('/' + this.URL.split('/game/')[1] + '/Globals/OnOff', { preserveSnapshot: true });
        this.onOff.subscribe(function (snapshot) {
            _this.environmentSnapshot = snapshot.val();
        });
        this.environment = af.database.object('/' + this.URL.split('/game/')[1] + '/Globals/Environment');
        this.players = af.database.object('/' + this.URL.split('/game/')[1] + '/Players', { preserveSnapshot: true });
        this.players.subscribe(function (snapshot) {
            _this.playersSnapshot = snapshot.val();
        });
        this.getKey = renderer.listenGlobal('document', 'keyup', function (event) {
            var key = event.keyCode;
            _this.toggleBtn(key);
        });
    }
    EnvironmentComponent.prototype.changeEnvironment = function (x) {
        var aether = 1;
        var material = 1;
        var chaos = 1;
        var order = 1;
        switch (x) {
            case 'rain':
                if (this.environmentSnapshot.rain == true) {
                    this.onOff.update({ rain: false });
                    break;
                }
                else {
                    this.onOff.update({ rain: true });
                    break;
                }
            case 'fog':
                if (this.environmentSnapshot.fog == true) {
                    this.onOff.update({ fog: false });
                    break;
                }
                else {
                    this.onOff.update({ fog: true });
                    break;
                }
            case 'lightning':
                if (this.environmentSnapshot.lightning == true) {
                    this.onOff.update({ lightning: false });
                    break;
                }
                else {
                    this.onOff.update({ lightning: true });
                    break;
                }
            case 'sunshine':
                if (this.environmentSnapshot.sunshine == true) {
                    this.onOff.update({ sunshine: false });
                    break;
                }
                else {
                    this.onOff.update({ sunshine: true });
                    break;
                }
            case 'hail':
                if (this.environmentSnapshot.hail == true) {
                    this.onOff.update({ hail: false });
                    break;
                }
                else {
                    this.onOff.update({ hail: true });
                    break;
                }
            case 'wind':
                if (this.environmentSnapshot.wind == true) {
                    this.onOff.update({ wind: false });
                    break;
                }
                else {
                    this.onOff.update({ wind: true });
                    break;
                }
        }
        if (this.environmentSnapshot.rain == true) {
            chaos += 1;
            material += 2;
        }
        if (this.environmentSnapshot.fog == true) {
            aether += 2;
            order += 1;
        }
        if (this.environmentSnapshot.lightning == true) {
            aether += 1;
            chaos += 2;
        }
        if (this.environmentSnapshot.sunshine == true) {
            order += 2;
            material += 1;
        }
        if (this.environmentSnapshot.hail == true) {
            aether += 2;
            material += 2;
        }
        if (this.environmentSnapshot.wind == true) {
            order += 2;
            chaos += 2;
        }
        this.environment.set({ aether: aether, material: material, chaos: chaos, order: order });
        this.changeChampionStats(aether, material, chaos, order);
    };
    EnvironmentComponent.prototype.changeChampionStats = function (aether, material, chaos, order) {
        if (this.playersSnapshot.player1.playerClass == 'Highwayman') {
            this.playersSnapshot.player1.physicalAttack = Math.floor((chaos * material) + 10);
            this.playersSnapshot.player1.physicalDefense = Math.floor(5 + material);
            this.playersSnapshot.player1.specialAttack = Math.floor(2 + (2 * order));
            this.playersSnapshot.player1.specialDefense = Math.floor(3 + chaos + aether);
            this.playersSnapshot.player1.dexterity = Math.floor(((10 * aether) + order) / material);
        }
        if (this.playersSnapshot.player1.playerClass == 'Elementalist') {
            this.playersSnapshot.player1.physicalAttack = Math.floor(4 + aether + material);
            this.playersSnapshot.player1.physicalDefense = Math.floor(3 + order);
            this.playersSnapshot.player1.specialAttack = Math.floor(((12 + aether) * chaos) / order);
            this.playersSnapshot.player1.specialDefense = Math.floor(10 + material + order);
            this.playersSnapshot.player1.dexterity = Math.floor(3 * chaos);
        }
        if (this.playersSnapshot.player1.playerClass == "Paragon") {
            this.playersSnapshot.player1.physicalAttack = Math.floor((order + material) * 2);
            this.playersSnapshot.player1.physicalDefense = Math.floor(((8 * material) + order) / (chaos * 2));
            this.playersSnapshot.player1.specialAttack = Math.floor((aether * 6) / material);
            this.playersSnapshot.player1.specialDefense = Math.floor(((7 * material) + chaos) / (order * 2));
        }
        if (this.playersSnapshot.player2.playerClass == 'Highwayman') {
            this.playersSnapshot.player2.physicalAttack = Math.floor((chaos * material) + 10);
            this.playersSnapshot.player2.physicalDefense = Math.floor(5 + material);
            this.playersSnapshot.player2.specialAttack = Math.floor(2 + (2 * order));
            this.playersSnapshot.player2.specialDefense = Math.floor(3 + chaos + aether);
            this.playersSnapshot.player2.dexterity = Math.floor(((10 * aether) + order) / material);
        }
        if (this.playersSnapshot.player2.playerClass == 'Elementalist') {
            this.playersSnapshot.player2.physicalAttack = Math.floor(4 + aether + material);
            this.playersSnapshot.player2.physicalDefense = Math.floor(3 + order);
            this.playersSnapshot.player2.specialAttack = Math.floor(((12 + aether) * chaos) / order);
            this.playersSnapshot.player2.specialDefense = Math.floor(10 + material + order);
            this.playersSnapshot.player2.dexterity = Math.floor(3 * chaos);
        }
        if (this.playersSnapshot.player2.playerClass == "Paragon") {
            this.playersSnapshot.player2.physicalAttack = Math.floor((order + material) * 2);
            this.playersSnapshot.player2.physicalDefense = Math.floor(((8 * material) + order) / (chaos * 2));
            this.playersSnapshot.player2.specialAttack = Math.floor((aether * 6) / material);
            this.playersSnapshot.player1.specialDefense = Math.floor(((7 * material) + chaos) / (order * 2));
        }
        this.playersSnapshot.player1.action = this.AISelectAction(this.playersSnapshot.player1, this.playersSnapshot.player2);
        this.playersSnapshot.player2.action = this.AISelectAction(this.playersSnapshot.player2, this.playersSnapshot.player1);
        this.players.update(this.playersSnapshot);
    };
    EnvironmentComponent.prototype.AISelectAction = function (player, enemy) {
        var action = "";
        var rng = (Math.floor(Math.random() * (100 - 0 + 1) + 0));
        if ((player.physicalAttack - enemy.physicalDefense) > (player.specialAttack - enemy.specialDefense)) {
            if (rng - (player.physicalAttack - enemy.physicalDefense) <= 0) {
                rng = 1;
            }
            else {
                rng -= (player.physicalAttack - enemy.physicalDefense);
            }
        }
        if ((player.physicalAttack - enemy.physicalDefense) < (player.specialAttack - enemy.specialDefense)) {
            if (rng + (player.specialAttack - enemy.specialDefense) >= 100) {
                rng = 100;
            }
            else {
                rng += (player.specialAttack - enemy.specialDefense);
            }
        }
        if (rng <= 33) {
            return "strike";
        }
        if (rng >= 66) {
            return "special";
        }
        if (rng < 66 && rng > 33) {
            return "defend";
        }
    };
    EnvironmentComponent.prototype.toggleBtn = function (key) {
        if (key == '65' || key == 'fog') {
            this.changeEnvironment('fog');
        }
        if (key == '83' || key == 'hail') {
            this.changeEnvironment('hail');
        }
        if (key == '68' || key == 'lightning') {
            this.changeEnvironment('lightning');
        }
        if (key == '70' || key == 'rain') {
            this.changeEnvironment('rain');
        }
        if (key == '71' || key == 'sunshine') {
            this.changeEnvironment('sunshine');
        }
        if (key == '72' || key == 'wind') {
            this.changeEnvironment('wind');
        }
    };
    EnvironmentComponent = __decorate([
        core_1.Component({
            selector: 'environment',
            template: "\n  <!--\n  <div *ngIf=\"snapshot\">\n    <p>Rain: {{snapshot.rain}}</p>\n    <button (click)=\"changeEnvironment('rain')\">Change Rain</button>\n    <p>Fog: {{snapshot.fog}}</p>\n    <button (click)=\"changeEnvironment('fog')\">Change Fog</button>\n    <p>Lightning: {{snapshot.lightning}}</p>\n    <button (click)=\"changeEnvironment('lightning')\">Change Lightning</button>\n    <p>Sunshine: {{snapshot.sunshine}}</p>\n    <button (click)=\"changeEnvironment('sunshine')\">Change Sunshine</button>\n    <p>Hail: {{snapshot.hail}}</p>\n    <button (click)=\"changeEnvironment('hail')\">Change Hail</button>\n    <p>Wind: {{snapshot.wind}}</p>\n    <button (click)=\"changeEnvironment('wind')\">Change Wind</button>\n  </div>\n  //-->\n\n  <div *ngIf=\"environmentSnapshot\" class=\"container\">\n    <div class=\"col-sm-6 pull-left\">\n      <p>\n        To play, press key to turn on/off:<br>\n        [A] FOG; [S] HAIL; [D] LIGHTNING; [F] RAIN; [G] SUNSHINE; [H] WIND.</p>\n    </div>\n    <div class=\"col-sm-6 pull-right envBtns\" *ngIf=\"environment\">\n      <div class=\"envBtnWrapper\" (click)=\"toggleBtn('fog')\" [ngSwitch]=\"environmentSnapshot.fog\">\n        <div *ngSwitchCase='true' class=\"envBtn active\">\n          <img src=\"./images/env_btn/env_fog_on.png\"></div>\n        <div *ngSwitchCase='false' class=\"envBtn\">\n          <img src=\"./images/env_btn/env_fog.png\"></div>\n        <p class=\"imgDescription\">Fog</p>\n      </div>\n      <div class=\"envBtnWrapper\" (click)=\"toggleBtn('hail')\" [ngSwitch]=\"environmentSnapshot.hail\">\n        <div *ngSwitchCase='true' class=\"envBtn active\">\n          <img src=\"./images/env_btn/env_hail_on.png\"></div>\n        <div *ngSwitchCase='false' class=\"envBtn\">\n          <img src=\"./images/env_btn/env_hail.png\"></div>\n        <p class=\"imgDescription\">Hail</p>\n      </div>\n      <div class=\"envBtnWrapper\" (click)=\"toggleBtn('lightning')\" [ngSwitch]=\"environmentSnapshot.lightning\">\n        <div *ngSwitchCase='true' class=\"envBtn active\">\n          <img src=\"./images/env_btn/env_lightning_on.png\"></div>\n        <div *ngSwitchCase='false' class=\"envBtn\">\n          <img src=\"./images/env_btn/env_lightning.png\"></div>\n        <p class=\"imgDescription\">Lightning</p>\n      </div>\n      <div class=\"envBtnWrapper\" (click)=\"toggleBtn('rain')\" [ngSwitch]=\"environmentSnapshot.rain\">\n        <div *ngSwitchCase='true' class=\"envBtn active\">\n          <img src=\"./images/env_btn/env_rain_on.png\"></div>\n        <div *ngSwitchCase='false' class=\"envBtn\">\n          <img src=\"./images/env_btn/env_rain.png\"></div>\n        <p class=\"imgDescription\">Rain</p>\n      </div>\n      <div class=\"envBtnWrapper\" (click)=\"toggleBtn('sunshine')\" [ngSwitch]=\"environmentSnapshot.sunshine\">\n        <div *ngSwitchCase='true' class=\"envBtn active\">\n          <img src=\"./images/env_btn/env_sun_on.png\"></div>\n        <div *ngSwitchCase='false' class=\"envBtn\">\n          <img src=\"./images/env_btn/env_sun.png\"></div>\n        <p class=\"imgDescription\">Sunshine</p>\n      </div>\n      <div class=\"envBtnWrapper\" (click)=\"toggleBtn('wind')\" [ngSwitch]=\"environmentSnapshot.wind\">\n        <div *ngSwitchCase='true' class=\"envBtn active\">\n          <img src=\"./images/env_btn/env_wind_on.png\"></div>\n        <div *ngSwitchCase='false' class=\"envBtn\">\n          <img src=\"./images/env_btn/env_wind.png\"></div>\n        <p class=\"imgDescription\">Wind</p>\n      </div>\n    </div>\n  </div>\n  ",
            styles: ["\n    @media (max-width: 736px) {\n      .envBtns {\n        display: none;\n      }\n    }\n    .envBtnWrapper {\n      display: inline-block;\n      background: transparent;\n      margin-left: 15px;\n    }\n    .envBtn {\n      background-color: #29b0ae;\n      border: none;\n      width: 64px;\n      height: 64px;\n      padding: 10px;\n      position: relative;\n      text-align: center;\n      vertical-align: middle;\n      text-decoration: uppercase;\n      color: #fff;\n      background-image: linear-gradient(bottom, rgb(41,144,176) 0%, rgb(113,222,220) 100%);\n      background-image: -o-linear-gradient(bottom, rgb(41,144,176) 0%, rgb(113,222,220) 100%);\n      background-image: -moz-linear-gradient(bottom, rgb(41,144,176) 0%, rgb(113,222,220) 100%);\n      background-image: -webkit-linear-gradient(bottom, rgb(41,144,176) 0%, rgb(113,222,220) 100%);\n      background-image: -ms-linear-gradient(bottom, rgb(41,144,176) 0%, rgb(113,222,220) 100%);\n      background-image: -webkit-gradient(\n      linear,\n      left bottom,\n      left top,\n      color-stop(0, rgb(41,144,176)),\n      color-stop(1, rgb(113,222,220))\n      );\n      -webkit-box-shadow: inset 0px 1px 0px #71dedc, 0px 6px 0px #164f60;\n      -moz-box-shadow: inset 0px 1px 0px #71dedc, 0px 6px 0px #164f60;\n      -o-box-shadow: inset 0px 1px 0px #71dedc, 0px 6px 0px #164f60;\n      box-shadow: inset 0px 1px 0px #71dedc, 0px 6px 0px #164f60;\n      -webkit-border-radius: 5px;\n      -moz-border-radius: 5px;\n      -o-border-radius: 5px;\n      border-radius: 5px;\n    }\n    .envBtn.active, .envBtn:active {\n      color: #2990b0;\n      text-shadow: 0px 1px 1px rgba(255,255,255,0.3);\n      background: rgb(41,144,176);\n      -webkit-box-shadow: inset 0px 1px 0px #71dedc, inset 0px -1px 0px #164f60;\n      -moz-box-shadow: inset 0px 1px 0px #71dedc, inset 0px -1px 0px #164f60;\n      -o-box-shadow: inset 0px 1px 0px #71dedc, inset 0px -1px 0px #164f60;\n      box-shadow: inset 0px 1px 0px #71dedc, inset 0px -1px 0px #164f60;\n      top: 2px;\n    }\n    .envBtn img {\n      width: 100%;\n      height: 100%;\n    }\n    .envBtnWrapper .imgDescription {\n      position: absolute;\n      background: transparent;\n      padding-top: 2px;\n      color: #fff;\n      text-transform: uppercase;\n      visibility: hidden;\n      opacity: 0;\n      -webkit-transition: visibility opacity 0.2s;\n      transition: visibility opacity 0.2s;\n    }\n    .envBtnWrapper:hover .imgDescription {\n      visibility: visible;\n      opacity: 1;\n    }\n  "],
            directives: [common_1.NgSwitch, common_1.NgSwitchCase, common_1.NgSwitchDefault]
        }), 
        __metadata('design:paramtypes', [angularfire2_1.AngularFire, core_1.Renderer])
    ], EnvironmentComponent);
    return EnvironmentComponent;
}());
exports.EnvironmentComponent = EnvironmentComponent;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVudmlyb25tZW50L2Vudmlyb25tZW50LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEscUJBQTRDLGVBQWUsQ0FBQyxDQUFBO0FBQzVELHVCQUFzRCxpQkFBaUIsQ0FBQyxDQUFBO0FBQ3hFLDZCQUFtRCxjQUFjLENBQUMsQ0FBQTtBQXNKbEU7SUFnQkUsOEJBQVksRUFBYyxFQUFFLFFBQWtCO1FBaEJoRCxpQkF5TkM7UUF4TUcsSUFBSSxDQUFDLEdBQUcsR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQztRQUNoQyxJQUFJLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEdBQUcsR0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBQyxnQkFBZ0IsRUFBQyxFQUFDLGdCQUFnQixFQUFDLElBQUksRUFBQyxDQUFDLENBQUM7UUFDMUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsVUFBQSxRQUFRO1lBQzNCLEtBQUksQ0FBQyxtQkFBbUIsR0FBRyxRQUFRLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDNUMsQ0FBQyxDQUFDLENBQUM7UUFDSCxJQUFJLENBQUMsV0FBVyxHQUFHLEVBQUUsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEdBQUcsR0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBQyxzQkFBc0IsQ0FBQyxDQUFDO1FBQzlGLElBQUksQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsR0FBRyxHQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFDLFVBQVUsRUFBQyxFQUFDLGdCQUFnQixFQUFDLElBQUksRUFBQyxDQUFDLENBQUM7UUFD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QyxjQUFjLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLEdBQUcsUUFBUSxHQUFHLEtBQUssQ0FBQyxDQUFDO1lBQ2hGLElBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQztRQUNqRSxDQUFDO1FBQ0QsRUFBRSxDQUFBLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsV0FBVyxJQUFJLFNBQVMsQ0FBQyxDQUFBLENBQUM7WUFDeEQsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLEdBQUcsUUFBUSxDQUFDLEdBQUMsQ0FBQyxDQUFDLENBQUM7WUFDL0UsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxRQUFRLENBQUMsR0FBRyxLQUFLLENBQUMsR0FBRyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2xHLElBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxHQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQy9FLElBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFDLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxLQUFLLEdBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNqRyxDQUFDO1FBQ0QsRUFBRSxDQUFBLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsV0FBVyxJQUFJLFlBQVksQ0FBQyxDQUFBLENBQUM7WUFDM0QsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMs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LENBQUMsR0FBRyxJQUFJLElBQUksSUFBSSxHQUFHLElBQUksV0FBVyxDQUFDLENBQUMsQ0FBQztZQUN0QyxJQUFJLENBQUMsaUJBQWlCLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDdEMsQ0FBQztRQUVELEVBQUUsQ0FBQyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksR0FBRyxJQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDakMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ2pDLENBQUM7UUFFRCxFQUFFLENBQUMsQ0FBQyxHQUFHLElBQUksSUFBSSxJQUFJLEdBQUcsSUFBSSxVQUFVLENBQUMsQ0FBQyxDQUFDO1lBQ3JDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUNyQyxDQUFDO1FBRUQsRUFBRSxDQUFDLENBQUMsR0FBRyxJQUFJLElBQUksSUFBSSxHQUFHLElBQUksTUFBTSxDQUFDLENBQUMsQ0FBQztZQUNqQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDakMsQ0FBQztJQUNILENBQUM7SUE1V0g7UUFBQyxnQkFBUyxDQUFDO1lBQ1QsUUFBUSxFQUFFLGFBQWE7WUFDdkIsUUFBUSxFQUFFLGkrR0FxRVQ7WUFDRCxNQUFNLEVBQUUsQ0FBQyxvL0VBd0VSLENBQUM7WUFDRixVQUFVLEVBQUUsQ0FBQyxpQkFBUSxFQUFFLHFCQUFZLEVBQUUsd0JBQWUsQ0FBQztTQUN0RCxDQUFDOzs0QkFBQTtJQTJORiwyQkFBQztBQUFELENBek5BLEFBeU5DLElBQUE7QUF6TlksNEJBQW9CLHVCQXlOaEMsQ0FBQSIsImZpbGUiOiJlbnZpcm9ubWVudC9lbnZpcm9ubWVudC5jb21wb25lbnQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0NvbXBvbmVudCxSZW5kZXJlcixFbGVtZW50UmVmfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHtOZ1N3aXRjaCwgTmdTd2l0Y2hDYXNlLCBOZ1N3aXRjaERlZmF1bHR9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XHJcbmltcG9ydCB7QW5ndWxhckZpcmUsRmlyZWJhc2VPYmplY3RPYnNlcnZhYmxlfSBmcm9tICdhbmd1bGFyZmlyZTInO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdlbnZpcm9ubWVudCcsXHJcbiAgdGVtcGxhdGU6IGBcclxuICA8IS0tXHJcbiAgPGRpdiAqbmdJZj1cInNuYXBzaG90XCI+XHJcbiAgICA8cD5SYWluOiB7e3NuYXBzaG90LnJhaW59fTwvcD5cclxuICAgIDxidXR0b24gKGNsaWNrKT1cImNoYW5nZUVudmlyb25tZW50KCdyYWluJylcIj5DaGFuZ2UgUmFpbjwvYnV0dG9uPlxyXG4gICAgPHA+Rm9nOiB7e3NuYXBzaG90LmZvZ319PC9wPlxyXG4gICAgPGJ1dHRvbiAoY2xpY2spPVwiY2hhbmdlRW52aXJvbm1lbnQoJ2ZvZycpXCI+Q2hhbmdlIEZvZzwvYnV0dG9uPlxyXG4gICAgPHA+TGlnaHRuaW5nOiB7e3NuYXBzaG90LmxpZ2h0bmluZ319PC9wPlxyXG4gICAgPGJ1dHRvbiAoY2xpY2spPVwiY2hhbmdlRW52aXJvbm1lbnQoJ2xpZ2h0bmluZycpXCI+Q2hhbmdlIExpZ2h0bmluZzwvYnV0dG9uPlxyXG4gICAgPHA+U3Vuc2hpbmU6IHt7c25hcHNob3Quc3Vuc2hpbmV9fTwvcD5cclxuICAgIDxidXR0b24gKGNsaWNrKT1cImNoYW5nZUVudmlyb25tZW50KCdzdW5zaGluZScpXCI+Q2hhbmdlIFN1bnNoaW5lPC9idXR0b24+XHJcbiAgICA8cD5IYWlsOiB7e3NuYXBzaG90LmhhaWx9fTwvcD5cclxuICAgIDxidXR0b24gKGNsaWNrKT1cImNoYW5nZUVudmlyb25tZW50KCdoYWlsJylcIj5DaGFuZ2UgSGFpbDwvYnV0dG9uPlxyXG4gICAgPHA+V2luZDoge3tzbmFwc2hvdC53aW5kfX08L3A+XHJcbiAgICA8YnV0dG9uIChjbGljayk9XCJjaGFuZ2VFbnZpcm9ubWVudCgnd2luZCcpXCI+Q2hhbmdlIFdpbmQ8L2J1dHRvbj5cclxuICA8L2Rpdj5cclxuICAvLy0tPlxyXG5cclxuICA8ZGl2ICpuZ0lmPVwiZW52aXJvbm1lbnRTbmFwc2hvdFwiIGNsYXNzPVwiY29udGFpbmVyXCI+XHJcbiAgICA8ZGl2IGNsYXNzPVwiY29sLXNtLTYgcHVsbC1sZWZ0XCI+XHJcbiAgICAgIDxwPlxyXG4gICAgICAgIFRvIHBsYXksIHByZXNzIGtleSB0byB0dXJuIG9uL29mZjo8YnI+XHJcbiAgICAgICAgW0FdIEZPRzsgW1NdIEhBSUw7IFtEXSBMSUdIVE5JTkc7IFtGXSBSQUlOOyBbR10gU1VOU0hJTkU7IFtIXSBXSU5ELjwvcD5cclxuICAgIDwvZGl2PlxyXG4gICAgPGRpdiBjbGFzcz1cImNvbC1zbS02IHB1bGwtcmlnaHQgZW52QnRuc1wiICpuZ0lmPVwiZW52aXJvbm1lbnRcIj5cclxuICAgICAgPGRpdiBjbGFzcz1cImVudkJ0bldyYXBwZXJcIiAoY2xpY2spPVwidG9nZ2xlQnRuKCdmb2cnKVwiIFtuZ1N3aXRjaF09XCJlbnZpcm9ubWVudFNuYXBzaG90LmZvZ1wiPlxyXG4gICAgICAgIDxkaXYgKm5nU3dpdGNoQ2FzZT0ndHJ1ZScgY2xhc3M9XCJlbnZCdG4gYWN0aXZlXCI+XHJcbiAgICAgICAgICA8aW1nIHNyYz1cIi4vaW1hZ2VzL2Vudl9idG4vZW52X2ZvZ19vbi5wbmdcIj48L2Rpdj5cclxuICAgICAgICA8ZGl2ICpuZ1N3aXRjaENhc2U9J2ZhbHNlJyBjbGFzcz1cImVudkJ0blwiPlxyXG4gICAgICAgICAgPGltZyBzcmM9XCIuL2ltYWdlcy9lbnZfYnRuL2Vudl9mb2cucG5nXCI+PC9kaXY+XHJcbiAgICAgICAgPHAgY2xhc3M9XCJpbWdEZXNjcmlwdGlvblwiPkZvZzwvcD5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJlbnZCdG5XcmFwcGVyXCIgKGNsaWNrKT1cInRvZ2dsZUJ0bignaGFpbCcpXCIgW25nU3dpdGNoXT1cImVudmlyb25tZW50U25hcHNob3QuaGFpbFwiPlxyXG4gICAgICAgIDxkaXYgKm5nU3dpdGNoQ2FzZT0ndHJ1ZScgY2xhc3M9XCJlbnZCdG4gYWN0aXZlXCI+XHJcbiAgICAgICAgICA8aW1nIHNyYz1cIi4vaW1hZ2VzL2Vudl9idG4vZW52X2hhaWxfb24ucG5nXCI+PC9kaXY+XHJcbiAgICAgICAgPGRpdiAqbmdTd2l0Y2hDYXNlPSdmYWxzZScgY2xhc3M9XCJlbnZCdG5cIj5cclxuICAgICAgICAgIDxpbWcgc3JjPVwiLi9pbWFnZXMvZW52X2J0bi9lbnZfaGFpbC5wbmdcIj48L2Rpdj5cclxuICAgICAgICA8cCBjbGFzcz1cImltZ0Rlc2NyaXB0aW9uXCI+SGFpbDwvcD5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJlbnZCdG5XcmFwcGVyXCIgKGNsaWNrKT1cInRvZ2dsZUJ0bignbGlnaHRuaW5nJylcIiBbbmdTd2l0Y2hdPVwiZW52aXJvbm1lbnRTbmFwc2hvdC5saWdodG5pbmdcIj5cclxuICAgICAgICA8ZGl2ICpuZ1N3aXRjaENhc2U9J3RydWUnIGNsYXNzPVwiZW52QnRuIGFjdGl2ZVwiPlxyXG4gICAgICAgICAgPGltZyBzcmM9XCIuL2ltYWdlcy9lbnZfYnRuL2Vudl9saWdodG5pbmdfb24ucG5nXCI+PC9kaXY+XHJcbiAgICAgICAgPGRpdiAqbmdTd2l0Y2hDYXNlPSdmYWxzZScgY2xhc3M9XCJlbnZCdG5cIj5cclxuICAgICAgICAgIDxpbWcgc3JjPVwiLi9pbWFnZXMvZW52X2J0bi9lbnZfbGlnaHRuaW5nLnBuZ1wiPjwvZGl2PlxyXG4gICAgICAgIDxwIGNsYXNzPVwiaW1nRGVzY3JpcHRpb25cIj5MaWdodG5pbmc8L3A+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzPVwiZW52QnRuV3JhcHBlclwiIChjbGljayk9XCJ0b2dnbGVCdG4oJ3JhaW4nKVwiIFtuZ1N3aXRjaF09XCJlbnZpcm9ubWVudFNuYXBzaG90LnJhaW5cIj5cclxuICAgICAgICA8ZGl2ICpuZ1N3aXRjaENhc2U9J3RydWUnIGNsYXNzPVwiZW52QnRuIGFjdGl2ZVwiPlxyXG4gICAgICAgICAgPGltZyBzcmM9XCIuL2ltYWdlcy9lbnZfYnRuL2Vudl9yYWluX29uLnBuZ1wiPjwvZGl2PlxyXG4gICAgICAgIDxkaXYgKm5nU3dpdGNoQ2FzZT0nZmFsc2UnIGNsYXNzPVwiZW52QnRuXCI+XHJcbiAgICAgICAgICA8aW1nIHNyYz1cIi4vaW1hZ2VzL2Vudl9idG4vZW52X3JhaW4ucG5nXCI+PC9kaXY+XHJcbiAgICAgICAgPHAgY2xhc3M9XCJpbWdEZXNjcmlwdGlvblwiPlJhaW48L3A+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzPVwiZW52QnRuV3JhcHBlclwiIChjbGljayk9XCJ0b2dnbGVCdG4oJ3N1bnNoaW5lJylcIiBbbmdTd2l0Y2hdPVwiZW52aXJvbm1lbnRTbmFwc2hvdC5zdW5zaGluZVwiPlxyXG4gICAgICAgIDxkaXYgKm5nU3dpdGNoQ2FzZT0ndHJ1ZScgY2xhc3M9XCJlbnZCdG4gYWN0aXZlXCI+XHJcbiAgICAgICAgICA8aW1nIHNyYz1cIi4vaW1hZ2VzL2Vudl9idG4vZW52X3N1bl9vbi5wbmdcIj48L2Rpdj5cclxuICAgICAgICA8ZGl2ICpuZ1N3aXRjaENhc2U9J2ZhbHNlJyBjbGFzcz1cImVudkJ0blwiPlxyXG4gICAgICAgICAgPGltZyBzcmM9XCIuL2ltYWdlcy9lbnZfYnRuL2Vudl9zdW4ucG5nXCI+PC9kaXY+XHJcbiAgICAgICAgPHAgY2xhc3M9XCJpbWdEZXNjcmlwdGlvblwiPlN1bnNoaW5lPC9wPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzcz1cImVudkJ0bldyYXBwZXJcIiAoY2xpY2spPVwidG9nZ2xlQnRuKCd3aW5kJylcIiBbbmdTd2l0Y2hdPVwiZW52aXJvbm1lbnRTbmFwc2hvdC53aW5kXCI+XHJcbiAgICAgICAgPGRpdiAqbmdTd2l0Y2hDYXNlPSd0cnVlJyBjbGFzcz1cImVudkJ0biBhY3RpdmVcIj5cclxuICAgICAgICAgIDxpbWcgc3JjPVwiLi9pbWFnZXMvZW52X2J0bi9lbnZfd2luZF9vbi5wbmdcIj48L2Rpdj5cclxuICAgICAgICA8ZGl2ICpuZ1N3aXRjaENhc2U9J2ZhbHNlJyBjbGFzcz1cImVudkJ0blwiPlxyXG4gICAgICAgICAgPGltZyBzcmM9XCIuL2ltYWdlcy9lbnZfYnRuL2Vudl93aW5kLnBuZ1wiPjwvZGl2PlxyXG4gICAgICAgIDxwIGNsYXNzPVwiaW1nRGVzY3JpcHRpb25cIj5XaW5kPC9wPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gIDwvZGl2PlxyXG4gIGAsXHJcbiAgc3R5bGVzOiBbYFxyXG4gICAgQG1lZGlhIChtYXgtd2lkdGg6IDczNnB4KSB7XHJcbiAgICAgIC5lbnZCdG5zIHtcclxuICAgICAgICBkaXNwbGF5OiBub25lO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAuZW52QnRuV3JhcHBlciB7XHJcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XHJcbiAgICAgIG1hcmdpbi1sZWZ0OiAxNXB4O1xyXG4gICAgfVxyXG4gICAgLmVudkJ0biB7XHJcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICMyOWIwYWU7XHJcbiAgICAgIGJvcmRlcjogbm9uZTtcclxuICAgICAgd2lkdGg6IDY0cHg7XHJcbiAgICAgIGhlaWdodDogNjRweDtcclxuICAgICAgcGFkZGluZzogMTBweDtcclxuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XHJcbiAgICAgIHRleHQtZGVjb3JhdGlvbjogdXBwZXJjYXNlO1xyXG4gICAgICBjb2xvcjogI2ZmZjtcclxuICAgICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KGJvdHRvbSwgcmdiKDQxLDE0NCwxNzYpIDAlLCByZ2IoMTEzLDIyMiwyMjApIDEwMCUpO1xyXG4gICAgICBiYWNrZ3JvdW5kLWltYWdlOiAtby1saW5lYXItZ3JhZGllbnQoYm90dG9tLCByZ2IoNDEsMTQ0LDE3NikgMCUsIHJnYigxMTMsMjIyLDIyMCkgMTAwJSk7XHJcbiAgICAgIGJhY2tncm91bmQtaW1hZ2U6IC1tb3otbGluZWFyLWdyYWRpZW50KGJvdHRvbSwgcmdiKDQxLDE0NCwxNzYpIDAlLCByZ2IoMTEzLDIyMiwyMjApIDEwMCUpO1xyXG4gICAgICBiYWNrZ3JvdW5kLWltYWdlOiAtd2Via2l0LWxpbmVhci1ncmFkaWVudChib3R0b20sIHJnYig0MSwxNDQsMTc2KSAwJSwgcmdiKDExMywyMjIsMjIwKSAxMDAlKTtcclxuICAgICAgYmFja2dyb3VuZC1pbWFnZTogLW1zLWxpbmVhci1ncmFkaWVudChib3R0b20sIHJnYig0MSwxNDQsMTc2KSAwJSwgcmdiKDExMywyMjIsMjIwKSAxMDAlKTtcclxuICAgICAgYmFja2dyb3VuZC1pbWFnZTogLXdlYmtpdC1ncmFkaWVudChcclxuICAgICAgbGluZWFyLFxyXG4gICAgICBsZWZ0IGJvdHRvbSxcclxuICAgICAgbGVmdCB0b3AsXHJcbiAgICAgIGNvbG9yLXN0b3AoMCwgcmdiKDQxLDE0NCwxNzYpKSxcclxuICAgICAgY29sb3Itc3RvcCgxLCByZ2IoMTEzLDIyMiwyMjApKVxyXG4gICAgICApO1xyXG4gICAgICAtd2Via2l0LWJveC1zaGFkb3c6IGluc2V0IDBweCAxcHggMHB4ICM3MWRlZGMsIDBweCA2cHggMHB4ICMxNjRmNjA7XHJcbiAgICAgIC1tb3otYm94LXNoYWRvdzogaW5zZXQgMHB4IDFweCAwcHggIzcxZGVkYywgMHB4IDZweCAwcHggIzE2NGY2MDtcclxuICAgICAgLW8tYm94LXNoYWRvdzogaW5zZXQgMHB4IDFweCAwcHggIzcxZGVkYywgMHB4IDZweCAwcHggIzE2NGY2MDtcclxuICAgICAgYm94LXNoYWRvdzogaW5zZXQgMHB4IDFweCAwcHggIzcxZGVkYywgMHB4IDZweCAwcHggIzE2NGY2MDtcclxuICAgICAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgICAgIC1tb3otYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gICAgICAtby1ib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgICAgIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICAgIH1cclxuICAgIC5lbnZCdG4uYWN0aXZlLCAuZW52QnRuOmFjdGl2ZSB7XHJcbiAgICAgIGNvbG9yOiAjMjk5MGIwO1xyXG4gICAgICB0ZXh0LXNoYWRvdzogMHB4IDFweCAxcHggcmdiYSgyNTUsMjU1LDI1NSwwLjMpO1xyXG4gICAgICBiYWNrZ3JvdW5kOiByZ2IoNDEsMTQ0LDE3Nik7XHJcbiAgICAgIC13ZWJraXQtYm94LXNoYWRvdzogaW5zZXQgMHB4IDFweCAwcHggIzcxZGVkYywgaW5zZXQgMHB4IC0xcHggMHB4ICMxNjRmNjA7XHJcbiAgICAgIC1tb3otYm94LXNoYWRvdzogaW5zZXQgMHB4IDFweCAwcHggIzcxZGVkYywgaW5zZXQgMHB4IC0xcHggMHB4ICMxNjRmNjA7XHJcbiAgICAgIC1vLWJveC1zaGFkb3c6IGluc2V0IDBweCAxcHggMHB4ICM3MWRlZGMsIGluc2V0IDBweCAtMXB4IDBweCAjMTY0ZjYwO1xyXG4gICAgICBib3gtc2hhZG93OiBpbnNldCAwcHggMXB4IDBweCAjNzFkZWRjLCBpbnNldCAwcHggLTFweCAwcHggIzE2NGY2MDtcclxuICAgICAgdG9wOiAycHg7XHJcbiAgICB9XHJcbiAgICAuZW52QnRuIGltZyB7XHJcbiAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICB9XHJcbiAgICAuZW52QnRuV3JhcHBlciAuaW1nRGVzY3JpcHRpb24ge1xyXG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xyXG4gICAgICBwYWRkaW5nLXRvcDogMnB4O1xyXG4gICAgICBjb2xvcjogI2ZmZjtcclxuICAgICAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcclxuICAgICAgdmlzaWJpbGl0eTogaGlkZGVuO1xyXG4gICAgICBvcGFjaXR5OiAwO1xyXG4gICAgICAtd2Via2l0LXRyYW5zaXRpb246IHZpc2liaWxpdHkgb3BhY2l0eSAwLjJzO1xyXG4gICAgICB0cmFuc2l0aW9uOiB2aXNpYmlsaXR5IG9wYWNpdHkgMC4ycztcclxuICAgIH1cclxuICAgIC5lbnZCdG5XcmFwcGVyOmhvdmVyIC5pbWdEZXNjcmlwdGlvbiB7XHJcbiAgICAgIHZpc2liaWxpdHk6IHZpc2libGU7XHJcbiAgICAgIG9wYWNpdHk6IDE7XHJcbiAgICB9XHJcbiAgYF0sXHJcbiAgZGlyZWN0aXZlczogW05nU3dpdGNoLCBOZ1N3aXRjaENhc2UsIE5nU3dpdGNoRGVmYXVsdF1cclxufSlcclxuXHJcbmV4cG9ydCBjbGFzcyBFbnZpcm9ubWVudENvbXBvbmVudCB7XHJcbiAgb25PZmY6RmlyZWJhc2VPYmplY3RPYnNlcnZhYmxlPGFueT47XHJcbiAgZW52aXJvbm1lbnQ6RmlyZWJhc2VPYmplY3RPYnNlcnZhYmxlPGFueT47XHJcbiAgcGxheWVyczpGaXJlYmFzZU9iamVjdE9ic2VydmFibGU8YW55PjtcclxuICBVUkw6c3RyaW5nO1xyXG4gIGVudmlyb25tZW50U25hcHNob3Q6IHtcclxuICAgIGZvZzpib29sZWFuLFxyXG4gICAgaGFpbDpib29sZWFuLFxyXG4gICAgbGlnaHRuaW5nOmJvb2xlYW4sXHJcbiAgICByYWluOmJvb2xlYW4sXHJcbiAgICBzdW5zaGluZTpib29sZWFuLFxyXG4gICAgd2luZDpib29sZWFuLFxyXG4gIH07XHJcbiAgcGxheWVyc1NuYXBzaG90OiBhbnk7XHJcbiAgZ2V0S2V5OkZ1bmN0aW9uO1xyXG5cclxuICBjb25zdHJ1Y3RvcihhZjpBbmd1bGFyRmlyZSwgcmVuZGVyZXI6IFJlbmRlcmVyKXtcclxuICAgIHRoaXMuVVJMID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XHJcbiAgICB0aGlzLm9uT2ZmID0gYWYuZGF0YWJhc2Uub2JqZWN0KCcvJyt0aGlzLlVSTC5zcGxpdCgnL2dhbWUvJylbMV0rJy9HbG9iYWxzL09uT2ZmJyx7cHJlc2VydmVTbmFwc2hvdDp0cnVlfSk7XHJcbiAgICB0aGlzLm9uT2ZmLnN1YnNjcmliZShzbmFwc2hvdCA9PntcclxuICAgICAgdGhpcy5lbnZpcm9ubWVudFNuYXBzaG90ID0gc25hcHNob3QudmFsKCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuZW52aXJvbm1lbnQgPSBhZi5kYXRhYmFzZS5vYmplY3QoJy8nK3RoaXMuVVJMLnNwbGl0KCcvZ2FtZS8nKVsxXSsnL0dsb2JhbHMvRW52aXJvbm1lbnQnKTtcclxuICAgIHRoaXMucGxheWVycyA9IGFmLmRhdGFiYXNlLm9iamVjdCgnLycrdGhpcy5VUkwuc3BsaXQoJy9nYW1lLycpWzFdKycvUGxheWVycycse3ByZXNlcnZlU25hcHNob3Q6dHJ1ZX0pO1xyXG4gICAgdGhpcy5wbGF5ZXJzLnN1YnNjcmliZShzbmFwc2hvdCA9PntcclxuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QgPSBzbmFwc2hvdC52YWwoKTtcclxuICAgIH0pO1xyXG4gICAgLyogR2V0cyBrZXl1cCAqL1xyXG4gICAgdGhpcy5nZXRLZXkgPSByZW5kZXJlci5saXN0ZW5HbG9iYWwoJ2RvY3VtZW50JywgJ2tleXVwJywgKGV2ZW50KSA9PiB7XHJcbiAgICAgIHZhciBrZXkgPSBldmVudC5rZXlDb2RlO1xyXG4gICAgICB0aGlzLnRvZ2dsZUJ0bihrZXkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjaGFuZ2VFbnZpcm9ubWVudCh4KXtcclxuICAgIHZhciBhZXRoZXIgPSAxO1xyXG4gICAgdmFyIG1hdGVyaWFsID0gMTtcclxuICAgIHZhciBjaGFvcyA9IDE7XHJcbiAgICB2YXIgb3JkZXIgPSAxO1xyXG4gICAgc3dpdGNoKHgpe1xyXG4gICAgICBjYXNlICdyYWluJzpcclxuICAgICAgICBpZih0aGlzLmVudmlyb25tZW50U25hcHNob3QucmFpbj09dHJ1ZSl7XHJcbiAgICAgICAgICB0aGlzLm9uT2ZmLnVwZGF0ZSh7cmFpbjpmYWxzZX0pO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMub25PZmYudXBkYXRlKHtyYWluOnRydWV9KTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgY2FzZSAnZm9nJzpcclxuICAgICAgICAgIGlmKHRoaXMuZW52aXJvbm1lbnRTbmFwc2hvdC5mb2c9PXRydWUpe1xyXG4gICAgICAgICAgICB0aGlzLm9uT2ZmLnVwZGF0ZSh7Zm9nOmZhbHNlfSlcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLm9uT2ZmLnVwZGF0ZSh7Zm9nOnRydWV9KTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIGNhc2UgJ2xpZ2h0bmluZyc6XHJcbiAgICAgICAgaWYodGhpcy5lbnZpcm9ubWVudFNuYXBzaG90LmxpZ2h0bmluZz09dHJ1ZSl7XHJcbiAgICAgICAgICB0aGlzLm9uT2ZmLnVwZGF0ZSh7bGlnaHRuaW5nOmZhbHNlfSlcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLm9uT2ZmLnVwZGF0ZSh7bGlnaHRuaW5nOnRydWV9KTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgY2FzZSAnc3Vuc2hpbmUnOlxyXG4gICAgICAgIGlmKHRoaXMuZW52aXJvbm1lbnRTbmFwc2hvdC5zdW5zaGluZT09dHJ1ZSl7XHJcbiAgICAgICAgICB0aGlzLm9uT2ZmLnVwZGF0ZSh7c3Vuc2hpbmU6ZmFsc2V9KVxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMub25PZmYudXBkYXRlKHtzdW5zaGluZTp0cnVlfSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIGNhc2UgJ2hhaWwnOlxyXG4gICAgICAgIGlmKHRoaXMuZW52aXJvbm1lbnRTbmFwc2hvdC5oYWlsPT10cnVlKXtcclxuICAgICAgICAgIHRoaXMub25PZmYudXBkYXRlKHtoYWlsOmZhbHNlfSlcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLm9uT2ZmLnVwZGF0ZSh7aGFpbDp0cnVlfSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIGNhc2UgJ3dpbmQnOlxyXG4gICAgICAgIGlmKHRoaXMuZW52aXJvbm1lbnRTbmFwc2hvdC53aW5kPT10cnVlKXtcclxuICAgICAgICAgIHRoaXMub25PZmYudXBkYXRlKHt3aW5kOmZhbHNlfSlcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLm9uT2ZmLnVwZGF0ZSh7d2luZDp0cnVlfSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5lbnZpcm9ubWVudFNuYXBzaG90LnJhaW4gPT0gdHJ1ZSkge1xyXG4gICAgICAgIGNoYW9zICs9IDE7XHJcbiAgICAgICAgbWF0ZXJpYWwgKz0gMjtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmVudmlyb25tZW50U25hcHNob3QuZm9nID09IHRydWUpIHtcclxuICAgICAgICBhZXRoZXIgKz0gMjtcclxuICAgICAgICBvcmRlciArPSAxO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuZW52aXJvbm1lbnRTbmFwc2hvdC5saWdodG5pbmcgPT0gdHJ1ZSkge1xyXG4gICAgICAgIGFldGhlciArPSAxO1xyXG4gICAgICAgIGNoYW9zICs9IDI7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5lbnZpcm9ubWVudFNuYXBzaG90LnN1bnNoaW5lID09IHRydWUpIHtcclxuICAgICAgICBvcmRlciArPSAyO1xyXG4gICAgICAgIG1hdGVyaWFsICs9IDE7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5lbnZpcm9ubWVudFNuYXBzaG90LmhhaWwgPT0gdHJ1ZSkge1xyXG4gICAgICAgIGFldGhlciArPSAyO1xyXG4gICAgICAgIG1hdGVyaWFsICs9IDI7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5lbnZpcm9ubWVudFNuYXBzaG90LndpbmQgPT0gdHJ1ZSkge1xyXG4gICAgICAgIG9yZGVyICs9IDI7XHJcbiAgICAgICAgY2hhb3MgKz0gMjtcclxuICAgIH1cclxuICB0aGlzLmVudmlyb25tZW50LnNldCh7YWV0aGVyOmFldGhlcixtYXRlcmlhbDptYXRlcmlhbCxjaGFvczpjaGFvcyxvcmRlcjpvcmRlcn0pO1xyXG4gIHRoaXMuY2hhbmdlQ2hhbXBpb25TdGF0cyhhZXRoZXIsbWF0ZXJpYWwsY2hhb3Msb3JkZXIpO1xyXG4gIH1cclxuXHJcbiAgY2hhbmdlQ2hhbXBpb25TdGF0cyhhZXRoZXIsbWF0ZXJpYWwsY2hhb3Msb3JkZXIpe1xyXG4gICAgaWYodGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMS5wbGF5ZXJDbGFzcyA9PSAnSGlnaHdheW1hbicpe1xyXG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIxLnBoeXNpY2FsQXR0YWNrID0gTWF0aC5mbG9vcigoY2hhb3MgKiBtYXRlcmlhbCkgKyAxMCk7XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjEucGh5c2ljYWxEZWZlbnNlID0gTWF0aC5mbG9vcig1ICsgbWF0ZXJpYWwpO1xyXG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIxLnNwZWNpYWxBdHRhY2sgPSBNYXRoLmZsb29yKDIgKyAoMiAqIG9yZGVyKSk7XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjEuc3BlY2lhbERlZmVuc2UgPSBNYXRoLmZsb29yKDMgKyBjaGFvcyArIGFldGhlcik7XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjEuZGV4dGVyaXR5ID0gTWF0aC5mbG9vcigoKDEwICogYWV0aGVyKSArIG9yZGVyKSAvIG1hdGVyaWFsKTtcclxuICAgIH1cclxuICAgIGlmKHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjEucGxheWVyQ2xhc3MgPT0gJ0VsZW1lbnRhbGlzdCcpe1xyXG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIxLnBoeXNpY2FsQXR0YWNrID0gTWF0aC5mbG9vcig0ICsgYWV0aGVyICsgbWF0ZXJpYWwpO1xyXG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIxLnBoeXNpY2FsRGVmZW5zZSA9IE1hdGguZmxvb3IoMyArIG9yZGVyKTtcclxuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMS5zcGVjaWFsQXR0YWNrID0gTWF0aC5mbG9vcigoKDEyICsgYWV0aGVyKSAqIGNoYW9zKSAvIG9yZGVyKTtcclxuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMS5zcGVjaWFsRGVmZW5zZSA9IE1hdGguZmxvb3IoMTAgKyBtYXRlcmlhbCArIG9yZGVyKTtcclxuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMS5kZXh0ZXJpdHkgPSBNYXRoLmZsb29yKDMgKiBjaGFvcyk7XHJcbiAgICB9XHJcbiAgICBpZih0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIxLnBsYXllckNsYXNzID09IFwiUGFyYWdvblwiKXtcclxuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMS5waHlzaWNhbEF0dGFjayA9IE1hdGguZmxvb3IoKG9yZGVyICsgbWF0ZXJpYWwpKjIpO1xyXG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIxLnBoeXNpY2FsRGVmZW5zZSA9IE1hdGguZmxvb3IoKCg4ICogbWF0ZXJpYWwpICsgb3JkZXIpIC8gKGNoYW9zICogMikpO1xyXG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIxLnNwZWNpYWxBdHRhY2sgPSBNYXRoLmZsb29yKChhZXRoZXIgKiA2KS9tYXRlcmlhbCk7XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjEuc3BlY2lhbERlZmVuc2UgPSBNYXRoLmZsb29yKCgoNyAqIG1hdGVyaWFsKSArIGNoYW9zKSAvIChvcmRlcioyKSk7XHJcbiAgICB9XHJcbiAgICBpZih0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIyLnBsYXllckNsYXNzID09ICdIaWdod2F5bWFuJyl7XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjIucGh5c2ljYWxBdHRhY2sgPSBNYXRoLmZsb29yKChjaGFvcyAqIG1hdGVyaWFsKSArIDEwKTtcclxuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMi5waHlzaWNhbERlZmVuc2UgPSBNYXRoLmZsb29yKDUgKyBtYXRlcmlhbCk7XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjIuc3BlY2lhbEF0dGFjayA9IE1hdGguZmxvb3IoMiArICgyICogb3JkZXIpKTtcclxuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMi5zcGVjaWFsRGVmZW5zZSA9IE1hdGguZmxvb3IoMyArIGNoYW9zICsgYWV0aGVyKTtcclxuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMi5kZXh0ZXJpdHkgPSBNYXRoLmZsb29yKCgoMTAgKiBhZXRoZXIpICsgb3JkZXIpIC8gbWF0ZXJpYWwpO1xyXG4gICAgfVxyXG4gICAgaWYodGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMi5wbGF5ZXJDbGFzcyA9PSAnRWxlbWVudGFsaXN0Jyl7XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjIucGh5c2ljYWxBdHRhY2sgPSBNYXRoLmZsb29yKDQgKyBhZXRoZXIgKyBtYXRlcmlhbCk7XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjIucGh5c2ljYWxEZWZlbnNlID0gTWF0aC5mbG9vcigzICsgb3JkZXIpO1xyXG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIyLnNwZWNpYWxBdHRhY2sgPSBNYXRoLmZsb29yKCgoMTIgKyBhZXRoZXIpICogY2hhb3MpIC8gb3JkZXIpO1xyXG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIyLnNwZWNpYWxEZWZlbnNlID0gTWF0aC5mbG9vcigxMCArIG1hdGVyaWFsICsgb3JkZXIpO1xyXG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIyLmRleHRlcml0eSA9IE1hdGguZmxvb3IoMyAqIGNoYW9zKTtcclxuICAgIH1cclxuICAgIGlmKHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjIucGxheWVyQ2xhc3MgPT0gXCJQYXJhZ29uXCIpe1xyXG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIyLnBoeXNpY2FsQXR0YWNrID0gTWF0aC5mbG9vcigob3JkZXIgKyBtYXRlcmlhbCkqMik7XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjIucGh5c2ljYWxEZWZlbnNlID0gTWF0aC5mbG9vcigoKDggKiBtYXRlcmlhbCkgKyBvcmRlcikgLyAoY2hhb3MgKiAyKSk7XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjIuc3BlY2lhbEF0dGFjayA9IE1hdGguZmxvb3IoKGFldGhlciAqIDYpL21hdGVyaWFsKTtcclxuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMS5zcGVjaWFsRGVmZW5zZSA9IE1hdGguZmxvb3IoKCg3ICogbWF0ZXJpYWwpICsgY2hhb3MpIC8gKG9yZGVyKjIpKTtcclxuICAgIH1cclxuICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjEuYWN0aW9uID0gdGhpcy5BSVNlbGVjdEFjdGlvbih0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIxLHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjIpO1xyXG4gICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMi5hY3Rpb24gPSB0aGlzLkFJU2VsZWN0QWN0aW9uKHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjIsdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMSk7XHJcbiAgICB0aGlzLnBsYXllcnMudXBkYXRlKHRoaXMucGxheWVyc1NuYXBzaG90KTtcclxuICB9XHJcblxyXG4gIEFJU2VsZWN0QWN0aW9uKHBsYXllcixlbmVteSl7XHJcbiAgICB2YXIgYWN0aW9uID0gXCJcIjtcclxuICAgIHZhciBybmcgPSAoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKigxMDAgLSAwICsgMSkgKyAwKSk7XHJcbiAgICBpZiAoKHBsYXllci5waHlzaWNhbEF0dGFjayAtIGVuZW15LnBoeXNpY2FsRGVmZW5zZSkgPiAocGxheWVyLnNwZWNpYWxBdHRhY2sgLSBlbmVteS5zcGVjaWFsRGVmZW5zZSkpIHtcclxuICAgICAgICBpZiAocm5nIC0gKHBsYXllci5waHlzaWNhbEF0dGFjayAtIGVuZW15LnBoeXNpY2FsRGVmZW5zZSkgPD0gMCkge1xyXG4gICAgICAgICAgICBybmcgPSAxO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJuZyAtPSAocGxheWVyLnBoeXNpY2FsQXR0YWNrIC0gZW5lbXkucGh5c2ljYWxEZWZlbnNlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoKHBsYXllci5waHlzaWNhbEF0dGFjayAtIGVuZW15LnBoeXNpY2FsRGVmZW5zZSkgPCAocGxheWVyLnNwZWNpYWxBdHRhY2sgLSBlbmVteS5zcGVjaWFsRGVmZW5zZSkpIHtcclxuICAgICAgICBpZiAocm5nICsgKHBsYXllci5zcGVjaWFsQXR0YWNrIC0gZW5lbXkuc3BlY2lhbERlZmVuc2UpID49IDEwMCkge1xyXG4gICAgICAgICAgICBybmcgPSAxMDA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcm5nICs9IChwbGF5ZXIuc3BlY2lhbEF0dGFjayAtIGVuZW15LnNwZWNpYWxEZWZlbnNlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAocm5nIDw9IDMzKSB7XHJcbiAgICAgICAgcmV0dXJuIFwic3RyaWtlXCI7XHJcbiAgICB9XHJcbiAgICBpZiAocm5nID49IDY2KSB7XHJcbiAgICAgICAgcmV0dXJuXCJzcGVjaWFsXCI7XHJcbiAgICB9XHJcbiAgICBpZiAocm5nIDwgNjYgJiYgcm5nID4gMzMpIHtcclxuICAgICAgICByZXR1cm4gXCJkZWZlbmRcIjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHRvZ2dsZUJ0bihrZXkpIHtcclxuICAgIC8vIGFcclxuICAgIGlmIChrZXkgPT0gJzY1JyB8fCBrZXkgPT0gJ2ZvZycpIHtcclxuICAgICAgdGhpcy5jaGFuZ2VFbnZpcm9ubWVudCgnZm9nJyk7XHJcbiAgICB9XHJcbiAgICAvLyBzXHJcbiAgICBpZiAoa2V5ID09ICc4MycgfHwga2V5ID09ICdoYWlsJykge1xyXG4gICAgICB0aGlzLmNoYW5nZUVudmlyb25tZW50KCdoYWlsJyk7XHJcbiAgICB9XHJcbiAgICAvLyBkXHJcbiAgICBpZiAoa2V5ID09ICc2OCcgfHwga2V5ID09ICdsaWdodG5pbmcnKSB7XHJcbiAgICAgIHRoaXMuY2hhbmdlRW52aXJvbm1lbnQoJ2xpZ2h0bmluZycpO1xyXG4gICAgfVxyXG4gICAgLy8gZlxyXG4gICAgaWYgKGtleSA9PSAnNzAnIHx8IGtleSA9PSAncmFpbicpIHtcclxuICAgICAgdGhpcy5jaGFuZ2VFbnZpcm9ubWVudCgncmFpbicpO1xyXG4gICAgfVxyXG4gICAgLy8gZ1xyXG4gICAgaWYgKGtleSA9PSAnNzEnIHx8IGtleSA9PSAnc3Vuc2hpbmUnKSB7XHJcbiAgICAgIHRoaXMuY2hhbmdlRW52aXJvbm1lbnQoJ3N1bnNoaW5lJyk7XHJcbiAgICB9XHJcbiAgICAvLyBoXHJcbiAgICBpZiAoa2V5ID09ICc3MicgfHwga2V5ID09ICd3aW5kJykge1xyXG4gICAgICB0aGlzLmNoYW5nZUVudmlyb25tZW50KCd3aW5kJyk7XHJcbiAgICB9XHJcbiAgfVxyXG59Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
