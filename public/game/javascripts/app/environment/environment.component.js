"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var core_1 = require('@angular/core');
var common_1 = require('@angular/common');
var angularfire2_1 = require('angularfire2');
var EnvironmentComponent = (function () {
    function EnvironmentComponent(af, renderer) {
        var _this = this;
        this.URL = window.location.href;
        this.onOff = af.database.object('/' + this.URL.split('/game/')[1] + '/Globals/OnOff', { preserveSnapshot: true });
        this.onOff.subscribe(function (snapshot) {
            _this.environmentSnapshot = snapshot.val();
        });
        this.environment = af.database.object('/' + this.URL.split('/game/')[1] + '/Globals/Environment');
        this.players = af.database.object('/' + this.URL.split('/game/')[1] + '/Players', { preserveSnapshot: true });
        this.players.subscribe(function (snapshot) {
            _this.playersSnapshot = snapshot.val();
        });
        this.getKey = renderer.listenGlobal('document', 'keyup', function (event) {
            var key = event.keyCode;
            _this.toggleBtn(key);
        });
    }
    EnvironmentComponent.prototype.changeEnvironment = function (x) {
        var aether = 1;
        var material = 1;
        var chaos = 1;
        var order = 1;
        switch (x) {
            case 'rain':
                if (this.environmentSnapshot.rain == true) {
                    this.onOff.update({ rain: false });
                    break;
                }
                else {
                    this.onOff.update({ rain: true });
                    break;
                }
            case 'fog':
                if (this.environmentSnapshot.fog == true) {
                    this.onOff.update({ fog: false });
                    break;
                }
                else {
                    this.onOff.update({ fog: true });
                    break;
                }
            case 'lightning':
                if (this.environmentSnapshot.lightning == true) {
                    this.onOff.update({ lightning: false });
                    break;
                }
                else {
                    this.onOff.update({ lightning: true });
                    break;
                }
            case 'sunshine':
                if (this.environmentSnapshot.sunshine == true) {
                    this.onOff.update({ sunshine: false });
                    break;
                }
                else {
                    this.onOff.update({ sunshine: true });
                    break;
                }
            case 'hail':
                if (this.environmentSnapshot.hail == true) {
                    this.onOff.update({ hail: false });
                    break;
                }
                else {
                    this.onOff.update({ hail: true });
                    break;
                }
            case 'wind':
                if (this.environmentSnapshot.wind == true) {
                    this.onOff.update({ wind: false });
                    break;
                }
                else {
                    this.onOff.update({ wind: true });
                    break;
                }
        }
        if (this.environmentSnapshot.rain == true) {
            chaos += 1;
            material += 2;
        }
        if (this.environmentSnapshot.fog == true) {
            aether += 2;
            order += 1;
        }
        if (this.environmentSnapshot.lightning == true) {
            aether += 1;
            chaos += 2;
        }
        if (this.environmentSnapshot.sunshine == true) {
            order += 2;
            material += 1;
        }
        if (this.environmentSnapshot.hail == true) {
            aether += 2;
            material += 2;
        }
        if (this.environmentSnapshot.wind == true) {
            order += 2;
            chaos += 2;
        }
        this.environment.set({ aether: aether, material: material, chaos: chaos, order: order });
        this.changeChampionStats(aether, material, chaos, order);
    };
    EnvironmentComponent.prototype.changeChampionStats = function (aether, material, chaos, order) {
        if (this.playersSnapshot.player1.playerClass == 'Highwayman') {
            this.playersSnapshot.player1.physicalAttack = Math.floor((chaos * material) + 10);
            this.playersSnapshot.player1.physicalDefense = Math.floor(5 + material);
            this.playersSnapshot.player1.specialAttack = Math.floor(2 + (2 * order));
            this.playersSnapshot.player1.specialDefense = Math.floor(3 + chaos + aether);
            this.playersSnapshot.player1.dexterity = Math.floor(((10 * aether) + order) / material);
        }
        if (this.playersSnapshot.player1.playerClass == 'Elementalist') {
            this.playersSnapshot.player1.physicalAttack = Math.floor(4 + aether + material);
            this.playersSnapshot.player1.physicalDefense = Math.floor(3 + order);
            this.playersSnapshot.player1.specialAttack = Math.floor(((12 + aether) * chaos) / order);
            this.playersSnapshot.player1.specialDefense = Math.floor(10 + material + order);
            this.playersSnapshot.player1.dexterity = Math.floor(3 * chaos);
        }
        if (this.playersSnapshot.player1.playerClass == "Paragon") {
            this.playersSnapshot.player1.physicalAttack = Math.floor(order * 8);
            this.playersSnapshot.player1.physicalDefense = Math.floor(((8 * material) + order) / (chaos * 2));
            this.playersSnapshot.player1.specialAttack = Math.floor((aether * 6) / material);
            this.playersSnapshot.player1.specialDefense = Math.floor(((7 * material) + chaos) / (order * 2));
        }
        if (this.playersSnapshot.player2.playerClass == 'Highwayman') {
            this.playersSnapshot.player2.physicalAttack = Math.floor((chaos * material) + 10);
            this.playersSnapshot.player2.physicalDefense = Math.floor(5 + material);
            this.playersSnapshot.player2.specialAttack = Math.floor(2 + (2 * order));
            this.playersSnapshot.player2.specialDefense = Math.floor(3 + chaos + aether);
            this.playersSnapshot.player2.dexterity = Math.floor(((10 * aether) + order) / material);
        }
        if (this.playersSnapshot.player2.playerClass == 'Elementalist') {
            this.playersSnapshot.player2.physicalAttack = Math.floor(4 + aether + material);
            this.playersSnapshot.player2.physicalDefense = Math.floor(3 + order);
            this.playersSnapshot.player2.specialAttack = Math.floor(((12 + aether) * chaos) / order);
            this.playersSnapshot.player2.specialDefense = Math.floor(10 + material + order);
            this.playersSnapshot.player2.dexterity = Math.floor(3 * chaos);
        }
        if (this.playersSnapshot.player2.playerClass == "Paragon") {
            this.playersSnapshot.player2.physicalAttack = Math.floor(order * 8);
            this.playersSnapshot.player2.physicalDefense = Math.floor(((8 * material) + order) / (chaos * 2));
            this.playersSnapshot.player2.specialAttack = Math.floor((aether * 6) / material);
            this.playersSnapshot.player1.specialDefense = Math.floor(((7 * material) + chaos) / (order * 2));
        }
        this.playersSnapshot.player1.action = this.AISelectAction(this.playersSnapshot.player1, this.playersSnapshot.player2);
        this.playersSnapshot.player2.action = this.AISelectAction(this.playersSnapshot.player2, this.playersSnapshot.player1);
        this.players.update(this.playersSnapshot);
    };
    EnvironmentComponent.prototype.AISelectAction = function (player, enemy) {
        var action = "";
        var rng = (Math.floor(Math.random() * (100 - 0 + 1) + 0));
        if ((player.physicalAttack - enemy.physicalDefense) > (player.specialAttack - enemy.specialDefense)) {
            if (rng - (player.physicalAttack - enemy.physicalDefense) <= 0) {
                rng = 1;
            }
            else {
                rng -= (player.physicalAttack - enemy.physicalDefense);
            }
        }
        if ((player.physicalAttack - enemy.physicalDefense) < (player.specialAttack - enemy.specialDefense)) {
            if (rng + (player.specialAttack - enemy.specialDefense) >= 100) {
                rng = 100;
            }
            else {
                rng += (player.specialAttack - enemy.specialDefense);
            }
        }
        if (rng <= 33) {
            return "strike";
        }
        if (rng >= 66) {
            return "special";
        }
        if (rng < 66 && rng > 33) {
            return "defend";
        }
    };
    EnvironmentComponent.prototype.toggleBtn = function (key) {
        if (key == '65' || key == 'fog') {
            this.changeEnvironment('fog');
        }
        if (key == '83' || key == 'hail') {
            this.changeEnvironment('hail');
        }
        if (key == '68' || key == 'lightning') {
            this.changeEnvironment('lightning');
        }
        if (key == '70' || key == 'rain') {
            this.changeEnvironment('rain');
        }
        if (key == '71' || key == 'sunshine') {
            this.changeEnvironment('sunshine');
        }
        if (key == '72' || key == 'wind') {
            this.changeEnvironment('wind');
        }
    };
    EnvironmentComponent = __decorate([
        core_1.Component({
            selector: 'environment',
            template: "\n  <!--\n  <div *ngIf=\"snapshot\">\n    <p>Rain: {{snapshot.rain}}</p>\n    <button (click)=\"changeEnvironment('rain')\">Change Rain</button>\n    <p>Fog: {{snapshot.fog}}</p>\n    <button (click)=\"changeEnvironment('fog')\">Change Fog</button>\n    <p>Lightning: {{snapshot.lightning}}</p>\n    <button (click)=\"changeEnvironment('lightning')\">Change Lightning</button>\n    <p>Sunshine: {{snapshot.sunshine}}</p>\n    <button (click)=\"changeEnvironment('sunshine')\">Change Sunshine</button>\n    <p>Hail: {{snapshot.hail}}</p>\n    <button (click)=\"changeEnvironment('hail')\">Change Hail</button>\n    <p>Wind: {{snapshot.wind}}</p>\n    <button (click)=\"changeEnvironment('wind')\">Change Wind</button>\n  </div>\n  //-->\n\n  <div *ngIf=\"environmentSnapshot\" class=\"container\">\n    <div class=\"col-sm-6 pull-left\">\n      <p>\n        To play, press key to turn on/off:<br>\n        [A] FOG; [S] HAIL; [D] LIGHTNING; [F] RAIN; [G] SUNSHINE; [H] WIND.</p>\n    </div>\n    <div class=\"col-sm-6 pull-right envBtns\" *ngIf=\"environment\">\n      <div class=\"envBtnWrapper\" (click)=\"toggleBtn('fog')\" [ngSwitch]=\"environmentSnapshot.fog\">\n        <div *ngSwitchCase='true' class=\"envBtn active\">\n          <img src=\"./images/env_btn/env_fog_on.png\"></div>\n        <div *ngSwitchCase='false' class=\"envBtn\">\n          <img src=\"./images/env_btn/env_fog.png\"></div>\n        <p class=\"imgDescription\">Fog</p>\n      </div>\n      <div class=\"envBtnWrapper\" (click)=\"toggleBtn('hail')\" [ngSwitch]=\"environmentSnapshot.hail\">\n        <div *ngSwitchCase='true' class=\"envBtn active\">\n          <img src=\"./images/env_btn/env_hail_on.png\"></div>\n        <div *ngSwitchCase='false' class=\"envBtn\">\n          <img src=\"./images/env_btn/env_hail.png\"></div>\n        <p class=\"imgDescription\">Hail</p>\n      </div>\n      <div class=\"envBtnWrapper\" (click)=\"toggleBtn('lightning')\" [ngSwitch]=\"environmentSnapshot.lightning\">\n        <div *ngSwitchCase='true' class=\"envBtn active\">\n          <img src=\"./images/env_btn/env_lightning_on.png\"></div>\n        <div *ngSwitchCase='false' class=\"envBtn\">\n          <img src=\"./images/env_btn/env_lightning.png\"></div>\n        <p class=\"imgDescription\">Lightning</p>\n      </div>\n      <div class=\"envBtnWrapper\" (click)=\"toggleBtn('rain')\" [ngSwitch]=\"environmentSnapshot.rain\">\n        <div *ngSwitchCase='true' class=\"envBtn active\">\n          <img src=\"./images/env_btn/env_rain_on.png\"></div>\n        <div *ngSwitchCase='false' class=\"envBtn\">\n          <img src=\"./images/env_btn/env_rain.png\"></div>\n        <p class=\"imgDescription\">Rain</p>\n      </div>\n      <div class=\"envBtnWrapper\" (click)=\"toggleBtn('sunshine')\" [ngSwitch]=\"environmentSnapshot.sunshine\">\n        <div *ngSwitchCase='true' class=\"envBtn active\">\n          <img src=\"./images/env_btn/env_sun_on.png\"></div>\n        <div *ngSwitchCase='false' class=\"envBtn\">\n          <img src=\"./images/env_btn/env_sun.png\"></div>\n        <p class=\"imgDescription\">Sunshine</p>\n      </div>\n      <div class=\"envBtnWrapper\" (click)=\"toggleBtn('wind')\" [ngSwitch]=\"environmentSnapshot.wind\">\n        <div *ngSwitchCase='true' class=\"envBtn active\">\n          <img src=\"./images/env_btn/env_wind_on.png\"></div>\n        <div *ngSwitchCase='false' class=\"envBtn\">\n          <img src=\"./images/env_btn/env_wind.png\"></div>\n        <p class=\"imgDescription\">Wind</p>\n      </div>\n    </div>\n  </div>\n  ",
            styles: ["\n    @media (max-width: 736px) {\n      .envBtns {\n        display: none;\n      }\n    }\n    .envBtnWrapper {\n      display: inline-block;\n      background: transparent;\n      margin-left: 15px;\n    }\n    .envBtn {\n      background-color: #29b0ae;\n      border: none;\n      width: 64px;\n      height: 64px;\n      padding: 10px;\n      position: relative;\n      text-align: center;\n      vertical-align: middle;\n      text-decoration: uppercase;\n      color: #fff;\n      background-image: linear-gradient(bottom, rgb(41,144,176) 0%, rgb(113,222,220) 100%);\n      background-image: -o-linear-gradient(bottom, rgb(41,144,176) 0%, rgb(113,222,220) 100%);\n      background-image: -moz-linear-gradient(bottom, rgb(41,144,176) 0%, rgb(113,222,220) 100%);\n      background-image: -webkit-linear-gradient(bottom, rgb(41,144,176) 0%, rgb(113,222,220) 100%);\n      background-image: -ms-linear-gradient(bottom, rgb(41,144,176) 0%, rgb(113,222,220) 100%);\n      background-image: -webkit-gradient(\n      linear,\n      left bottom,\n      left top,\n      color-stop(0, rgb(41,144,176)),\n      color-stop(1, rgb(113,222,220))\n      );\n      -webkit-box-shadow: inset 0px 1px 0px #71dedc, 0px 6px 0px #164f60;\n      -moz-box-shadow: inset 0px 1px 0px #71dedc, 0px 6px 0px #164f60;\n      -o-box-shadow: inset 0px 1px 0px #71dedc, 0px 6px 0px #164f60;\n      box-shadow: inset 0px 1px 0px #71dedc, 0px 6px 0px #164f60;\n      -webkit-border-radius: 5px;\n      -moz-border-radius: 5px;\n      -o-border-radius: 5px;\n      border-radius: 5px;\n    }\n    .envBtn.active, .envBtn:active {\n      color: #2990b0;\n      text-shadow: 0px 1px 1px rgba(255,255,255,0.3);\n      background: rgb(41,144,176);\n      -webkit-box-shadow: inset 0px 1px 0px #71dedc, inset 0px -1px 0px #164f60;\n      -moz-box-shadow: inset 0px 1px 0px #71dedc, inset 0px -1px 0px #164f60;\n      -o-box-shadow: inset 0px 1px 0px #71dedc, inset 0px -1px 0px #164f60;\n      box-shadow: inset 0px 1px 0px #71dedc, inset 0px -1px 0px #164f60;\n      top: 2px;\n    }\n    .envBtn img {\n      width: 100%;\n      height: 100%;\n    }\n    .envBtnWrapper .imgDescription {\n      position: absolute;\n      background: transparent;\n      padding-top: 2px;\n      color: #fff;\n      text-transform: uppercase;\n      visibility: hidden;\n      opacity: 0;\n      -webkit-transition: visibility opacity 0.2s;\n      transition: visibility opacity 0.2s;\n    }\n    .envBtnWrapper:hover .imgDescription {\n      visibility: visible;\n      opacity: 1;\n    }\n  "],
            directives: [common_1.NgSwitch, common_1.NgSwitchCase, common_1.NgSwitchDefault]
        }), 
        __metadata('design:paramtypes', [angularfire2_1.AngularFire, core_1.Renderer])
    ], EnvironmentComponent);
    return EnvironmentComponent;
}());
exports.EnvironmentComponent = EnvironmentComponent;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVudmlyb25tZW50L2Vudmlyb25tZW50LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEscUJBQTRDLGVBQWUsQ0FBQyxDQUFBO0FBQzVELHVCQUFzRCxpQkFBaUIsQ0FBQyxDQUFBO0FBQ3hFLDZCQUFtRCxjQUFjLENBQUMsQ0FBQTtBQXNKbEU7SUFnQkUsOEJBQVksRUFBYyxFQUFFLFFBQWtCO1FBaEJoRCxpQkF5TkM7UUF4TUcsSUFBSSxDQUFDLEdBQUcsR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQztRQUNoQyxJQUFJLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEdBQUcsR0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBQyxnQkFBZ0IsRUFBQyxFQUFDLGdCQUFnQixFQUFDLElBQUksRUFBQyxDQUFDLENBQUM7UUFDMUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsVUFBQSxRQUFRO1lBQzNCLEtBQUksQ0FBQyxtQkFBbUIsR0FBRyxRQUFRLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDNUMsQ0FBQyxDQUFDLENBQUM7UUFDSCxJQUFJLENBQUMsV0FBVyxHQUFHLEVBQUUsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEdBQUcsR0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBQyxzQkFBc0IsQ0FBQyxDQUFDO1FBQzlGLElBQUksQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsR0FBRyxHQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFDLFVBQVUsRUFBQyxFQUFDLGdCQUFnQixFQUFDLElBQUksRUFBQyxDQUFDLENBQUM7UUFD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LENBQUMsQ0FBQyxDQUFDO1lBQ3RDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUN0QyxDQUFDO1FBRUQsRUFBRSxDQUFDLENBQUMsR0FBRyxJQUFJLElBQUksSUFBSSxHQUFHLElBQUksTUFBTSxDQUFDLENBQUMsQ0FBQztZQUNqQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDakMsQ0FBQztRQUVELEVBQUUsQ0FBQyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksR0FBRyxJQUFJLFVBQVUsQ0FBQyxDQUFDLENBQUM7WUFDckMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ3JDLENBQUM7UUFFRCxFQUFFLENBQUMsQ0FBQyxHQUFHLElBQUksSUFBSSxJQUFJLEdBQUcsSUFBSSxNQUFNLENBQUMsQ0FBQyxDQUFDO1lBQ2pDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNqQyxDQUFDO0lBQ0gsQ0FBQztJQTVXSDtRQUFDLGdCQUFTLENBQUM7WUFDVCxRQUFRLEVBQUUsYUFBYTtZQUN2QixRQUFRLEVBQUUsaStHQXFFVDtZQUNELE1BQU0sRUFBRSxDQUFDLG8vRUF3RVIsQ0FBQztZQUNGLFVBQVUsRUFBRSxDQUFDLGlCQUFRLEVBQUUscUJBQVksRUFBRSx3QkFBZSxDQUFDO1NBQ3RELENBQUM7OzRCQUFBO0lBMk5GLDJCQUFDO0FBQUQsQ0F6TkEsQUF5TkMsSUFBQTtBQXpOWSw0QkFBb0IsdUJBeU5oQyxDQUFBIiwiZmlsZSI6ImVudmlyb25tZW50L2Vudmlyb25tZW50LmNvbXBvbmVudC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Q29tcG9uZW50LFJlbmRlcmVyLEVsZW1lbnRSZWZ9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQge05nU3dpdGNoLCBOZ1N3aXRjaENhc2UsIE5nU3dpdGNoRGVmYXVsdH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcclxuaW1wb3J0IHtBbmd1bGFyRmlyZSxGaXJlYmFzZU9iamVjdE9ic2VydmFibGV9IGZyb20gJ2FuZ3VsYXJmaXJlMic7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2Vudmlyb25tZW50JyxcclxuICB0ZW1wbGF0ZTogYFxyXG4gIDwhLS1cclxuICA8ZGl2ICpuZ0lmPVwic25hcHNob3RcIj5cclxuICAgIDxwPlJhaW46IHt7c25hcHNob3QucmFpbn19PC9wPlxyXG4gICAgPGJ1dHRvbiAoY2xpY2spPVwiY2hhbmdlRW52aXJvbm1lbnQoJ3JhaW4nKVwiPkNoYW5nZSBSYWluPC9idXR0b24+XHJcbiAgICA8cD5Gb2c6IHt7c25hcHNob3QuZm9nfX08L3A+XHJcbiAgICA8YnV0dG9uIChjbGljayk9XCJjaGFuZ2VFbnZpcm9ubWVudCgnZm9nJylcIj5DaGFuZ2UgRm9nPC9idXR0b24+XHJcbiAgICA8cD5MaWdodG5pbmc6IHt7c25hcHNob3QubGlnaHRuaW5nfX08L3A+XHJcbiAgICA8YnV0dG9uIChjbGljayk9XCJjaGFuZ2VFbnZpcm9ubWVudCgnbGlnaHRuaW5nJylcIj5DaGFuZ2UgTGlnaHRuaW5nPC9idXR0b24+XHJcbiAgICA8cD5TdW5zaGluZToge3tzbmFwc2hvdC5zdW5zaGluZX19PC9wPlxyXG4gICAgPGJ1dHRvbiAoY2xpY2spPVwiY2hhbmdlRW52aXJvbm1lbnQoJ3N1bnNoaW5lJylcIj5DaGFuZ2UgU3Vuc2hpbmU8L2J1dHRvbj5cclxuICAgIDxwPkhhaWw6IHt7c25hcHNob3QuaGFpbH19PC9wPlxyXG4gICAgPGJ1dHRvbiAoY2xpY2spPVwiY2hhbmdlRW52aXJvbm1lbnQoJ2hhaWwnKVwiPkNoYW5nZSBIYWlsPC9idXR0b24+XHJcbiAgICA8cD5XaW5kOiB7e3NuYXBzaG90LndpbmR9fTwvcD5cclxuICAgIDxidXR0b24gKGNsaWNrKT1cImNoYW5nZUVudmlyb25tZW50KCd3aW5kJylcIj5DaGFuZ2UgV2luZDwvYnV0dG9uPlxyXG4gIDwvZGl2PlxyXG4gIC8vLS0+XHJcblxyXG4gIDxkaXYgKm5nSWY9XCJlbnZpcm9ubWVudFNuYXBzaG90XCIgY2xhc3M9XCJjb250YWluZXJcIj5cclxuICAgIDxkaXYgY2xhc3M9XCJjb2wtc20tNiBwdWxsLWxlZnRcIj5cclxuICAgICAgPHA+XHJcbiAgICAgICAgVG8gcGxheSwgcHJlc3Mga2V5IHRvIHR1cm4gb24vb2ZmOjxicj5cclxuICAgICAgICBbQV0gRk9HOyBbU10gSEFJTDsgW0RdIExJR0hUTklORzsgW0ZdIFJBSU47IFtHXSBTVU5TSElORTsgW0hdIFdJTkQuPC9wPlxyXG4gICAgPC9kaXY+XHJcbiAgICA8ZGl2IGNsYXNzPVwiY29sLXNtLTYgcHVsbC1yaWdodCBlbnZCdG5zXCIgKm5nSWY9XCJlbnZpcm9ubWVudFwiPlxyXG4gICAgICA8ZGl2IGNsYXNzPVwiZW52QnRuV3JhcHBlclwiIChjbGljayk9XCJ0b2dnbGVCdG4oJ2ZvZycpXCIgW25nU3dpdGNoXT1cImVudmlyb25tZW50U25hcHNob3QuZm9nXCI+XHJcbiAgICAgICAgPGRpdiAqbmdTd2l0Y2hDYXNlPSd0cnVlJyBjbGFzcz1cImVudkJ0biBhY3RpdmVcIj5cclxuICAgICAgICAgIDxpbWcgc3JjPVwiLi9pbWFnZXMvZW52X2J0bi9lbnZfZm9nX29uLnBuZ1wiPjwvZGl2PlxyXG4gICAgICAgIDxkaXYgKm5nU3dpdGNoQ2FzZT0nZmFsc2UnIGNsYXNzPVwiZW52QnRuXCI+XHJcbiAgICAgICAgICA8aW1nIHNyYz1cIi4vaW1hZ2VzL2Vudl9idG4vZW52X2ZvZy5wbmdcIj48L2Rpdj5cclxuICAgICAgICA8cCBjbGFzcz1cImltZ0Rlc2NyaXB0aW9uXCI+Rm9nPC9wPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzcz1cImVudkJ0bldyYXBwZXJcIiAoY2xpY2spPVwidG9nZ2xlQnRuKCdoYWlsJylcIiBbbmdTd2l0Y2hdPVwiZW52aXJvbm1lbnRTbmFwc2hvdC5oYWlsXCI+XHJcbiAgICAgICAgPGRpdiAqbmdTd2l0Y2hDYXNlPSd0cnVlJyBjbGFzcz1cImVudkJ0biBhY3RpdmVcIj5cclxuICAgICAgICAgIDxpbWcgc3JjPVwiLi9pbWFnZXMvZW52X2J0bi9lbnZfaGFpbF9vbi5wbmdcIj48L2Rpdj5cclxuICAgICAgICA8ZGl2ICpuZ1N3aXRjaENhc2U9J2ZhbHNlJyBjbGFzcz1cImVudkJ0blwiPlxyXG4gICAgICAgICAgPGltZyBzcmM9XCIuL2ltYWdlcy9lbnZfYnRuL2Vudl9oYWlsLnBuZ1wiPjwvZGl2PlxyXG4gICAgICAgIDxwIGNsYXNzPVwiaW1nRGVzY3JpcHRpb25cIj5IYWlsPC9wPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzcz1cImVudkJ0bldyYXBwZXJcIiAoY2xpY2spPVwidG9nZ2xlQnRuKCdsaWdodG5pbmcnKVwiIFtuZ1N3aXRjaF09XCJlbnZpcm9ubWVudFNuYXBzaG90LmxpZ2h0bmluZ1wiPlxyXG4gICAgICAgIDxkaXYgKm5nU3dpdGNoQ2FzZT0ndHJ1ZScgY2xhc3M9XCJlbnZCdG4gYWN0aXZlXCI+XHJcbiAgICAgICAgICA8aW1nIHNyYz1cIi4vaW1hZ2VzL2Vudl9idG4vZW52X2xpZ2h0bmluZ19vbi5wbmdcIj48L2Rpdj5cclxuICAgICAgICA8ZGl2ICpuZ1N3aXRjaENhc2U9J2ZhbHNlJyBjbGFzcz1cImVudkJ0blwiPlxyXG4gICAgICAgICAgPGltZyBzcmM9XCIuL2ltYWdlcy9lbnZfYnRuL2Vudl9saWdodG5pbmcucG5nXCI+PC9kaXY+XHJcbiAgICAgICAgPHAgY2xhc3M9XCJpbWdEZXNjcmlwdGlvblwiPkxpZ2h0bmluZzwvcD5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJlbnZCdG5XcmFwcGVyXCIgKGNsaWNrKT1cInRvZ2dsZUJ0bigncmFpbicpXCIgW25nU3dpdGNoXT1cImVudmlyb25tZW50U25hcHNob3QucmFpblwiPlxyXG4gICAgICAgIDxkaXYgKm5nU3dpdGNoQ2FzZT0ndHJ1ZScgY2xhc3M9XCJlbnZCdG4gYWN0aXZlXCI+XHJcbiAgICAgICAgICA8aW1nIHNyYz1cIi4vaW1hZ2VzL2Vudl9idG4vZW52X3JhaW5fb24ucG5nXCI+PC9kaXY+XHJcbiAgICAgICAgPGRpdiAqbmdTd2l0Y2hDYXNlPSdmYWxzZScgY2xhc3M9XCJlbnZCdG5cIj5cclxuICAgICAgICAgIDxpbWcgc3JjPVwiLi9pbWFnZXMvZW52X2J0bi9lbnZfcmFpbi5wbmdcIj48L2Rpdj5cclxuICAgICAgICA8cCBjbGFzcz1cImltZ0Rlc2NyaXB0aW9uXCI+UmFpbjwvcD5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJlbnZCdG5XcmFwcGVyXCIgKGNsaWNrKT1cInRvZ2dsZUJ0bignc3Vuc2hpbmUnKVwiIFtuZ1N3aXRjaF09XCJlbnZpcm9ubWVudFNuYXBzaG90LnN1bnNoaW5lXCI+XHJcbiAgICAgICAgPGRpdiAqbmdTd2l0Y2hDYXNlPSd0cnVlJyBjbGFzcz1cImVudkJ0biBhY3RpdmVcIj5cclxuICAgICAgICAgIDxpbWcgc3JjPVwiLi9pbWFnZXMvZW52X2J0bi9lbnZfc3VuX29uLnBuZ1wiPjwvZGl2PlxyXG4gICAgICAgIDxkaXYgKm5nU3dpdGNoQ2FzZT0nZmFsc2UnIGNsYXNzPVwiZW52QnRuXCI+XHJcbiAgICAgICAgICA8aW1nIHNyYz1cIi4vaW1hZ2VzL2Vudl9idG4vZW52X3N1bi5wbmdcIj48L2Rpdj5cclxuICAgICAgICA8cCBjbGFzcz1cImltZ0Rlc2NyaXB0aW9uXCI+U3Vuc2hpbmU8L3A+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzPVwiZW52QnRuV3JhcHBlclwiIChjbGljayk9XCJ0b2dnbGVCdG4oJ3dpbmQnKVwiIFtuZ1N3aXRjaF09XCJlbnZpcm9ubWVudFNuYXBzaG90LndpbmRcIj5cclxuICAgICAgICA8ZGl2ICpuZ1N3aXRjaENhc2U9J3RydWUnIGNsYXNzPVwiZW52QnRuIGFjdGl2ZVwiPlxyXG4gICAgICAgICAgPGltZyBzcmM9XCIuL2ltYWdlcy9lbnZfYnRuL2Vudl93aW5kX29uLnBuZ1wiPjwvZGl2PlxyXG4gICAgICAgIDxkaXYgKm5nU3dpdGNoQ2FzZT0nZmFsc2UnIGNsYXNzPVwiZW52QnRuXCI+XHJcbiAgICAgICAgICA8aW1nIHNyYz1cIi4vaW1hZ2VzL2Vudl9idG4vZW52X3dpbmQucG5nXCI+PC9kaXY+XHJcbiAgICAgICAgPHAgY2xhc3M9XCJpbWdEZXNjcmlwdGlvblwiPldpbmQ8L3A+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgPC9kaXY+XHJcbiAgYCxcclxuICBzdHlsZXM6IFtgXHJcbiAgICBAbWVkaWEgKG1heC13aWR0aDogNzM2cHgpIHtcclxuICAgICAgLmVudkJ0bnMge1xyXG4gICAgICAgIGRpc3BsYXk6IG5vbmU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC5lbnZCdG5XcmFwcGVyIHtcclxuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcclxuICAgICAgbWFyZ2luLWxlZnQ6IDE1cHg7XHJcbiAgICB9XHJcbiAgICAuZW52QnRuIHtcclxuICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzI5YjBhZTtcclxuICAgICAgYm9yZGVyOiBub25lO1xyXG4gICAgICB3aWR0aDogNjRweDtcclxuICAgICAgaGVpZ2h0OiA2NHB4O1xyXG4gICAgICBwYWRkaW5nOiAxMHB4O1xyXG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcclxuICAgICAgdGV4dC1kZWNvcmF0aW9uOiB1cHBlcmNhc2U7XHJcbiAgICAgIGNvbG9yOiAjZmZmO1xyXG4gICAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoYm90dG9tLCByZ2IoNDEsMTQ0LDE3NikgMCUsIHJnYigxMTMsMjIyLDIyMCkgMTAwJSk7XHJcbiAgICAgIGJhY2tncm91bmQtaW1hZ2U6IC1vLWxpbmVhci1ncmFkaWVudChib3R0b20sIHJnYig0MSwxNDQsMTc2KSAwJSwgcmdiKDExMywyMjIsMjIwKSAxMDAlKTtcclxuICAgICAgYmFja2dyb3VuZC1pbWFnZTogLW1vei1saW5lYXItZ3JhZGllbnQoYm90dG9tLCByZ2IoNDEsMTQ0LDE3NikgMCUsIHJnYigxMTMsMjIyLDIyMCkgMTAwJSk7XHJcbiAgICAgIGJhY2tncm91bmQtaW1hZ2U6IC13ZWJraXQtbGluZWFyLWdyYWRpZW50KGJvdHRvbSwgcmdiKDQxLDE0NCwxNzYpIDAlLCByZ2IoMTEzLDIyMiwyMjApIDEwMCUpO1xyXG4gICAgICBiYWNrZ3JvdW5kLWltYWdlOiAtbXMtbGluZWFyLWdyYWRpZW50KGJvdHRvbSwgcmdiKDQxLDE0NCwxNzYpIDAlLCByZ2IoMTEzLDIyMiwyMjApIDEwMCUpO1xyXG4gICAgICBiYWNrZ3JvdW5kLWltYWdlOiAtd2Via2l0LWdyYWRpZW50KFxyXG4gICAgICBsaW5lYXIsXHJcbiAgICAgIGxlZnQgYm90dG9tLFxyXG4gICAgICBsZWZ0IHRvcCxcclxuICAgICAgY29sb3Itc3RvcCgwLCByZ2IoNDEsMTQ0LDE3NikpLFxyXG4gICAgICBjb2xvci1zdG9wKDEsIHJnYigxMTMsMjIyLDIyMCkpXHJcbiAgICAgICk7XHJcbiAgICAgIC13ZWJraXQtYm94LXNoYWRvdzogaW5zZXQgMHB4IDFweCAwcHggIzcxZGVkYywgMHB4IDZweCAwcHggIzE2NGY2MDtcclxuICAgICAgLW1vei1ib3gtc2hhZG93OiBpbnNldCAwcHggMXB4IDBweCAjNzFkZWRjLCAwcHggNnB4IDBweCAjMTY0ZjYwO1xyXG4gICAgICAtby1ib3gtc2hhZG93OiBpbnNldCAwcHggMXB4IDBweCAjNzFkZWRjLCAwcHggNnB4IDBweCAjMTY0ZjYwO1xyXG4gICAgICBib3gtc2hhZG93OiBpbnNldCAwcHggMXB4IDBweCAjNzFkZWRjLCAwcHggNnB4IDBweCAjMTY0ZjYwO1xyXG4gICAgICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDVweDtcclxuICAgICAgLW1vei1ib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgICAgIC1vLWJvcmRlci1yYWRpdXM6IDVweDtcclxuICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gICAgfVxyXG4gICAgLmVudkJ0bi5hY3RpdmUsIC5lbnZCdG46YWN0aXZlIHtcclxuICAgICAgY29sb3I6ICMyOTkwYjA7XHJcbiAgICAgIHRleHQtc2hhZG93OiAwcHggMXB4IDFweCByZ2JhKDI1NSwyNTUsMjU1LDAuMyk7XHJcbiAgICAgIGJhY2tncm91bmQ6IHJnYig0MSwxNDQsMTc2KTtcclxuICAgICAgLXdlYmtpdC1ib3gtc2hhZG93OiBpbnNldCAwcHggMXB4IDBweCAjNzFkZWRjLCBpbnNldCAwcHggLTFweCAwcHggIzE2NGY2MDtcclxuICAgICAgLW1vei1ib3gtc2hhZG93OiBpbnNldCAwcHggMXB4IDBweCAjNzFkZWRjLCBpbnNldCAwcHggLTFweCAwcHggIzE2NGY2MDtcclxuICAgICAgLW8tYm94LXNoYWRvdzogaW5zZXQgMHB4IDFweCAwcHggIzcxZGVkYywgaW5zZXQgMHB4IC0xcHggMHB4ICMxNjRmNjA7XHJcbiAgICAgIGJveC1zaGFkb3c6IGluc2V0IDBweCAxcHggMHB4ICM3MWRlZGMsIGluc2V0IDBweCAtMXB4IDBweCAjMTY0ZjYwO1xyXG4gICAgICB0b3A6IDJweDtcclxuICAgIH1cclxuICAgIC5lbnZCdG4gaW1nIHtcclxuICAgICAgd2lkdGg6IDEwMCU7XHJcbiAgICAgIGhlaWdodDogMTAwJTtcclxuICAgIH1cclxuICAgIC5lbnZCdG5XcmFwcGVyIC5pbWdEZXNjcmlwdGlvbiB7XHJcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XHJcbiAgICAgIHBhZGRpbmctdG9wOiAycHg7XHJcbiAgICAgIGNvbG9yOiAjZmZmO1xyXG4gICAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xyXG4gICAgICB2aXNpYmlsaXR5OiBoaWRkZW47XHJcbiAgICAgIG9wYWNpdHk6IDA7XHJcbiAgICAgIC13ZWJraXQtdHJhbnNpdGlvbjogdmlzaWJpbGl0eSBvcGFjaXR5IDAuMnM7XHJcbiAgICAgIHRyYW5zaXRpb246IHZpc2liaWxpdHkgb3BhY2l0eSAwLjJzO1xyXG4gICAgfVxyXG4gICAgLmVudkJ0bldyYXBwZXI6aG92ZXIgLmltZ0Rlc2NyaXB0aW9uIHtcclxuICAgICAgdmlzaWJpbGl0eTogdmlzaWJsZTtcclxuICAgICAgb3BhY2l0eTogMTtcclxuICAgIH1cclxuICBgXSxcclxuICBkaXJlY3RpdmVzOiBbTmdTd2l0Y2gsIE5nU3dpdGNoQ2FzZSwgTmdTd2l0Y2hEZWZhdWx0XVxyXG59KVxyXG5cclxuZXhwb3J0IGNsYXNzIEVudmlyb25tZW50Q29tcG9uZW50IHtcclxuICBvbk9mZjpGaXJlYmFzZU9iamVjdE9ic2VydmFibGU8YW55PjtcclxuICBlbnZpcm9ubWVudDpGaXJlYmFzZU9iamVjdE9ic2VydmFibGU8YW55PjtcclxuICBwbGF5ZXJzOkZpcmViYXNlT2JqZWN0T2JzZXJ2YWJsZTxhbnk+O1xyXG4gIFVSTDpzdHJpbmc7XHJcbiAgZW52aXJvbm1lbnRTbmFwc2hvdDoge1xyXG4gICAgZm9nOmJvb2xlYW4sXHJcbiAgICBoYWlsOmJvb2xlYW4sXHJcbiAgICBsaWdodG5pbmc6Ym9vbGVhbixcclxuICAgIHJhaW46Ym9vbGVhbixcclxuICAgIHN1bnNoaW5lOmJvb2xlYW4sXHJcbiAgICB3aW5kOmJvb2xlYW4sXHJcbiAgfTtcclxuICBwbGF5ZXJzU25hcHNob3Q6IGFueTtcclxuICBnZXRLZXk6RnVuY3Rpb247XHJcblxyXG4gIGNvbnN0cnVjdG9yKGFmOkFuZ3VsYXJGaXJlLCByZW5kZXJlcjogUmVuZGVyZXIpe1xyXG4gICAgdGhpcy5VUkwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcclxuICAgIHRoaXMub25PZmYgPSBhZi5kYXRhYmFzZS5vYmplY3QoJy8nK3RoaXMuVVJMLnNwbGl0KCcvZ2FtZS8nKVsxXSsnL0dsb2JhbHMvT25PZmYnLHtwcmVzZXJ2ZVNuYXBzaG90OnRydWV9KTtcclxuICAgIHRoaXMub25PZmYuc3Vic2NyaWJlKHNuYXBzaG90ID0+e1xyXG4gICAgICB0aGlzLmVudmlyb25tZW50U25hcHNob3QgPSBzbmFwc2hvdC52YWwoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5lbnZpcm9ubWVudCA9IGFmLmRhdGFiYXNlLm9iamVjdCgnLycrdGhpcy5VUkwuc3BsaXQoJy9nYW1lLycpWzFdKycvR2xvYmFscy9FbnZpcm9ubWVudCcpO1xyXG4gICAgdGhpcy5wbGF5ZXJzID0gYWYuZGF0YWJhc2Uub2JqZWN0KCcvJyt0aGlzLlVSTC5zcGxpdCgnL2dhbWUvJylbMV0rJy9QbGF5ZXJzJyx7cHJlc2VydmVTbmFwc2hvdDp0cnVlfSk7XHJcbiAgICB0aGlzLnBsYXllcnMuc3Vic2NyaWJlKHNuYXBzaG90ID0+e1xyXG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdCA9IHNuYXBzaG90LnZhbCgpO1xyXG4gICAgfSk7XHJcbiAgICAvKiBHZXRzIGtleXVwICovXHJcbiAgICB0aGlzLmdldEtleSA9IHJlbmRlcmVyLmxpc3Rlbkdsb2JhbCgnZG9jdW1lbnQnLCAna2V5dXAnLCAoZXZlbnQpID0+IHtcclxuICAgICAgdmFyIGtleSA9IGV2ZW50LmtleUNvZGU7XHJcbiAgICAgIHRoaXMudG9nZ2xlQnRuKGtleSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNoYW5nZUVudmlyb25tZW50KHgpe1xyXG4gICAgdmFyIGFldGhlciA9IDE7XHJcbiAgICB2YXIgbWF0ZXJpYWwgPSAxO1xyXG4gICAgdmFyIGNoYW9zID0gMTtcclxuICAgIHZhciBvcmRlciA9IDE7XHJcbiAgICBzd2l0Y2goeCl7XHJcbiAgICAgIGNhc2UgJ3JhaW4nOlxyXG4gICAgICAgIGlmKHRoaXMuZW52aXJvbm1lbnRTbmFwc2hvdC5yYWluPT10cnVlKXtcclxuICAgICAgICAgIHRoaXMub25PZmYudXBkYXRlKHtyYWluOmZhbHNlfSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5vbk9mZi51cGRhdGUoe3JhaW46dHJ1ZX0pO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICBjYXNlICdmb2cnOlxyXG4gICAgICAgICAgaWYodGhpcy5lbnZpcm9ubWVudFNuYXBzaG90LmZvZz09dHJ1ZSl7XHJcbiAgICAgICAgICAgIHRoaXMub25PZmYudXBkYXRlKHtmb2c6ZmFsc2V9KVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMub25PZmYudXBkYXRlKHtmb2c6dHJ1ZX0pO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgY2FzZSAnbGlnaHRuaW5nJzpcclxuICAgICAgICBpZih0aGlzLmVudmlyb25tZW50U25hcHNob3QubGlnaHRuaW5nPT10cnVlKXtcclxuICAgICAgICAgIHRoaXMub25PZmYudXBkYXRlKHtsaWdodG5pbmc6ZmFsc2V9KVxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMub25PZmYudXBkYXRlKHtsaWdodG5pbmc6dHJ1ZX0pO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICBjYXNlICdzdW5zaGluZSc6XHJcbiAgICAgICAgaWYodGhpcy5lbnZpcm9ubWVudFNuYXBzaG90LnN1bnNoaW5lPT10cnVlKXtcclxuICAgICAgICAgIHRoaXMub25PZmYudXBkYXRlKHtzdW5zaGluZTpmYWxzZX0pXHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5vbk9mZi51cGRhdGUoe3N1bnNoaW5lOnRydWV9KTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgY2FzZSAnaGFpbCc6XHJcbiAgICAgICAgaWYodGhpcy5lbnZpcm9ubWVudFNuYXBzaG90LmhhaWw9PXRydWUpe1xyXG4gICAgICAgICAgdGhpcy5vbk9mZi51cGRhdGUoe2hhaWw6ZmFsc2V9KVxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMub25PZmYudXBkYXRlKHtoYWlsOnRydWV9KTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgY2FzZSAnd2luZCc6XHJcbiAgICAgICAgaWYodGhpcy5lbnZpcm9ubWVudFNuYXBzaG90LndpbmQ9PXRydWUpe1xyXG4gICAgICAgICAgdGhpcy5vbk9mZi51cGRhdGUoe3dpbmQ6ZmFsc2V9KVxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMub25PZmYudXBkYXRlKHt3aW5kOnRydWV9KTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICh0aGlzLmVudmlyb25tZW50U25hcHNob3QucmFpbiA9PSB0cnVlKSB7XHJcbiAgICAgICAgY2hhb3MgKz0gMTtcclxuICAgICAgICBtYXRlcmlhbCArPSAyO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuZW52aXJvbm1lbnRTbmFwc2hvdC5mb2cgPT0gdHJ1ZSkge1xyXG4gICAgICAgIGFldGhlciArPSAyO1xyXG4gICAgICAgIG9yZGVyICs9IDE7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5lbnZpcm9ubWVudFNuYXBzaG90LmxpZ2h0bmluZyA9PSB0cnVlKSB7XHJcbiAgICAgICAgYWV0aGVyICs9IDE7XHJcbiAgICAgICAgY2hhb3MgKz0gMjtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmVudmlyb25tZW50U25hcHNob3Quc3Vuc2hpbmUgPT0gdHJ1ZSkge1xyXG4gICAgICAgIG9yZGVyICs9IDI7XHJcbiAgICAgICAgbWF0ZXJpYWwgKz0gMTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmVudmlyb25tZW50U25hcHNob3QuaGFpbCA9PSB0cnVlKSB7XHJcbiAgICAgICAgYWV0aGVyICs9IDI7XHJcbiAgICAgICAgbWF0ZXJpYWwgKz0gMjtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmVudmlyb25tZW50U25hcHNob3Qud2luZCA9PSB0cnVlKSB7XHJcbiAgICAgICAgb3JkZXIgKz0gMjtcclxuICAgICAgICBjaGFvcyArPSAyO1xyXG4gICAgfVxyXG4gIHRoaXMuZW52aXJvbm1lbnQuc2V0KHthZXRoZXI6YWV0aGVyLG1hdGVyaWFsOm1hdGVyaWFsLGNoYW9zOmNoYW9zLG9yZGVyOm9yZGVyfSk7XHJcbiAgdGhpcy5jaGFuZ2VDaGFtcGlvblN0YXRzKGFldGhlcixtYXRlcmlhbCxjaGFvcyxvcmRlcik7XHJcbiAgfVxyXG5cclxuICBjaGFuZ2VDaGFtcGlvblN0YXRzKGFldGhlcixtYXRlcmlhbCxjaGFvcyxvcmRlcil7XHJcbiAgICBpZih0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIxLnBsYXllckNsYXNzID09ICdIaWdod2F5bWFuJyl7XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjEucGh5c2ljYWxBdHRhY2sgPSBNYXRoLmZsb29yKChjaGFvcyAqIG1hdGVyaWFsKSArIDEwKTtcclxuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMS5waHlzaWNhbERlZmVuc2UgPSBNYXRoLmZsb29yKDUgKyBtYXRlcmlhbCk7XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjEuc3BlY2lhbEF0dGFjayA9IE1hdGguZmxvb3IoMiArICgyICogb3JkZXIpKTtcclxuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMS5zcGVjaWFsRGVmZW5zZSA9IE1hdGguZmxvb3IoMyArIGNoYW9zICsgYWV0aGVyKTtcclxuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMS5kZXh0ZXJpdHkgPSBNYXRoLmZsb29yKCgoMTAgKiBhZXRoZXIpICsgb3JkZXIpIC8gbWF0ZXJpYWwpO1xyXG4gICAgfVxyXG4gICAgaWYodGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMS5wbGF5ZXJDbGFzcyA9PSAnRWxlbWVudGFsaXN0Jyl7XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjEucGh5c2ljYWxBdHRhY2sgPSBNYXRoLmZsb29yKDQgKyBhZXRoZXIgKyBtYXRlcmlhbCk7XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjEucGh5c2ljYWxEZWZlbnNlID0gTWF0aC5mbG9vcigzICsgb3JkZXIpO1xyXG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIxLnNwZWNpYWxBdHRhY2sgPSBNYXRoLmZsb29yKCgoMTIgKyBhZXRoZXIpICogY2hhb3MpIC8gb3JkZXIpO1xyXG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIxLnNwZWNpYWxEZWZlbnNlID0gTWF0aC5mbG9vcigxMCArIG1hdGVyaWFsICsgb3JkZXIpO1xyXG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIxLmRleHRlcml0eSA9IE1hdGguZmxvb3IoMyAqIGNoYW9zKTtcclxuICAgIH1cclxuICAgIGlmKHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjEucGxheWVyQ2xhc3MgPT0gXCJQYXJhZ29uXCIpe1xyXG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIxLnBoeXNpY2FsQXR0YWNrID0gTWF0aC5mbG9vcihvcmRlciAqIDgpO1xyXG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIxLnBoeXNpY2FsRGVmZW5zZSA9IE1hdGguZmxvb3IoKCg4ICogbWF0ZXJpYWwpICsgb3JkZXIpIC8gKGNoYW9zICogMikpO1xyXG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIxLnNwZWNpYWxBdHRhY2sgPSBNYXRoLmZsb29yKChhZXRoZXIgKiA2KS9tYXRlcmlhbCk7XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjEuc3BlY2lhbERlZmVuc2UgPSBNYXRoLmZsb29yKCgoNyAqIG1hdGVyaWFsKSArIGNoYW9zKSAvIChvcmRlcioyKSk7XHJcbiAgICB9XHJcbiAgICBpZih0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIyLnBsYXllckNsYXNzID09ICdIaWdod2F5bWFuJyl7XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjIucGh5c2ljYWxBdHRhY2sgPSBNYXRoLmZsb29yKChjaGFvcyAqIG1hdGVyaWFsKSArIDEwKTtcclxuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMi5waHlzaWNhbERlZmVuc2UgPSBNYXRoLmZsb29yKDUgKyBtYXRlcmlhbCk7XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjIuc3BlY2lhbEF0dGFjayA9IE1hdGguZmxvb3IoMiArICgyICogb3JkZXIpKTtcclxuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMi5zcGVjaWFsRGVmZW5zZSA9IE1hdGguZmxvb3IoMyArIGNoYW9zICsgYWV0aGVyKTtcclxuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMi5kZXh0ZXJpdHkgPSBNYXRoLmZsb29yKCgoMTAgKiBhZXRoZXIpICsgb3JkZXIpIC8gbWF0ZXJpYWwpO1xyXG4gICAgfVxyXG4gICAgaWYodGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMi5wbGF5ZXJDbGFzcyA9PSAnRWxlbWVudGFsaXN0Jyl7XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjIucGh5c2ljYWxBdHRhY2sgPSBNYXRoLmZsb29yKDQgKyBhZXRoZXIgKyBtYXRlcmlhbCk7XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjIucGh5c2ljYWxEZWZlbnNlID0gTWF0aC5mbG9vcigzICsgb3JkZXIpO1xyXG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIyLnNwZWNpYWxBdHRhY2sgPSBNYXRoLmZsb29yKCgoMTIgKyBhZXRoZXIpICogY2hhb3MpIC8gb3JkZXIpO1xyXG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIyLnNwZWNpYWxEZWZlbnNlID0gTWF0aC5mbG9vcigxMCArIG1hdGVyaWFsICsgb3JkZXIpO1xyXG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIyLmRleHRlcml0eSA9IE1hdGguZmxvb3IoMyAqIGNoYW9zKTtcclxuICAgIH1cclxuICAgIGlmKHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjIucGxheWVyQ2xhc3MgPT0gXCJQYXJhZ29uXCIpe1xyXG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIyLnBoeXNpY2FsQXR0YWNrID0gTWF0aC5mbG9vcihvcmRlciAqIDgpO1xyXG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIyLnBoeXNpY2FsRGVmZW5zZSA9IE1hdGguZmxvb3IoKCg4ICogbWF0ZXJpYWwpICsgb3JkZXIpIC8gKGNoYW9zICogMikpO1xyXG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIyLnNwZWNpYWxBdHRhY2sgPSBNYXRoLmZsb29yKChhZXRoZXIgKiA2KS9tYXRlcmlhbCk7XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjEuc3BlY2lhbERlZmVuc2UgPSBNYXRoLmZsb29yKCgoNyAqIG1hdGVyaWFsKSArIGNoYW9zKSAvIChvcmRlcioyKSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIxLmFjdGlvbiA9IHRoaXMuQUlTZWxlY3RBY3Rpb24odGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMSx0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIyKTtcclxuICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjIuYWN0aW9uID0gdGhpcy5BSVNlbGVjdEFjdGlvbih0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIyLHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjEpO1xyXG4gICAgdGhpcy5wbGF5ZXJzLnVwZGF0ZSh0aGlzLnBsYXllcnNTbmFwc2hvdCk7XHJcbiAgfVxyXG5cclxuICBBSVNlbGVjdEFjdGlvbihwbGF5ZXIsZW5lbXkpe1xyXG4gICAgdmFyIGFjdGlvbiA9IFwiXCI7XHJcbiAgICB2YXIgcm5nID0gKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSooMTAwIC0gMCArIDEpICsgMCkpO1xyXG4gICAgaWYgKChwbGF5ZXIucGh5c2ljYWxBdHRhY2sgLSBlbmVteS5waHlzaWNhbERlZmVuc2UpID4gKHBsYXllci5zcGVjaWFsQXR0YWNrIC0gZW5lbXkuc3BlY2lhbERlZmVuc2UpKSB7XHJcbiAgICAgICAgaWYgKHJuZyAtIChwbGF5ZXIucGh5c2ljYWxBdHRhY2sgLSBlbmVteS5waHlzaWNhbERlZmVuc2UpIDw9IDApIHtcclxuICAgICAgICAgICAgcm5nID0gMTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBybmcgLT0gKHBsYXllci5waHlzaWNhbEF0dGFjayAtIGVuZW15LnBoeXNpY2FsRGVmZW5zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKChwbGF5ZXIucGh5c2ljYWxBdHRhY2sgLSBlbmVteS5waHlzaWNhbERlZmVuc2UpIDwgKHBsYXllci5zcGVjaWFsQXR0YWNrIC0gZW5lbXkuc3BlY2lhbERlZmVuc2UpKSB7XHJcbiAgICAgICAgaWYgKHJuZyArIChwbGF5ZXIuc3BlY2lhbEF0dGFjayAtIGVuZW15LnNwZWNpYWxEZWZlbnNlKSA+PSAxMDApIHtcclxuICAgICAgICAgICAgcm5nID0gMTAwO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJuZyArPSAocGxheWVyLnNwZWNpYWxBdHRhY2sgLSBlbmVteS5zcGVjaWFsRGVmZW5zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHJuZyA8PSAzMykge1xyXG4gICAgICAgIHJldHVybiBcInN0cmlrZVwiO1xyXG4gICAgfVxyXG4gICAgaWYgKHJuZyA+PSA2Nikge1xyXG4gICAgICAgIHJldHVyblwic3BlY2lhbFwiO1xyXG4gICAgfVxyXG4gICAgaWYgKHJuZyA8IDY2ICYmIHJuZyA+IDMzKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiZGVmZW5kXCI7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB0b2dnbGVCdG4oa2V5KSB7XHJcbiAgICAvLyBhXHJcbiAgICBpZiAoa2V5ID09ICc2NScgfHwga2V5ID09ICdmb2cnKSB7XHJcbiAgICAgIHRoaXMuY2hhbmdlRW52aXJvbm1lbnQoJ2ZvZycpO1xyXG4gICAgfVxyXG4gICAgLy8gc1xyXG4gICAgaWYgKGtleSA9PSAnODMnIHx8IGtleSA9PSAnaGFpbCcpIHtcclxuICAgICAgdGhpcy5jaGFuZ2VFbnZpcm9ubWVudCgnaGFpbCcpO1xyXG4gICAgfVxyXG4gICAgLy8gZFxyXG4gICAgaWYgKGtleSA9PSAnNjgnIHx8IGtleSA9PSAnbGlnaHRuaW5nJykge1xyXG4gICAgICB0aGlzLmNoYW5nZUVudmlyb25tZW50KCdsaWdodG5pbmcnKTtcclxuICAgIH1cclxuICAgIC8vIGZcclxuICAgIGlmIChrZXkgPT0gJzcwJyB8fCBrZXkgPT0gJ3JhaW4nKSB7XHJcbiAgICAgIHRoaXMuY2hhbmdlRW52aXJvbm1lbnQoJ3JhaW4nKTtcclxuICAgIH1cclxuICAgIC8vIGdcclxuICAgIGlmIChrZXkgPT0gJzcxJyB8fCBrZXkgPT0gJ3N1bnNoaW5lJykge1xyXG4gICAgICB0aGlzLmNoYW5nZUVudmlyb25tZW50KCdzdW5zaGluZScpO1xyXG4gICAgfVxyXG4gICAgLy8gaFxyXG4gICAgaWYgKGtleSA9PSAnNzInIHx8IGtleSA9PSAnd2luZCcpIHtcclxuICAgICAgdGhpcy5jaGFuZ2VFbnZpcm9ubWVudCgnd2luZCcpO1xyXG4gICAgfVxyXG4gIH1cclxufSJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
