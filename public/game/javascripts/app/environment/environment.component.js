"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var core_1 = require('@angular/core');
var common_1 = require('@angular/common');
var angularfire2_1 = require('angularfire2');
var EnvironmentComponent = (function () {
    function EnvironmentComponent(af, renderer) {
        var _this = this;
        this.URL = window.location.href;
        this.onOff = af.database.object('/' + this.URL.split('/game/')[1] + '/Globals/OnOff', { preserveSnapshot: true });
        this.onOff.subscribe(function (snapshot) {
            _this.environmentSnapshot = snapshot.val();
        });
        this.environment = af.database.object('/' + this.URL.split('/game/')[1] + '/Globals/Environment');
        this.players = af.database.object('/' + this.URL.split('/game/')[1] + '/Players', { preserveSnapshot: true });
        this.players.subscribe(function (snapshot) {
            _this.playersSnapshot = snapshot.val();
        });
        this.getKey = renderer.listenGlobal('document', 'keyup', function (event) {
            var key = event.keyCode;
            _this.toggleBtn(key);
        });
    }
    EnvironmentComponent.prototype.changeEnvironment = function (x) {
        var aether = 1;
        var material = 1;
        var chaos = 1;
        var order = 1;
        switch (x) {
            case 'rain':
                if (this.environmentSnapshot.rain == true) {
                    this.onOff.update({ rain: false });
                    break;
                }
                else {
                    this.onOff.update({ rain: true });
                    break;
                }
            case 'fog':
                if (this.environmentSnapshot.fog == true) {
                    this.onOff.update({ fog: false });
                    break;
                }
                else {
                    this.onOff.update({ fog: true });
                    break;
                }
            case 'lightning':
                if (this.environmentSnapshot.lightning == true) {
                    this.onOff.update({ lightning: false });
                    break;
                }
                else {
                    this.onOff.update({ lightning: true });
                    break;
                }
            case 'quake':
                if (this.environmentSnapshot.quake == true) {
                    this.onOff.update({ quake: false });
                    break;
                }
                else {
                    this.onOff.update({ quake: true });
                    break;
                }
            case 'snow':
                if (this.environmentSnapshot.snow == true) {
                    this.onOff.update({ snow: false });
                    break;
                }
                else {
                    this.onOff.update({ snow: true });
                    break;
                }
            case 'storm':
                if (this.environmentSnapshot.storm == true) {
                    this.onOff.update({ storm: false });
                    break;
                }
                else {
                    this.onOff.update({ storm: true });
                    break;
                }
        }
        if (this.environmentSnapshot.rain == true) {
            chaos += 1;
            material += 2;
        }
        if (this.environmentSnapshot.fog == true) {
            aether += 2;
            order += 1;
        }
        if (this.environmentSnapshot.lightning == true) {
            aether += 1;
            chaos += 2;
        }
        if (this.environmentSnapshot.quake == true) {
            order += 2;
            material += 1;
        }
        if (this.environmentSnapshot.snow == true) {
            aether += 2;
            material += 2;
        }
        if (this.environmentSnapshot.storm == true) {
            order += 2;
            chaos += 2;
        }
        this.environment.set({ aether: aether, material: material, chaos: chaos, order: order });
        this.changeChampionStats(aether, material, chaos, order);
    };
    EnvironmentComponent.prototype.changeChampionStats = function (aether, material, chaos, order) {
        if (this.playersSnapshot.player1.playerClass == 'Highwayman') {
            this.playersSnapshot.player1.physicalAttack = Math.floor((chaos * material) + 10);
            this.playersSnapshot.player1.physicalDefense = Math.floor(5 + material);
            this.playersSnapshot.player1.specialAttack = Math.floor(2 + (2 * order));
            this.playersSnapshot.player1.specialDefense = Math.floor(3 + chaos + aether);
            this.playersSnapshot.player1.dexterity = Math.floor(((10 * aether) + order) / material);
        }
        if (this.playersSnapshot.player1.playerClass == 'Elementalist') {
            this.playersSnapshot.player1.physicalAttack = Math.floor(4 + aether + material);
            this.playersSnapshot.player1.physicalDefense = Math.floor(3 + order);
            this.playersSnapshot.player1.specialAttack = Math.floor(((12 + aether) * chaos) / order);
            this.playersSnapshot.player1.specialDefense = Math.floor(10 + material + order);
            this.playersSnapshot.player1.dexterity = Math.floor(3 * chaos);
        }
        if (this.playersSnapshot.player1.playerClass == "Paragon") {
            this.playersSnapshot.player1.physicalAttack = Math.floor((order + material) * 2);
            this.playersSnapshot.player1.physicalDefense = Math.floor(((8 * material) + order) / (chaos * 2));
            this.playersSnapshot.player1.specialAttack = Math.floor((aether * 6) / material);
            this.playersSnapshot.player1.specialDefense = Math.floor(((7 * material) + chaos) / (order * 2));
        }
        if (this.playersSnapshot.player2.playerClass == 'Highwayman') {
            this.playersSnapshot.player2.physicalAttack = Math.floor((chaos * material) + 10);
            this.playersSnapshot.player2.physicalDefense = Math.floor(5 + material);
            this.playersSnapshot.player2.specialAttack = Math.floor(2 + (2 * order));
            this.playersSnapshot.player2.specialDefense = Math.floor(3 + chaos + aether);
            this.playersSnapshot.player2.dexterity = Math.floor(((10 * aether) + order) / material);
        }
        if (this.playersSnapshot.player2.playerClass == 'Elementalist') {
            this.playersSnapshot.player2.physicalAttack = Math.floor(4 + aether + material);
            this.playersSnapshot.player2.physicalDefense = Math.floor(3 + order);
            this.playersSnapshot.player2.specialAttack = Math.floor(((12 + aether) * chaos) / order);
            this.playersSnapshot.player2.specialDefense = Math.floor(10 + material + order);
            this.playersSnapshot.player2.dexterity = Math.floor(3 * chaos);
        }
        if (this.playersSnapshot.player2.playerClass == "Paragon") {
            this.playersSnapshot.player2.physicalAttack = Math.floor((order + material) * 2);
            this.playersSnapshot.player2.physicalDefense = Math.floor(((8 * material) + order) / (chaos * 2));
            this.playersSnapshot.player2.specialAttack = Math.floor((aether * 6) / material);
            this.playersSnapshot.player1.specialDefense = Math.floor(((7 * material) + chaos) / (order * 2));
        }
        this.playersSnapshot.player1.action = this.AISelectAction(this.playersSnapshot.player1, this.playersSnapshot.player2);
        this.playersSnapshot.player2.action = this.AISelectAction(this.playersSnapshot.player2, this.playersSnapshot.player1);
        this.players.update(this.playersSnapshot);
    };
    EnvironmentComponent.prototype.AISelectAction = function (player, enemy) {
        var action = "";
        var rng = (Math.floor(Math.random() * (100 - 0 + 1) + 0));
        if ((player.physicalAttack - enemy.physicalDefense) > (player.specialAttack - enemy.specialDefense)) {
            if (rng - (player.physicalAttack - enemy.physicalDefense) <= 0) {
                rng = 1;
            }
            else {
                rng -= (player.physicalAttack - enemy.physicalDefense);
            }
        }
        if ((player.physicalAttack - enemy.physicalDefense) < (player.specialAttack - enemy.specialDefense)) {
            if (rng + (player.specialAttack - enemy.specialDefense) >= 100) {
                rng = 100;
            }
            else {
                rng += (player.specialAttack - enemy.specialDefense);
            }
        }
        if (rng <= 33) {
            return "strike";
        }
        if (rng >= 66) {
            return "special";
        }
        if (rng < 66 && rng > 33) {
            return "defend";
        }
    };
    EnvironmentComponent.prototype.toggleBtn = function (key) {
        if (key == '65' || key == 'fog') {
            this.changeEnvironment('fog');
        }
        if (key == '83' || key == 'snow') {
            this.changeEnvironment('snow');
        }
        if (key == '68' || key == 'lightning') {
            this.changeEnvironment('lightning');
        }
        if (key == '70' || key == 'rain') {
            this.changeEnvironment('rain');
        }
        if (key == '71' || key == 'quake') {
            this.changeEnvironment('quake');
        }
        if (key == '72' || key == 'storm') {
            this.changeEnvironment('storm');
        }
    };
    EnvironmentComponent = __decorate([
        core_1.Component({
            selector: 'environment',
            template: "\n  <div *ngIf=\"environmentSnapshot\" class=\"container\">\n    <div class=\"col-sm-6 pull-left\">\n      <p>\n        To play, press key to turn on/off:<br>\n        [A] FOG; [S] SNOW; [D] LIGHTNING; [F] RAIN; [G] QUAKE; [H] STORM</p>\n    </div>\n    <div class=\"col-sm-6 pull-right envBtns\" *ngIf=\"environment\">\n      <div class=\"envBtnWrapper\" (click)=\"toggleBtn('fog')\" [ngSwitch]=\"environmentSnapshot.fog\">\n        <div *ngSwitchCase='true' class=\"envBtn active\">\n          <img src=\"./images/env_btn/env_fog_on.png\"></div>\n        <div *ngSwitchCase='false' class=\"envBtn\">\n          <img src=\"./images/env_btn/env_fog.png\"></div>\n        <p class=\"imgDescription\">Fog</p>\n      </div>\n      <div class=\"envBtnWrapper\" (click)=\"toggleBtn('snow')\" [ngSwitch]=\"environmentSnapshot.snow\">\n        <div *ngSwitchCase='true' class=\"envBtn active\">\n          <img src=\"./images/env_btn/env_hail_on.png\"></div>\n        <div *ngSwitchCase='false' class=\"envBtn\">\n          <img src=\"./images/env_btn/env_hail.png\"></div>\n        <p class=\"imgDescription\">Snow</p>\n      </div>\n      <div class=\"envBtnWrapper\" (click)=\"toggleBtn('lightning')\" [ngSwitch]=\"environmentSnapshot.lightning\">\n        <div *ngSwitchCase='true' class=\"envBtn active\">\n          <img src=\"./images/env_btn/env_lightning_on.png\"></div>\n        <div *ngSwitchCase='false' class=\"envBtn\">\n          <img src=\"./images/env_btn/env_lightning.png\"></div>\n        <p class=\"imgDescription\">Lightning</p>\n      </div>\n      <div class=\"envBtnWrapper\" (click)=\"toggleBtn('rain')\" [ngSwitch]=\"environmentSnapshot.rain\">\n        <div *ngSwitchCase='true' class=\"envBtn active\">\n          <img src=\"./images/env_btn/env_rain_on.png\"></div>\n        <div *ngSwitchCase='false' class=\"envBtn\">\n          <img src=\"./images/env_btn/env_rain.png\"></div>\n        <p class=\"imgDescription\">Rain</p>\n      </div>\n      <div class=\"envBtnWrapper\" (click)=\"toggleBtn('quake')\" [ngSwitch]=\"environmentSnapshot.quake\">\n        <div *ngSwitchCase='true' class=\"envBtn active\">\n          <img src=\"./images/env_btn/env_sun_on.png\"></div>\n        <div *ngSwitchCase='false' class=\"envBtn\">\n          <img src=\"./images/env_btn/env_sun.png\"></div>\n        <p class=\"imgDescription\">Quake</p>\n      </div>\n      <div class=\"envBtnWrapper\" (click)=\"toggleBtn('storm')\" [ngSwitch]=\"environmentSnapshot.storm\">\n        <div *ngSwitchCase='true' class=\"envBtn active\">\n          <img src=\"./images/env_btn/env_wind_on.png\"></div>\n        <div *ngSwitchCase='false' class=\"envBtn\">\n          <img src=\"./images/env_btn/env_wind.png\"></div>\n        <p class=\"imgDescription\">Storm</p>\n      </div>\n    </div>\n  </div>\n  ",
            styles: ["\n    @media (max-width: 736px) {\n      .envBtns {\n        display: none;\n      }\n    }\n    .envBtnWrapper {\n      display: inline-block;\n      background: transparent;\n      margin-left: 15px;\n    }\n    .envBtn {\n      background-color: #29b0ae;\n      border: none;\n      width: 64px;\n      height: 64px;\n      padding: 10px;\n      position: relative;\n      text-align: center;\n      vertical-align: middle;\n      text-decoration: uppercase;\n      color: #fff;\n      background-image: linear-gradient(bottom, rgb(41,144,176) 0%, rgb(113,222,220) 100%);\n      background-image: -o-linear-gradient(bottom, rgb(41,144,176) 0%, rgb(113,222,220) 100%);\n      background-image: -moz-linear-gradient(bottom, rgb(41,144,176) 0%, rgb(113,222,220) 100%);\n      background-image: -webkit-linear-gradient(bottom, rgb(41,144,176) 0%, rgb(113,222,220) 100%);\n      background-image: -ms-linear-gradient(bottom, rgb(41,144,176) 0%, rgb(113,222,220) 100%);\n      background-image: -webkit-gradient(\n      linear,\n      left bottom,\n      left top,\n      color-stop(0, rgb(41,144,176)),\n      color-stop(1, rgb(113,222,220))\n      );\n      -webkit-box-shadow: inset 0px 1px 0px #71dedc, 0px 6px 0px #164f60;\n      -moz-box-shadow: inset 0px 1px 0px #71dedc, 0px 6px 0px #164f60;\n      -o-box-shadow: inset 0px 1px 0px #71dedc, 0px 6px 0px #164f60;\n      box-shadow: inset 0px 1px 0px #71dedc, 0px 6px 0px #164f60;\n      -webkit-border-radius: 5px;\n      -moz-border-radius: 5px;\n      -o-border-radius: 5px;\n      border-radius: 5px;\n    }\n    .envBtn.active, .envBtn:active {\n      color: #2990b0;\n      text-shadow: 0px 1px 1px rgba(255,255,255,0.3);\n      background: rgb(41,144,176);\n      -webkit-box-shadow: inset 0px 1px 0px #71dedc, inset 0px -1px 0px #164f60;\n      -moz-box-shadow: inset 0px 1px 0px #71dedc, inset 0px -1px 0px #164f60;\n      -o-box-shadow: inset 0px 1px 0px #71dedc, inset 0px -1px 0px #164f60;\n      box-shadow: inset 0px 1px 0px #71dedc, inset 0px -1px 0px #164f60;\n      top: 2px;\n    }\n    .envBtn img {\n      width: 100%;\n      height: 100%;\n    }\n    .envBtnWrapper .imgDescription {\n      position: absolute;\n      background: transparent;\n      padding-top: 2px;\n      color: #fff;\n      text-transform: uppercase;\n      visibility: hidden;\n      opacity: 0;\n      -webkit-transition: visibility opacity 0.2s;\n      transition: visibility opacity 0.2s;\n    }\n    .envBtnWrapper:hover .imgDescription {\n      visibility: visible;\n      opacity: 1;\n    }\n  "],
            directives: [common_1.NgSwitch, common_1.NgSwitchCase, common_1.NgSwitchDefault]
        }), 
        __metadata('design:paramtypes', [angularfire2_1.AngularFire, core_1.Renderer])
    ], EnvironmentComponent);
    return EnvironmentComponent;
}());
exports.EnvironmentComponent = EnvironmentComponent;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVudmlyb25tZW50L2Vudmlyb25tZW50LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEscUJBQTRDLGVBQWUsQ0FBQyxDQUFBO0FBQzVELHVCQUFzRCxpQkFBaUIsQ0FBQyxDQUFBO0FBQ3hFLDZCQUFtRCxjQUFjLENBQUMsQ0FBQTtBQXFJbEU7SUFnQkUsOEJBQVksRUFBYyxFQUFFLFFBQWtCO1FBaEJoRCxpQkF5TkM7UUF4TUcsSUFBSSxDQUFDLEdBQUcsR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQztRQUNoQyxJQUFJLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEdBQUcsR0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBQyxnQkFBZ0IsRUFBQyxFQUFDLGdCQUFnQixFQUFDLElBQUksRUFBQyxDQUFDLENBQUM7UUFDMUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsVUFBQSxRQUFRO1lBQzNCLEtBQUksQ0FBQyxtQkFBbUIsR0FBRyxRQUFRLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDNUMsQ0FBQyxDQUFDLENBQUM7UUFDSCxJQUFJLENBQUMsV0FBVyxHQUFHLEVBQUUsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEdBQUcsR0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBQyxzQkFBc0IsQ0FBQyxDQUFDO1FBQzlGLElBQUksQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsR0FBRyxHQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFDLFVBQVUsRUFBQyxFQUFDLGdCQUFnQixFQUFDLElBQUksRUFBQyxDQUFDLENBQUM7UUFD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QyxjQUFjLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLEdBQUcsUUFBUSxHQUFHLEtBQUssQ0FBQyxDQUFDO1lBQ2hGLElBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQztRQUNqRSxDQUFDO1FBQ0QsRUFBRSxDQUFBLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsV0FBVyxJQUFJLFNBQVMsQ0FBQyxDQUFBLENBQUM7WUFDeEQsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLEdBQUcsUUFBUSxDQUFDLEdBQUMsQ0FBQyxDQUFDLENBQUM7WUFDL0UsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxRQUFRLENBQUMsR0FBRyxLQUFLLENBQUMsR0FBRyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2xHLElBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxHQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQy9FLElBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFDLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxLQUFLLEdBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNqRyxDQUFDO1FBQ0QsRUFBRSxDQUFBLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsV0FBVyxJQUFJLFlBQVksQ0FBQyxDQUFBLENBQUM7WUFDM0QsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLEdBQUcsUUFBUSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUM7WUFDbEYsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxDQUFDO1lBQ3hFLElBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDO1lBQ3pFLElBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxLQUFLLEdBQUcsTUFBTSxDQUFDLENBQUM7WUFDN0UsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxNQUFNLENBQUMsR0FBRyxLQUFLLENBQUMsR0FBRyxRQUFRLENBQUMsQ0FBQztRQUMxRixDQUFDO1FBQ0QsRUFBRSxDQUFBLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsV0FBVyxJQUFJLGNBQWMsQ0FBQyxDQUFBLENBQUM7WUFDN0QsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLE1BQU0sR0FBRyxRQUFRLENBQUMsQ0FBQztZQUNoRixJQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUM7WUFDckUsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxNQUFNLENBQUMsR0FBRyxLQUFLLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQztZQUN6RixJQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLEdBQUcsUUFBUSxHQUFHLEtBQUssQ0FBQyxDQUFDO1lBQ2hGLElBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQztRQUNqRSxDQUFDO1FBQ0QsRUFBRSxDQUFBLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsV0FBVyxJQUFJLFNBQVMsQ0FBQyxDQUFBLENBQUM7WUFDeEQsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLEdBQUcsUUFBUSxDQUFDLEdBQUMsQ0FBQyxDQUFDLENBQUM7WUFDL0UsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxRQUFRLENBQUMsR0FBRyxLQUFLLENBQUMsR0FBRyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2xHLElBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxHQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQy9FLElBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFDLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxLQUFLLEdBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNqRyxDQUFDO1FBQ0QsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLEVBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNySCxJQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sRUFBQyxJQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3JILElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQztJQUM1QyxDQUFDO0lBRUQsNkNBQWMsR0FBZCxVQUFlLE1BQU0sRUFBQyxLQUFLO1FBQ3pCLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQztRQUNoQixJQUFJLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3hELEVBQUUsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLGNBQWMsR0FBRyxLQUFLLENBQUMsZUFBZSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsYUFBYSxHQUFHLEtBQUssQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDbEcsRUFBRSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsTUFBTSxDQUFDLGNBQWMsR0FBRyxLQUFLLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDN0QsR0FBRyxHQUFHLENBQUMsQ0FBQztZQUNaLENBQUM7WUFBQyxJQUFJLENBQUMsQ0FBQztnQkFDSixHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsY0FBYyxHQUFHLEtBQUssQ0FBQyxlQUFlLENBQUMsQ0FBQztZQUMzRCxDQUFDO1FBQ0wsQ0FBQztRQUNELEVBQUUsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLGNBQWMsR0FBRyxLQUFLLENBQUMsZUFBZSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsYUFBYSxHQUFHLEtBQUssQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDbEcsRUFBRSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsTUFBTSxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUMsY0FBYyxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQztnQkFDN0QsR0FBRyxHQUFHLEdBQUcsQ0FBQztZQUNkLENBQUM7WUFBQyxJQUFJLENBQUMsQ0FBQztnQkFDSixHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxHQUFHLEtBQUssQ0FBQyxjQUFjLENBQUMsQ0FBQztZQUN6RCxDQUFDO1FBQ0wsQ0FBQztRQUNELEVBQUUsQ0FBQyxDQUFDLEdBQUcsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ1osTUFBTSxDQUFDLFFBQVEsQ0FBQztRQUNwQixDQUFDO1FBQ0QsRUFBRSxDQUFDLENBQUMsR0FBRyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDWixNQUFNLENBQUEsU0FBUyxDQUFDO1FBQ3BCLENBQUM7UUFDRCxFQUFFLENBQUMsQ0FBQyxHQUFHLEdBQUcsRUFBRSxJQUFJLEdBQUcsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ3ZCLE1BQU0sQ0FBQyxRQUFRLENBQUM7UUFDcEIsQ0FBQztJQUNILENBQUM7SUFFRCx3Q0FBUyxHQUFULFVBQVUsR0FBRztRQUVYLEVBQUUsQ0FBQyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksR0FBRyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUM7WUFDaEMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ2hDLENBQUM7UUFFRCxFQUFFLENBQUMsQ0FBQyxHQUFHLElBQUksSUFBSSxJQUFJLEdBQUcsSUFBSSxNQUFNLENBQUMsQ0FBQyxDQUFDO1lBQ2pDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNqQyxDQUFDO1FBRUQsRUFBRSxDQUFDLENBQUMsR0FBRyxJQUFJLElBQUksSUFBSSxHQUFHLElBQUksV0FBVyxDQUFDLENBQUMsQ0FBQztZQUN0QyxJQUFJLENBQUMsaUJBQWlCLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDdEMsQ0FBQztRQUVELEVBQUUsQ0FBQyxDQUFDLEdBQUcsSUFBSSxJQUFJLElBQUksR0FBRyxJQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDakMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ2pDLENBQUM7UUFFRCxFQUFFLENBQUMsQ0FBQyxHQUFHLElBQUksSUFBSSxJQUFJLEdBQUcsSUFBSSxPQUFPLENBQUMsQ0FBQyxDQUFDO1lBQ2xDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNsQyxDQUFDO1FBRUQsRUFBRSxDQUFDLENBQUMsR0FBRyxJQUFJLElBQUksSUFBSSxHQUFHLElBQUksT0FBTyxDQUFDLENBQUMsQ0FBQztZQUNsQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDbEMsQ0FBQztJQUNILENBQUM7SUEzVkg7UUFBQyxnQkFBUyxDQUFDO1lBQ1QsUUFBUSxFQUFFLGFBQWE7WUFDdkIsUUFBUSxFQUFFLHV2RkFvRFQ7WUFDRCxNQUFNLEVBQUUsQ0FBQyxvL0VBd0VSLENBQUM7WUFDRixVQUFVLEVBQUUsQ0FBQyxpQkFBUSxFQUFFLHFCQUFZLEVBQUUsd0JBQWUsQ0FBQztTQUN0RCxDQUFDOzs0QkFBQTtJQTJORiwyQkFBQztBQUFELENBek5BLEFBeU5DLElBQUE7QUF6TlksNEJBQW9CLHVCQXlOaEMsQ0FBQSIsImZpbGUiOiJlbnZpcm9ubWVudC9lbnZpcm9ubWVudC5jb21wb25lbnQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0NvbXBvbmVudCxSZW5kZXJlcixFbGVtZW50UmVmfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHtOZ1N3aXRjaCwgTmdTd2l0Y2hDYXNlLCBOZ1N3aXRjaERlZmF1bHR9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XHJcbmltcG9ydCB7QW5ndWxhckZpcmUsRmlyZWJhc2VPYmplY3RPYnNlcnZhYmxlfSBmcm9tICdhbmd1bGFyZmlyZTInO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdlbnZpcm9ubWVudCcsXHJcbiAgdGVtcGxhdGU6IGBcclxuICA8ZGl2ICpuZ0lmPVwiZW52aXJvbm1lbnRTbmFwc2hvdFwiIGNsYXNzPVwiY29udGFpbmVyXCI+XHJcbiAgICA8ZGl2IGNsYXNzPVwiY29sLXNtLTYgcHVsbC1sZWZ0XCI+XHJcbiAgICAgIDxwPlxyXG4gICAgICAgIFRvIHBsYXksIHByZXNzIGtleSB0byB0dXJuIG9uL29mZjo8YnI+XHJcbiAgICAgICAgW0FdIEZPRzsgW1NdIFNOT1c7IFtEXSBMSUdIVE5JTkc7IFtGXSBSQUlOOyBbR10gUVVBS0U7IFtIXSBTVE9STTwvcD5cclxuICAgIDwvZGl2PlxyXG4gICAgPGRpdiBjbGFzcz1cImNvbC1zbS02IHB1bGwtcmlnaHQgZW52QnRuc1wiICpuZ0lmPVwiZW52aXJvbm1lbnRcIj5cclxuICAgICAgPGRpdiBjbGFzcz1cImVudkJ0bldyYXBwZXJcIiAoY2xpY2spPVwidG9nZ2xlQnRuKCdmb2cnKVwiIFtuZ1N3aXRjaF09XCJlbnZpcm9ubWVudFNuYXBzaG90LmZvZ1wiPlxyXG4gICAgICAgIDxkaXYgKm5nU3dpdGNoQ2FzZT0ndHJ1ZScgY2xhc3M9XCJlbnZCdG4gYWN0aXZlXCI+XHJcbiAgICAgICAgICA8aW1nIHNyYz1cIi4vaW1hZ2VzL2Vudl9idG4vZW52X2ZvZ19vbi5wbmdcIj48L2Rpdj5cclxuICAgICAgICA8ZGl2ICpuZ1N3aXRjaENhc2U9J2ZhbHNlJyBjbGFzcz1cImVudkJ0blwiPlxyXG4gICAgICAgICAgPGltZyBzcmM9XCIuL2ltYWdlcy9lbnZfYnRuL2Vudl9mb2cucG5nXCI+PC9kaXY+XHJcbiAgICAgICAgPHAgY2xhc3M9XCJpbWdEZXNjcmlwdGlvblwiPkZvZzwvcD5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJlbnZCdG5XcmFwcGVyXCIgKGNsaWNrKT1cInRvZ2dsZUJ0bignc25vdycpXCIgW25nU3dpdGNoXT1cImVudmlyb25tZW50U25hcHNob3Quc25vd1wiPlxyXG4gICAgICAgIDxkaXYgKm5nU3dpdGNoQ2FzZT0ndHJ1ZScgY2xhc3M9XCJlbnZCdG4gYWN0aXZlXCI+XHJcbiAgICAgICAgICA8aW1nIHNyYz1cIi4vaW1hZ2VzL2Vudl9idG4vZW52X2hhaWxfb24ucG5nXCI+PC9kaXY+XHJcbiAgICAgICAgPGRpdiAqbmdTd2l0Y2hDYXNlPSdmYWxzZScgY2xhc3M9XCJlbnZCdG5cIj5cclxuICAgICAgICAgIDxpbWcgc3JjPVwiLi9pbWFnZXMvZW52X2J0bi9lbnZfaGFpbC5wbmdcIj48L2Rpdj5cclxuICAgICAgICA8cCBjbGFzcz1cImltZ0Rlc2NyaXB0aW9uXCI+U25vdzwvcD5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJlbnZCdG5XcmFwcGVyXCIgKGNsaWNrKT1cInRvZ2dsZUJ0bignbGlnaHRuaW5nJylcIiBbbmdTd2l0Y2hdPVwiZW52aXJvbm1lbnRTbmFwc2hvdC5saWdodG5pbmdcIj5cclxuICAgICAgICA8ZGl2ICpuZ1N3aXRjaENhc2U9J3RydWUnIGNsYXNzPVwiZW52QnRuIGFjdGl2ZVwiPlxyXG4gICAgICAgICAgPGltZyBzcmM9XCIuL2ltYWdlcy9lbnZfYnRuL2Vudl9saWdodG5pbmdfb24ucG5nXCI+PC9kaXY+XHJcbiAgICAgICAgPGRpdiAqbmdTd2l0Y2hDYXNlPSdmYWxzZScgY2xhc3M9XCJlbnZCdG5cIj5cclxuICAgICAgICAgIDxpbWcgc3JjPVwiLi9pbWFnZXMvZW52X2J0bi9lbnZfbGlnaHRuaW5nLnBuZ1wiPjwvZGl2PlxyXG4gICAgICAgIDxwIGNsYXNzPVwiaW1nRGVzY3JpcHRpb25cIj5MaWdodG5pbmc8L3A+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzPVwiZW52QnRuV3JhcHBlclwiIChjbGljayk9XCJ0b2dnbGVCdG4oJ3JhaW4nKVwiIFtuZ1N3aXRjaF09XCJlbnZpcm9ubWVudFNuYXBzaG90LnJhaW5cIj5cclxuICAgICAgICA8ZGl2ICpuZ1N3aXRjaENhc2U9J3RydWUnIGNsYXNzPVwiZW52QnRuIGFjdGl2ZVwiPlxyXG4gICAgICAgICAgPGltZyBzcmM9XCIuL2ltYWdlcy9lbnZfYnRuL2Vudl9yYWluX29uLnBuZ1wiPjwvZGl2PlxyXG4gICAgICAgIDxkaXYgKm5nU3dpdGNoQ2FzZT0nZmFsc2UnIGNsYXNzPVwiZW52QnRuXCI+XHJcbiAgICAgICAgICA8aW1nIHNyYz1cIi4vaW1hZ2VzL2Vudl9idG4vZW52X3JhaW4ucG5nXCI+PC9kaXY+XHJcbiAgICAgICAgPHAgY2xhc3M9XCJpbWdEZXNjcmlwdGlvblwiPlJhaW48L3A+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzPVwiZW52QnRuV3JhcHBlclwiIChjbGljayk9XCJ0b2dnbGVCdG4oJ3F1YWtlJylcIiBbbmdTd2l0Y2hdPVwiZW52aXJvbm1lbnRTbmFwc2hvdC5xdWFrZVwiPlxyXG4gICAgICAgIDxkaXYgKm5nU3dpdGNoQ2FzZT0ndHJ1ZScgY2xhc3M9XCJlbnZCdG4gYWN0aXZlXCI+XHJcbiAgICAgICAgICA8aW1nIHNyYz1cIi4vaW1hZ2VzL2Vudl9idG4vZW52X3N1bl9vbi5wbmdcIj48L2Rpdj5cclxuICAgICAgICA8ZGl2ICpuZ1N3aXRjaENhc2U9J2ZhbHNlJyBjbGFzcz1cImVudkJ0blwiPlxyXG4gICAgICAgICAgPGltZyBzcmM9XCIuL2ltYWdlcy9lbnZfYnRuL2Vudl9zdW4ucG5nXCI+PC9kaXY+XHJcbiAgICAgICAgPHAgY2xhc3M9XCJpbWdEZXNjcmlwdGlvblwiPlF1YWtlPC9wPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzcz1cImVudkJ0bldyYXBwZXJcIiAoY2xpY2spPVwidG9nZ2xlQnRuKCdzdG9ybScpXCIgW25nU3dpdGNoXT1cImVudmlyb25tZW50U25hcHNob3Quc3Rvcm1cIj5cclxuICAgICAgICA8ZGl2ICpuZ1N3aXRjaENhc2U9J3RydWUnIGNsYXNzPVwiZW52QnRuIGFjdGl2ZVwiPlxyXG4gICAgICAgICAgPGltZyBzcmM9XCIuL2ltYWdlcy9lbnZfYnRuL2Vudl93aW5kX29uLnBuZ1wiPjwvZGl2PlxyXG4gICAgICAgIDxkaXYgKm5nU3dpdGNoQ2FzZT0nZmFsc2UnIGNsYXNzPVwiZW52QnRuXCI+XHJcbiAgICAgICAgICA8aW1nIHNyYz1cIi4vaW1hZ2VzL2Vudl9idG4vZW52X3dpbmQucG5nXCI+PC9kaXY+XHJcbiAgICAgICAgPHAgY2xhc3M9XCJpbWdEZXNjcmlwdGlvblwiPlN0b3JtPC9wPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gIDwvZGl2PlxyXG4gIGAsXHJcbiAgc3R5bGVzOiBbYFxyXG4gICAgQG1lZGlhIChtYXgtd2lkdGg6IDczNnB4KSB7XHJcbiAgICAgIC5lbnZCdG5zIHtcclxuICAgICAgICBkaXNwbGF5OiBub25lO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAuZW52QnRuV3JhcHBlciB7XHJcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XHJcbiAgICAgIG1hcmdpbi1sZWZ0OiAxNXB4O1xyXG4gICAgfVxyXG4gICAgLmVudkJ0biB7XHJcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICMyOWIwYWU7XHJcbiAgICAgIGJvcmRlcjogbm9uZTtcclxuICAgICAgd2lkdGg6IDY0cHg7XHJcbiAgICAgIGhlaWdodDogNjRweDtcclxuICAgICAgcGFkZGluZzogMTBweDtcclxuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XHJcbiAgICAgIHRleHQtZGVjb3JhdGlvbjogdXBwZXJjYXNlO1xyXG4gICAgICBjb2xvcjogI2ZmZjtcclxuICAgICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KGJvdHRvbSwgcmdiKDQxLDE0NCwxNzYpIDAlLCByZ2IoMTEzLDIyMiwyMjApIDEwMCUpO1xyXG4gICAgICBiYWNrZ3JvdW5kLWltYWdlOiAtby1saW5lYXItZ3JhZGllbnQoYm90dG9tLCByZ2IoNDEsMTQ0LDE3NikgMCUsIHJnYigxMTMsMjIyLDIyMCkgMTAwJSk7XHJcbiAgICAgIGJhY2tncm91bmQtaW1hZ2U6IC1tb3otbGluZWFyLWdyYWRpZW50KGJvdHRvbSwgcmdiKDQxLDE0NCwxNzYpIDAlLCByZ2IoMTEzLDIyMiwyMjApIDEwMCUpO1xyXG4gICAgICBiYWNrZ3JvdW5kLWltYWdlOiAtd2Via2l0LWxpbmVhci1ncmFkaWVudChib3R0b20sIHJnYig0MSwxNDQsMTc2KSAwJSwgcmdiKDExMywyMjIsMjIwKSAxMDAlKTtcclxuICAgICAgYmFja2dyb3VuZC1pbWFnZTogLW1zLWxpbmVhci1ncmFkaWVudChib3R0b20sIHJnYig0MSwxNDQsMTc2KSAwJSwgcmdiKDExMywyMjIsMjIwKSAxMDAlKTtcclxuICAgICAgYmFja2dyb3VuZC1pbWFnZTogLXdlYmtpdC1ncmFkaWVudChcclxuICAgICAgbGluZWFyLFxyXG4gICAgICBsZWZ0IGJvdHRvbSxcclxuICAgICAgbGVmdCB0b3AsXHJcbiAgICAgIGNvbG9yLXN0b3AoMCwgcmdiKDQxLDE0NCwxNzYpKSxcclxuICAgICAgY29sb3Itc3RvcCgxLCByZ2IoMTEzLDIyMiwyMjApKVxyXG4gICAgICApO1xyXG4gICAgICAtd2Via2l0LWJveC1zaGFkb3c6IGluc2V0IDBweCAxcHggMHB4ICM3MWRlZGMsIDBweCA2cHggMHB4ICMxNjRmNjA7XHJcbiAgICAgIC1tb3otYm94LXNoYWRvdzogaW5zZXQgMHB4IDFweCAwcHggIzcxZGVkYywgMHB4IDZweCAwcHggIzE2NGY2MDtcclxuICAgICAgLW8tYm94LXNoYWRvdzogaW5zZXQgMHB4IDFweCAwcHggIzcxZGVkYywgMHB4IDZweCAwcHggIzE2NGY2MDtcclxuICAgICAgYm94LXNoYWRvdzogaW5zZXQgMHB4IDFweCAwcHggIzcxZGVkYywgMHB4IDZweCAwcHggIzE2NGY2MDtcclxuICAgICAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgICAgIC1tb3otYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gICAgICAtby1ib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgICAgIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICAgIH1cclxuICAgIC5lbnZCdG4uYWN0aXZlLCAuZW52QnRuOmFjdGl2ZSB7XHJcbiAgICAgIGNvbG9yOiAjMjk5MGIwO1xyXG4gICAgICB0ZXh0LXNoYWRvdzogMHB4IDFweCAxcHggcmdiYSgyNTUsMjU1LDI1NSwwLjMpO1xyXG4gICAgICBiYWNrZ3JvdW5kOiByZ2IoNDEsMTQ0LDE3Nik7XHJcbiAgICAgIC13ZWJraXQtYm94LXNoYWRvdzogaW5zZXQgMHB4IDFweCAwcHggIzcxZGVkYywgaW5zZXQgMHB4IC0xcHggMHB4ICMxNjRmNjA7XHJcbiAgICAgIC1tb3otYm94LXNoYWRvdzogaW5zZXQgMHB4IDFweCAwcHggIzcxZGVkYywgaW5zZXQgMHB4IC0xcHggMHB4ICMxNjRmNjA7XHJcbiAgICAgIC1vLWJveC1zaGFkb3c6IGluc2V0IDBweCAxcHggMHB4ICM3MWRlZGMsIGluc2V0IDBweCAtMXB4IDBweCAjMTY0ZjYwO1xyXG4gICAgICBib3gtc2hhZG93OiBpbnNldCAwcHggMXB4IDBweCAjNzFkZWRjLCBpbnNldCAwcHggLTFweCAwcHggIzE2NGY2MDtcclxuICAgICAgdG9wOiAycHg7XHJcbiAgICB9XHJcbiAgICAuZW52QnRuIGltZyB7XHJcbiAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICB9XHJcbiAgICAuZW52QnRuV3JhcHBlciAuaW1nRGVzY3JpcHRpb24ge1xyXG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xyXG4gICAgICBwYWRkaW5nLXRvcDogMnB4O1xyXG4gICAgICBjb2xvcjogI2ZmZjtcclxuICAgICAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcclxuICAgICAgdmlzaWJpbGl0eTogaGlkZGVuO1xyXG4gICAgICBvcGFjaXR5OiAwO1xyXG4gICAgICAtd2Via2l0LXRyYW5zaXRpb246IHZpc2liaWxpdHkgb3BhY2l0eSAwLjJzO1xyXG4gICAgICB0cmFuc2l0aW9uOiB2aXNpYmlsaXR5IG9wYWNpdHkgMC4ycztcclxuICAgIH1cclxuICAgIC5lbnZCdG5XcmFwcGVyOmhvdmVyIC5pbWdEZXNjcmlwdGlvbiB7XHJcbiAgICAgIHZpc2liaWxpdHk6IHZpc2libGU7XHJcbiAgICAgIG9wYWNpdHk6IDE7XHJcbiAgICB9XHJcbiAgYF0sXHJcbiAgZGlyZWN0aXZlczogW05nU3dpdGNoLCBOZ1N3aXRjaENhc2UsIE5nU3dpdGNoRGVmYXVsdF1cclxufSlcclxuXHJcbmV4cG9ydCBjbGFzcyBFbnZpcm9ubWVudENvbXBvbmVudCB7XHJcbiAgb25PZmY6RmlyZWJhc2VPYmplY3RPYnNlcnZhYmxlPGFueT47XHJcbiAgZW52aXJvbm1lbnQ6RmlyZWJhc2VPYmplY3RPYnNlcnZhYmxlPGFueT47XHJcbiAgcGxheWVyczpGaXJlYmFzZU9iamVjdE9ic2VydmFibGU8YW55PjtcclxuICBVUkw6c3RyaW5nO1xyXG4gIGVudmlyb25tZW50U25hcHNob3Q6IHtcclxuICAgIGZvZzpib29sZWFuLFxyXG4gICAgc25vdzpib29sZWFuLFxyXG4gICAgbGlnaHRuaW5nOmJvb2xlYW4sXHJcbiAgICByYWluOmJvb2xlYW4sXHJcbiAgICBxdWFrZTpib29sZWFuLFxyXG4gICAgc3Rvcm06Ym9vbGVhblxyXG4gIH07XHJcbiAgcGxheWVyc1NuYXBzaG90OiBhbnk7XHJcbiAgZ2V0S2V5OkZ1bmN0aW9uO1xyXG5cclxuICBjb25zdHJ1Y3RvcihhZjpBbmd1bGFyRmlyZSwgcmVuZGVyZXI6IFJlbmRlcmVyKXtcclxuICAgIHRoaXMuVVJMID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XHJcbiAgICB0aGlzLm9uT2ZmID0gYWYuZGF0YWJhc2Uub2JqZWN0KCcvJyt0aGlzLlVSTC5zcGxpdCgnL2dhbWUvJylbMV0rJy9HbG9iYWxzL09uT2ZmJyx7cHJlc2VydmVTbmFwc2hvdDp0cnVlfSk7XHJcbiAgICB0aGlzLm9uT2ZmLnN1YnNjcmliZShzbmFwc2hvdCA9PntcclxuICAgICAgdGhpcy5lbnZpcm9ubWVudFNuYXBzaG90ID0gc25hcHNob3QudmFsKCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuZW52aXJvbm1lbnQgPSBhZi5kYXRhYmFzZS5vYmplY3QoJy8nK3RoaXMuVVJMLnNwbGl0KCcvZ2FtZS8nKVsxXSsnL0dsb2JhbHMvRW52aXJvbm1lbnQnKTtcclxuICAgIHRoaXMucGxheWVycyA9IGFmLmRhdGFiYXNlLm9iamVjdCgnLycrdGhpcy5VUkwuc3BsaXQoJy9nYW1lLycpWzFdKycvUGxheWVycycse3ByZXNlcnZlU25hcHNob3Q6dHJ1ZX0pO1xyXG4gICAgdGhpcy5wbGF5ZXJzLnN1YnNjcmliZShzbmFwc2hvdCA9PntcclxuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QgPSBzbmFwc2hvdC52YWwoKTtcclxuICAgIH0pO1xyXG4gICAgLyogR2V0cyBrZXl1cCAqL1xyXG4gICAgdGhpcy5nZXRLZXkgPSByZW5kZXJlci5saXN0ZW5HbG9iYWwoJ2RvY3VtZW50JywgJ2tleXVwJywgKGV2ZW50KSA9PiB7XHJcbiAgICAgIHZhciBrZXkgPSBldmVudC5rZXlDb2RlO1xyXG4gICAgICB0aGlzLnRvZ2dsZUJ0bihrZXkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjaGFuZ2VFbnZpcm9ubWVudCh4KXtcclxuICAgIHZhciBhZXRoZXIgPSAxO1xyXG4gICAgdmFyIG1hdGVyaWFsID0gMTtcclxuICAgIHZhciBjaGFvcyA9IDE7XHJcbiAgICB2YXIgb3JkZXIgPSAxO1xyXG4gICAgc3dpdGNoKHgpe1xyXG4gICAgICBjYXNlICdyYWluJzpcclxuICAgICAgICBpZih0aGlzLmVudmlyb25tZW50U25hcHNob3QucmFpbj09dHJ1ZSl7XHJcbiAgICAgICAgICB0aGlzLm9uT2ZmLnVwZGF0ZSh7cmFpbjpmYWxzZX0pO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMub25PZmYudXBkYXRlKHtyYWluOnRydWV9KTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgY2FzZSAnZm9nJzpcclxuICAgICAgICAgIGlmKHRoaXMuZW52aXJvbm1lbnRTbmFwc2hvdC5mb2c9PXRydWUpe1xyXG4gICAgICAgICAgICB0aGlzLm9uT2ZmLnVwZGF0ZSh7Zm9nOmZhbHNlfSlcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLm9uT2ZmLnVwZGF0ZSh7Zm9nOnRydWV9KTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIGNhc2UgJ2xpZ2h0bmluZyc6XHJcbiAgICAgICAgaWYodGhpcy5lbnZpcm9ubWVudFNuYXBzaG90LmxpZ2h0bmluZz09dHJ1ZSl7XHJcbiAgICAgICAgICB0aGlzLm9uT2ZmLnVwZGF0ZSh7bGlnaHRuaW5nOmZhbHNlfSlcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLm9uT2ZmLnVwZGF0ZSh7bGlnaHRuaW5nOnRydWV9KTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgY2FzZSAncXVha2UnOlxyXG4gICAgICAgIGlmKHRoaXMuZW52aXJvbm1lbnRTbmFwc2hvdC5xdWFrZT09dHJ1ZSl7XHJcbiAgICAgICAgICB0aGlzLm9uT2ZmLnVwZGF0ZSh7cXVha2U6ZmFsc2V9KVxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMub25PZmYudXBkYXRlKHtxdWFrZTp0cnVlfSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIGNhc2UgJ3Nub3cnOlxyXG4gICAgICAgIGlmKHRoaXMuZW52aXJvbm1lbnRTbmFwc2hvdC5zbm93PT10cnVlKXtcclxuICAgICAgICAgIHRoaXMub25PZmYudXBkYXRlKHtzbm93OmZhbHNlfSlcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLm9uT2ZmLnVwZGF0ZSh7c25vdzp0cnVlfSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIGNhc2UgJ3N0b3JtJzpcclxuICAgICAgICBpZih0aGlzLmVudmlyb25tZW50U25hcHNob3Quc3Rvcm09PXRydWUpe1xyXG4gICAgICAgICAgdGhpcy5vbk9mZi51cGRhdGUoe3N0b3JtOmZhbHNlfSlcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLm9uT2ZmLnVwZGF0ZSh7c3Rvcm06dHJ1ZX0pO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuZW52aXJvbm1lbnRTbmFwc2hvdC5yYWluID09IHRydWUpIHtcclxuICAgICAgICBjaGFvcyArPSAxO1xyXG4gICAgICAgIG1hdGVyaWFsICs9IDI7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5lbnZpcm9ubWVudFNuYXBzaG90LmZvZyA9PSB0cnVlKSB7XHJcbiAgICAgICAgYWV0aGVyICs9IDI7XHJcbiAgICAgICAgb3JkZXIgKz0gMTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmVudmlyb25tZW50U25hcHNob3QubGlnaHRuaW5nID09IHRydWUpIHtcclxuICAgICAgICBhZXRoZXIgKz0gMTtcclxuICAgICAgICBjaGFvcyArPSAyO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuZW52aXJvbm1lbnRTbmFwc2hvdC5xdWFrZSA9PSB0cnVlKSB7XHJcbiAgICAgICAgb3JkZXIgKz0gMjtcclxuICAgICAgICBtYXRlcmlhbCArPSAxO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuZW52aXJvbm1lbnRTbmFwc2hvdC5zbm93ID09IHRydWUpIHtcclxuICAgICAgICBhZXRoZXIgKz0gMjtcclxuICAgICAgICBtYXRlcmlhbCArPSAyO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuZW52aXJvbm1lbnRTbmFwc2hvdC5zdG9ybSA9PSB0cnVlKSB7XHJcbiAgICAgICAgb3JkZXIgKz0gMjtcclxuICAgICAgICBjaGFvcyArPSAyO1xyXG4gICAgfVxyXG4gIHRoaXMuZW52aXJvbm1lbnQuc2V0KHthZXRoZXI6YWV0aGVyLG1hdGVyaWFsOm1hdGVyaWFsLGNoYW9zOmNoYW9zLG9yZGVyOm9yZGVyfSk7XHJcbiAgdGhpcy5jaGFuZ2VDaGFtcGlvblN0YXRzKGFldGhlcixtYXRlcmlhbCxjaGFvcyxvcmRlcik7XHJcbiAgfVxyXG5cclxuICBjaGFuZ2VDaGFtcGlvblN0YXRzKGFldGhlcixtYXRlcmlhbCxjaGFvcyxvcmRlcil7XHJcbiAgICBpZih0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIxLnBsYXllckNsYXNzID09ICdIaWdod2F5bWFuJyl7XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjEucGh5c2ljYWxBdHRhY2sgPSBNYXRoLmZsb29yKChjaGFvcyAqIG1hdGVyaWFsKSArIDEwKTtcclxuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMS5waHlzaWNhbERlZmVuc2UgPSBNYXRoLmZsb29yKDUgKyBtYXRlcmlhbCk7XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjEuc3BlY2lhbEF0dGFjayA9IE1hdGguZmxvb3IoMiArICgyICogb3JkZXIpKTtcclxuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMS5zcGVjaWFsRGVmZW5zZSA9IE1hdGguZmxvb3IoMyArIGNoYW9zICsgYWV0aGVyKTtcclxuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMS5kZXh0ZXJpdHkgPSBNYXRoLmZsb29yKCgoMTAgKiBhZXRoZXIpICsgb3JkZXIpIC8gbWF0ZXJpYWwpO1xyXG4gICAgfVxyXG4gICAgaWYodGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMS5wbGF5ZXJDbGFzcyA9PSAnRWxlbWVudGFsaXN0Jyl7XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjEucGh5c2ljYWxBdHRhY2sgPSBNYXRoLmZsb29yKDQgKyBhZXRoZXIgKyBtYXRlcmlhbCk7XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjEucGh5c2ljYWxEZWZlbnNlID0gTWF0aC5mbG9vcigzICsgb3JkZXIpO1xyXG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIxLnNwZWNpYWxBdHRhY2sgPSBNYXRoLmZsb29yKCgoMTIgKyBhZXRoZXIpICogY2hhb3MpIC8gb3JkZXIpO1xyXG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIxLnNwZWNpYWxEZWZlbnNlID0gTWF0aC5mbG9vcigxMCArIG1hdGVyaWFsICsgb3JkZXIpO1xyXG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIxLmRleHRlcml0eSA9IE1hdGguZmxvb3IoMyAqIGNoYW9zKTtcclxuICAgIH1cclxuICAgIGlmKHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjEucGxheWVyQ2xhc3MgPT0gXCJQYXJhZ29uXCIpe1xyXG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIxLnBoeXNpY2FsQXR0YWNrID0gTWF0aC5mbG9vcigob3JkZXIgKyBtYXRlcmlhbCkqMik7XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjEucGh5c2ljYWxEZWZlbnNlID0gTWF0aC5mbG9vcigoKDggKiBtYXRlcmlhbCkgKyBvcmRlcikgLyAoY2hhb3MgKiAyKSk7XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjEuc3BlY2lhbEF0dGFjayA9IE1hdGguZmxvb3IoKGFldGhlciAqIDYpL21hdGVyaWFsKTtcclxuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMS5zcGVjaWFsRGVmZW5zZSA9IE1hdGguZmxvb3IoKCg3ICogbWF0ZXJpYWwpICsgY2hhb3MpIC8gKG9yZGVyKjIpKTtcclxuICAgIH1cclxuICAgIGlmKHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjIucGxheWVyQ2xhc3MgPT0gJ0hpZ2h3YXltYW4nKXtcclxuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMi5waHlzaWNhbEF0dGFjayA9IE1hdGguZmxvb3IoKGNoYW9zICogbWF0ZXJpYWwpICsgMTApO1xyXG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIyLnBoeXNpY2FsRGVmZW5zZSA9IE1hdGguZmxvb3IoNSArIG1hdGVyaWFsKTtcclxuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMi5zcGVjaWFsQXR0YWNrID0gTWF0aC5mbG9vcigyICsgKDIgKiBvcmRlcikpO1xyXG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIyLnNwZWNpYWxEZWZlbnNlID0gTWF0aC5mbG9vcigzICsgY2hhb3MgKyBhZXRoZXIpO1xyXG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIyLmRleHRlcml0eSA9IE1hdGguZmxvb3IoKCgxMCAqIGFldGhlcikgKyBvcmRlcikgLyBtYXRlcmlhbCk7XHJcbiAgICB9XHJcbiAgICBpZih0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIyLnBsYXllckNsYXNzID09ICdFbGVtZW50YWxpc3QnKXtcclxuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMi5waHlzaWNhbEF0dGFjayA9IE1hdGguZmxvb3IoNCArIGFldGhlciArIG1hdGVyaWFsKTtcclxuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMi5waHlzaWNhbERlZmVuc2UgPSBNYXRoLmZsb29yKDMgKyBvcmRlcik7XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjIuc3BlY2lhbEF0dGFjayA9IE1hdGguZmxvb3IoKCgxMiArIGFldGhlcikgKiBjaGFvcykgLyBvcmRlcik7XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjIuc3BlY2lhbERlZmVuc2UgPSBNYXRoLmZsb29yKDEwICsgbWF0ZXJpYWwgKyBvcmRlcik7XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjIuZGV4dGVyaXR5ID0gTWF0aC5mbG9vcigzICogY2hhb3MpO1xyXG4gICAgfVxyXG4gICAgaWYodGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMi5wbGF5ZXJDbGFzcyA9PSBcIlBhcmFnb25cIil7XHJcbiAgICAgIHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjIucGh5c2ljYWxBdHRhY2sgPSBNYXRoLmZsb29yKChvcmRlciArIG1hdGVyaWFsKSoyKTtcclxuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMi5waHlzaWNhbERlZmVuc2UgPSBNYXRoLmZsb29yKCgoOCAqIG1hdGVyaWFsKSArIG9yZGVyKSAvIChjaGFvcyAqIDIpKTtcclxuICAgICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMi5zcGVjaWFsQXR0YWNrID0gTWF0aC5mbG9vcigoYWV0aGVyICogNikvbWF0ZXJpYWwpO1xyXG4gICAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIxLnNwZWNpYWxEZWZlbnNlID0gTWF0aC5mbG9vcigoKDcgKiBtYXRlcmlhbCkgKyBjaGFvcykgLyAob3JkZXIqMikpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMS5hY3Rpb24gPSB0aGlzLkFJU2VsZWN0QWN0aW9uKHRoaXMucGxheWVyc1NuYXBzaG90LnBsYXllcjEsdGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMik7XHJcbiAgICB0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIyLmFjdGlvbiA9IHRoaXMuQUlTZWxlY3RBY3Rpb24odGhpcy5wbGF5ZXJzU25hcHNob3QucGxheWVyMix0aGlzLnBsYXllcnNTbmFwc2hvdC5wbGF5ZXIxKTtcclxuICAgIHRoaXMucGxheWVycy51cGRhdGUodGhpcy5wbGF5ZXJzU25hcHNob3QpO1xyXG4gIH1cclxuXHJcbiAgQUlTZWxlY3RBY3Rpb24ocGxheWVyLGVuZW15KXtcclxuICAgIHZhciBhY3Rpb24gPSBcIlwiO1xyXG4gICAgdmFyIHJuZyA9IChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqKDEwMCAtIDAgKyAxKSArIDApKTtcclxuICAgIGlmICgocGxheWVyLnBoeXNpY2FsQXR0YWNrIC0gZW5lbXkucGh5c2ljYWxEZWZlbnNlKSA+IChwbGF5ZXIuc3BlY2lhbEF0dGFjayAtIGVuZW15LnNwZWNpYWxEZWZlbnNlKSkge1xyXG4gICAgICAgIGlmIChybmcgLSAocGxheWVyLnBoeXNpY2FsQXR0YWNrIC0gZW5lbXkucGh5c2ljYWxEZWZlbnNlKSA8PSAwKSB7XHJcbiAgICAgICAgICAgIHJuZyA9IDE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcm5nIC09IChwbGF5ZXIucGh5c2ljYWxBdHRhY2sgLSBlbmVteS5waHlzaWNhbERlZmVuc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICgocGxheWVyLnBoeXNpY2FsQXR0YWNrIC0gZW5lbXkucGh5c2ljYWxEZWZlbnNlKSA8IChwbGF5ZXIuc3BlY2lhbEF0dGFjayAtIGVuZW15LnNwZWNpYWxEZWZlbnNlKSkge1xyXG4gICAgICAgIGlmIChybmcgKyAocGxheWVyLnNwZWNpYWxBdHRhY2sgLSBlbmVteS5zcGVjaWFsRGVmZW5zZSkgPj0gMTAwKSB7XHJcbiAgICAgICAgICAgIHJuZyA9IDEwMDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBybmcgKz0gKHBsYXllci5zcGVjaWFsQXR0YWNrIC0gZW5lbXkuc3BlY2lhbERlZmVuc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChybmcgPD0gMzMpIHtcclxuICAgICAgICByZXR1cm4gXCJzdHJpa2VcIjtcclxuICAgIH1cclxuICAgIGlmIChybmcgPj0gNjYpIHtcclxuICAgICAgICByZXR1cm5cInNwZWNpYWxcIjtcclxuICAgIH1cclxuICAgIGlmIChybmcgPCA2NiAmJiBybmcgPiAzMykge1xyXG4gICAgICAgIHJldHVybiBcImRlZmVuZFwiO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdG9nZ2xlQnRuKGtleSkge1xyXG4gICAgLy8gYVxyXG4gICAgaWYgKGtleSA9PSAnNjUnIHx8IGtleSA9PSAnZm9nJykge1xyXG4gICAgICB0aGlzLmNoYW5nZUVudmlyb25tZW50KCdmb2cnKTtcclxuICAgIH1cclxuICAgIC8vIHNcclxuICAgIGlmIChrZXkgPT0gJzgzJyB8fCBrZXkgPT0gJ3Nub3cnKSB7XHJcbiAgICAgIHRoaXMuY2hhbmdlRW52aXJvbm1lbnQoJ3Nub3cnKTtcclxuICAgIH1cclxuICAgIC8vIGRcclxuICAgIGlmIChrZXkgPT0gJzY4JyB8fCBrZXkgPT0gJ2xpZ2h0bmluZycpIHtcclxuICAgICAgdGhpcy5jaGFuZ2VFbnZpcm9ubWVudCgnbGlnaHRuaW5nJyk7XHJcbiAgICB9XHJcbiAgICAvLyBmXHJcbiAgICBpZiAoa2V5ID09ICc3MCcgfHwga2V5ID09ICdyYWluJykge1xyXG4gICAgICB0aGlzLmNoYW5nZUVudmlyb25tZW50KCdyYWluJyk7XHJcbiAgICB9XHJcbiAgICAvLyBnXHJcbiAgICBpZiAoa2V5ID09ICc3MScgfHwga2V5ID09ICdxdWFrZScpIHtcclxuICAgICAgdGhpcy5jaGFuZ2VFbnZpcm9ubWVudCgncXVha2UnKTtcclxuICAgIH1cclxuICAgIC8vIGhcclxuICAgIGlmIChrZXkgPT0gJzcyJyB8fCBrZXkgPT0gJ3N0b3JtJykge1xyXG4gICAgICB0aGlzLmNoYW5nZUVudmlyb25tZW50KCdzdG9ybScpO1xyXG4gICAgfVxyXG4gIH1cclxufSJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
